(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"6Joi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("mrSG"),s=n("q/0M"),a=n("zVF4"),u=n("S+S0"),l=n("x7I3"),c=i.SDK_VERSION,h=new s.Logger("@firebase/firestore"),d=function(e){return e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT",e}({});function f(){return h.logLevel===s.LogLevel.DEBUG?d.DEBUG:h.logLevel===s.LogLevel.SILENT?d.SILENT:d.ERROR}function p(e){switch(e){case d.DEBUG:h.logLevel=s.LogLevel.DEBUG;break;case d.ERROR:h.logLevel=s.LogLevel.ERROR;break;case d.SILENT:h.logLevel=s.LogLevel.SILENT;break;default:h.error("Firestore ("+c+"): Invalid value passed to `setLogLevel`")}}function m(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(h.logLevel<=s.LogLevel.DEBUG){var i=n.map(y);h.debug.apply(h,o.__spreadArrays(["Firestore ("+c+") ["+e+"]: "+t],i))}}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(h.logLevel<=s.LogLevel.ERROR){var r=t.map(y);h.error.apply(h,o.__spreadArrays(["Firestore ("+c+"): "+e],r))}}function y(e){if("string"==typeof e)return e;var t=w.getPlatform();try{return t.formatJSON(e)}catch(n){return e}}function v(e){var t="FIRESTORE ("+c+") INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function b(e,t){e||v(t)}var w=function(){function e(){}return e.setPlatform=function(t){e.platform&&v("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||v("Platform not set"),e.platform},e}();function _(){return w.getPlatform().emptyByteString}var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},C=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o.__extends(t,e),t}(Error);function E(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new C(S.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function I(e,t){return void 0!==e?e:t}function A(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function N(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function D(e){for(var t in b(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function k(e,t){if(0!==t.length)throw new C(S.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Q(t.length,"argument")+".")}function x(e,t,n){if(t.length!==n)throw new C(S.INVALID_ARGUMENT,"Function "+e+"() requires "+Q(n,"argument")+", but was called with "+Q(t.length,"argument")+".")}function R(e,t,n){if(t.length<n)throw new C(S.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Q(n,"argument")+", but was called with "+Q(t.length,"argument")+".")}function P(e,t,n,r){if(t.length<n||t.length>r)throw new C(S.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+Q(t.length,"argument")+".")}function O(e,t,n,r){q(e,t,K(n)+" argument",r)}function M(e,t,n,r){void 0!==r&&O(e,t,n,r)}function L(e,t,n,r){q(e,t,n+" option",r)}function V(e,t,n,r){void 0!==r&&L(e,t,n,r)}function F(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(B(u))}var l=B(r);throw new C(S.INVALID_ARGUMENT,"Invalid value "+l+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function U(e,t,n,r){if(!t.some((function(e){return e===r})))throw new C(S.INVALID_ARGUMENT,"Invalid value "+B(r)+" provided to function "+e+"() for its "+K(n)+" argument. Acceptable values: "+t.join(", "))}function q(e,t,n,r){if(!("object"===t?j(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=B(r);throw new C(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function j(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function B(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":v("Unknown wrong type: "+typeof e)}function z(e,t,n){if(void 0===n)throw new C(S.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+K(t)+" argument, but it was undefined.")}function H(e,t,n){N(t,(function(t,r){if(n.indexOf(t)<0)throw new C(S.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function G(e,t,n,r){var i=B(r);return new C(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+K(n)+" argument to be a "+t+", but it was: "+i)}function W(e,t,n){if(n<=0)throw new C(S.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+K(t)+" argument to be a positive number, but it was: "+n+".")}function K(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Q(e,t){return e+" "+t+(1===e?"":"s")}var $=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return b(20===t.length,"Invalid auto ID: "+t),t},e}();function Y(e,t){return e<t?-1:e>t?1:0}function J(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function X(e){return e+"\0"}function Z(){if("undefined"==typeof Uint8Array)throw new C(S.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ee(){if(!w.getPlatform().base64Available)throw new C(S.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var te=function(){function e(e){ee(),this._binaryString=e}return e.fromBase64String=function(t){x("Blob.fromBase64String",arguments,1),O("Blob.fromBase64String","string",1,t),ee();try{var n=w.getPlatform().atob(t);return new e(n)}catch(r){throw new C(S.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+r)}},e.fromUint8Array=function(t){if(x("Blob.fromUint8Array",arguments,1),Z(),!(t instanceof Uint8Array))throw G("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,(function(e){return String.fromCharCode(e)})).join("");return new e(n)},e.prototype.toBase64=function(){return x("Blob.toBase64",arguments,0),ee(),w.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){x("Blob.toUint8Array",arguments,0),Z();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return Y(this._binaryString,e._binaryString)},e}(),ne=E(te,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),re=function(){return function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i}}(),ie="(default)",oe=function(){function e(e,t){this.projectId=e,this.database=t||ie}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===ie},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return Y(this.projectId,e.projectId)||Y(this.database,e.database)},e}(),se=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),ae=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&v("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&v("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return b(this.length>=(e=void 0===e?1:e),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return b(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return b(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return b(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new C(S.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter((function(e){return e.length>0})))},t.EMPTY_PATH=new t([]),t}(ae),le=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return le.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new C(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<e.length;){var a=e[i];if("\\"===a){if(i+1===e.length)throw new C(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new C(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new C(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(ae),he=function(){function e(t){this.path=t,b(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===ue.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return ue.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new ue(t.slice()))},e.fromPathString=function(t){return new e(ue.fromString(t))},e.EMPTY=new e(new ue([])),e}(),de=function(){return function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}}(),fe=function(e){return e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e.RetryTransaction="retry_transaction",e}({}),pe=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new de,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var s=new e(t,n,Date.now()+r,i,o);return s.start(r),s},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new C(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),me=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw g("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),b(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var i=pe.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&v("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){b(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){b(e===fe.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==fe.All&&i.timerId===e)break}return t.drain()}))},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);b(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),ge="\x01",ye="\x01",ve="\x10",be="\x11";function we(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Se(t)),t=_e(e.get(n),t);return Se(t)}function _e(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=ge+ve;break;case ge:n+=ge+be;break;default:n+=o}}return n}function Se(e){return e+ge+ye}function Ce(e){var t=e.length;if(b(t>=2,"Invalid path "+e),2===t)return b(e.charAt(0)===ge&&e.charAt(1)===ye,"Non-empty path "+e+" had length 2"),ue.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var s=e.indexOf(ge,o);switch((s<0||s>n)&&v('Invalid encoded resource path: "'+e+'"'),e.charAt(s+1)){case ye:var a=e.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case ve:i+=e.substring(o,s),i+="\0";break;case be:i+=e.substring(o,s+1);break;default:v('Invalid encoded resource path: "'+e+'"')}o=s+2}return new ue(r)}var Ee=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new C(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new C(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new C(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),Te=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new Ee(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new Ee(0,0)),e}(),Ie=function(){function e(e,t){this.comparator=e,this.root=t||Ne.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ne.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ne.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Ae(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Ae(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Ae(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Ae(this.root,e,this.comparator,!0)},e}(),Ae=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){b(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Ne=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw v("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw v("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw v("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),De=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw v("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw v("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw v("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw v("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw v("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Ne(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();Ne.EMPTY=new De;var ke=function(){function e(e){this.comparator=e,this.data=new Ie(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach((function(e){n=n.add(e)})),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new xe(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new xe(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),xe=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Re=new Ie(he.comparator);function Pe(){return Re}function Oe(){return Pe()}var Me=new Ie(he.comparator);function Le(){return Me}var Ve=new Ie(he.comparator);function Fe(){return Ve}var Ue=new ke(he.comparator);function qe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Ue,r=0,i=e;r<i.length;r++)n=n.add(i[r]);return n}var je=new ke(Y);function Be(){return je}var ze=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,b(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&b(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;b(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e)&&(t=o.applyToRemoteDocument(t,r[i]))}return t},e.prototype.applyToLocalView=function(e,t){t&&b(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(e)&&(t=a.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(e)&&(t=a.applyToLocalView(t,i,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),qe())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&J(this.mutations,e.mutations)&&J(this.baseMutations,e.baseMutations)},e}(),He=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){b(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Fe(),s=t.mutations,a=0;a<s.length;a++)o=o.insert(s[a].key,r[a].version);return new e(t,n,r,i,o)},e}(),Ge=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&v("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),We="SimpleDb",Ke=function(){function e(t){this.db=t,12.2===e.getIOSVersion(a.getUA())&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.openOrCreate=function(t,n,r){return b(e.isAvailable(),"IndexedDB not supported in current environment."),m(We,"Opening database:",t),new Ge((function(i,o){var s=window.indexedDB.open(t,n);s.onsuccess=function(t){i(new e(t.target.result))},s.onblocked=function(){o(new C(S.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(e){var t=e.target.error;o("VersionError"===t.name?new C(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):t)},s.onupgradeneeded=function(e){m(We,'Database "'+t+'" requires upgrade from version:',e.oldVersion),r.createOrUpgrade(e.target.result,s.transaction,e.oldVersion,nn).next((function(){m(We,"Database upgrade to version "+nn+" complete")}))}})).toPromise()},e.delete=function(e){return m(We,"Removing database:",e),Je(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(e.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var t=a.getUA(),n=e.getIOSVersion(t),r=0<n&&n<10,i=e.getAndroidVersion(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.isMockPersistence=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.USE_MOCK_PERSISTENCE)},e.getStore=function(e,t){return e.store(t)},e.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},e.prototype.runTransaction=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,s,a,u,l;return o.__generator(this,(function(c){switch(c.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),s=0,a=function(){var e,a,l,c;return o.__generator(this,(function(o){switch(o.label){case 0:++s,e=$e.open(u.db,r?"readonly":"readwrite",t),o.label=1;case 1:return o.trys.push([1,3,,4]),(a=n(e).catch((function(t){return e.abort(t),Ge.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return o.sent(),[2,{value:a}];case 3:return l=o.sent(),m(We,"Transaction failed with error: %s. Retrying: %s.",l.message,c=i&&"FirebaseError"!==l.name&&s<3),c?[3,4]:[2,{value:Promise.reject(l)}];case 4:return[2]}}))},u=this,c.label=1;case 1:return[5,a()];case 2:return"object"==typeof(l=c.sent())?[2,l.value]:[3,1];case 3:return[2]}}))}))},e.prototype.close=function(){this.db.close()},e}(),Qe=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return Je(this.dbCursor.delete())},e}(),$e=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new de,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=Ze(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(m(We,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return b(!!t,"Object store not part of transaction: "+e),new Ye(t)},e}(),Ye=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(m(We,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(m(We,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Je(n)},e.prototype.add=function(e){return m(We,"ADD",this.store.name,e,e),Je(this.store.add(e))},e.prototype.get=function(e){var t=this;return Je(this.store.get(e)).next((function(n){return void 0===n&&(n=null),m(We,"GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return m(We,"DELETE",this.store.name,e),Je(this.store.delete(e))},e.prototype.count=function(){return m(We,"COUNT",this.store.name),Je(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.deleteAll=function(e,t){m(We,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Ge((function(n,r){t.onerror=function(e){var t=Ze(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.iterateCursor=function(e,t){var n=[];return new Ge((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Qe(i),s=t(i.primaryKey,i.value,o);if(s instanceof Ge){var a=s.catch((function(e){return o.done(),Ge.reject(e)}));n.push(a)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return Ge.waitFor(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(b(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function Je(e){return new Ge((function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=Ze(e.target.error);n(t)}}))}var Xe=!1;function Ze(e){var t=Ke.getIOSVersion(a.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new C("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Xe||(Xe=!0,setTimeout((function(){throw r}),0)),r}}return e}var et=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return b(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return it(e).iterate({index:un.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=rt(n),st(e).put(t)}))},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=rt(t),st(e).put(n)}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=ot(e),s=it(e);return s.add({}).next((function(a){b("number"==typeof a,"Auto-generated key is not a number");for(var u=new ze(a,t,n,r),l=i.serializer.toDbMutationBatch(i.userId,u),c=[],h=new ke((function(e,t){return Y(e.canonicalString(),t.canonicalString())})),d=0,f=r;d<f.length;d++){var p=f[d],m=ln.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),c.push(s.put(l)),c.push(o.put(m,ln.PLACEHOLDER))}return h.forEach((function(t){c.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[a]=u.keys()})),Ge.waitFor(c).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return it(e).get(t).next((function(e){return e?(b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Ge.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return it(e).iterate({index:un.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(b(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return it(e).iterate({index:un.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return it(e).loadAll(un.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=ln.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ot(e).iterate({range:i},(function(r,i,s){var a=r[0],u=r[2],l=Ce(r[1]);if(a===n.userId&&t.path.isEqual(l))return it(e).get(u).next((function(e){if(!e)throw v("Dangling document-mutation reference found: "+r+" which points to "+u);b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+u),o.push(n.serializer.fromDbMutationBatch(e))}));s.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new ke(Y),i=[];return t.forEach((function(t){var o=ln.prefixForPath(n.userId,t.path),s=IDBKeyRange.lowerBound(o),a=ot(e).iterate({range:s},(function(e,i,o){var s=e[0],a=e[2],u=Ce(e[1]);s===n.userId&&t.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Ge.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;b(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=ln.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ke(Y);return ot(e).iterate({range:s},(function(e,t,o){var s=e[0],u=e[2],l=Ce(e[1]);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.lookupMutationBatches(e,a)}))},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(it(e).get(t).next((function(e){if(null===e)throw v("Dangling document-mutation reference found, which points to "+t);b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),Ge.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return nt(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),Ge.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ge.resolve();var r=IDBKeyRange.lowerBound(ln.prefixForUser(t.userId)),i=[];return ot(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Ce(e[1]);i.push(o)}else r.done()})).next((function(){b(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},e.prototype.containsKey=function(e,t){return tt(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return st(e).get(this.userId).next((function(e){return e||new an(t.userId,-1,"")}))},e}();function tt(e,t,n){var r=ln.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ot(e).iterate({range:o,keysOnly:!0},(function(e,n,r){e[0]===t&&e[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function nt(e,t,n){var r=e.store(un.store),i=e.store(ln.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.iterate({range:s},(function(e,t,n){return a++,n.delete()}));o.push(u.next((function(){b(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var d=h[c],f=ln.key(t,d.key.path,n.batchId);o.push(i.delete(f)),l.push(d.key)}return Ge.waitFor(o).next((function(){return l}))}function rt(e){return e instanceof Uint8Array?(b(Ke.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function it(e){return Un.getStore(e,un.store)}function ot(e){return Un.getStore(e,ln.store)}function st(e){return Un.getStore(e,an.store)}var at=1,ut=function(e){return e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine",e}({}),lt=function(){function e(e,t){this.generatorId=e,b((e&at)===e,"Generator ID "+e+" contains more than "+at+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<at,e},e.prototype.after=function(e){return this.seek(e+(1<<at)),this.next()},e.prototype.seek=function(e){b((e&at)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forTargetCache=function(){return new e(ut.QueryCache,2)},e.forSyncEngine=function(){return new e(ut.SyncEngine)},e}(),ct=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=lt.forTargetCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return Te.fromTimestamp(new Ee(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return ft(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ht(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return b(t.targetCount>0,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return ht(e).iterate((function(s,a){var u=r.serializer.fromDbTarget(a);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return Ge.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){var n=this;return ht(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},e.prototype.retrieveMetadata=function(e){return dt(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,Un.getStore(n,gn.store)).put(gn.key,t);var n},e.prototype.saveTargetData=function(e,t){return ht(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ht(e).iterate({range:i,index:pn.queryTargetsIndexName},(function(e,r,i){var s=n.serializer.fromDbTarget(r);t.isEqual(s.target)&&(o=s,i.done())})).next((function(){return o}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=pt(e);return t.forEach((function(t){var s=we(t.path);i.push(o.put(new mn(n,s))),i.push(r.referenceDelegate.addReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=pt(e);return Ge.forEach(t,(function(t){var o=we(t.path);return Ge.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=pt(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=pt(e),i=qe();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=Ce(e[1]),o=new he(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=we(t.path),r=IDBKeyRange.bound([n],[X(n)],!1,!0),i=0;return pt(e).iterate({index:mn.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){0!==e[0]&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.getTargetDataForTarget=function(e,t){var n=this;return ht(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},e}();function ht(e){return Un.getStore(e,pn.store)}function dt(e){return Ke.getStore(e,gn.store).get(gn.key).next((function(e){return b(null!==e,"Missing metadata row."),e}))}function ft(e){return dt(e).next((function(e){return e.highestListenSequenceNumber}))}function pt(e){return Un.getStore(e,mn.store)}var mt=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new ke(ce.comparator);return t.forEach((function(e){return n=n.add(e)})),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),gt=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),yt=function(){return function(e,t){this.version=e,this.transformResults=t}}(),vt=function(e){return e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete",e}({}),bt=function(){function e(e,t){this.updateTime=e,this.exists=t,b(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Ht&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Ht:(b(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return n=e.updateTime,(null!=(t=this.updateTime)?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),wt=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&b(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Ht?e.version:Te.MIN},e}(),_t=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=vt.Set,i}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by SetMutation."),new Ht(this.key,t.version,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=wt.getPostMutationVersion(e);return new Ht(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(wt),St=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=vt.Patch,o}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Wt(this.key,t.version);var n=this.patchDocument(e);return new Ht(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=wt.getPostMutationVersion(e),i=this.patchDocument(e);return new Ht(this.key,r,{hasLocalMutations:!0},i)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Ht?e.data():jt.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},t}(wt),Ct=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=vt.Transform,r.precondition=bt.exists(!0),r}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),b(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Wt(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new Ht(this.key,i,{hasCommittedMutations:!0},o)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new Ht(this.key,r.version,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Ht?e.field(i.field):void 0,s=i.transform.computeBaseValue(o||null);null!=s&&(t=null==t?jt.EMPTY.set(i.field,s):t.set(i.field,s))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&J(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){return b(e instanceof Ht,"Unknown MaybeDocument type "+e),b(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},t.prototype.serverTransformResults=function(e,t){var n=[];b(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;e instanceof Ht&&(s=e.field(i.field)),n.push(o.applyToRemoteDocument(s,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;t instanceof Ht&&(u=t.field(s.field)),null===u&&n instanceof Ht&&(u=n.field(s.field)),r.push(a.applyToLocalView(u,e))}return r},t.prototype.transformObject=function(e,t){b(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)e=e.set(this.fieldTransforms[n].field,t[n]);return e},t}(wt),Et=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=vt.Delete,r}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by DeleteMutation."),new Gt(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&b(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Gt(this.key,Te.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(wt),Tt=function(e){return e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue",e}({}),It=function(e){return e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous",e}({}),At=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(It.Estimate,n);case"previous":return new e(It.Previous,n);case"none":case void 0:return new e(It.Default,n);default:return v("fromSnapshotOptions() called with invalid options.")}},e}(),Nt=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return b(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),Y(this.typeOrder,e.typeOrder)},e}(),Dt=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=Tt.NullValue,t.internalValue=null,t}return o.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(Nt),kt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.BooleanValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Y(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(Nt),xt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.NumberValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue)<(r=e.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(e);var n,r},t}(Nt);function Rt(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Rt(this.internalValue,e.internalValue)},t}(xt),Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Rt(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(xt),Mt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.StringValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Y(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(Nt),Lt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.TimestampValue,n}return o.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Vt?-1:this.defaultCompareTo(e)},t}(Nt),Vt=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=Tt.TimestampValue,r}return o.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===It.Estimate?new Lt(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===It.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Lt?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(Nt),Ft=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.BlobValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Nt),Ut=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=Tt.RefValue,r}return o.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:he.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(Nt),qt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.GeoPointValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Nt),jt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.ObjectValue,n}return o.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),s=Y(i.key,o.key)||i.value.compareTo(o.value);if(s)return s}return Y(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(b(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(b(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){b(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach((function(e){n=n instanceof t?n.internalValue.get(e):null})),n},t.prototype.fieldMask=function(){var e=new ke(ce.comparator);return this.internalValue.forEach((function(n,r){var i=new ce([n]);if(r instanceof t){var o=r.fieldMask().fields;o.isEmpty()?e=e.add(i):o.forEach((function(t){e=e.add(i.child(t))}))}else e=e.add(i)})),mt.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new Ie(Y)),t}(Nt),Bt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=Tt.ArrayValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return Y(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},t}(Nt),zt=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return he.comparator(e.key,t.key)},e}(),Ht=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t,n)||this;return a.objectValue=i,a.proto=o,a.converter=s,b(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!r.hasLocalMutations,a.hasCommittedMutations=!!r.hasCommittedMutations,a}return o.__extends(t,e),t.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=jt.EMPTY;N(this.proto.fields||{},(function(n,r){t=t.set(new ce([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(e){b(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):v("Trying to compare documents on fields that don't exist")},t}(zt),Gt=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return o.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(zt),Wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(zt),Kt=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){N(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];e(o[0],o[1])}}))},e.prototype.isEmpty=function(){return D(this.inner)},e}(),Qt=function(){function e(){this.changes=new Kt((function(e){return e.toString()})),this.changesApplied=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return b(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){b(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},e.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ge.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){b(!this.changesApplied,"Changes have already been applied.")},e}(),$t=function(){function e(e,t){this.serializer=e,this.indexManager=t}return e.prototype.addEntry=function(e,t,n){return Jt(e).put(Xt(t),n)},e.prototype.removeEntry=function(e,t){var n=Jt(e),r=Xt(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return Jt(e).get(Xt(t)).next((function(e){return n.maybeDecodeDocument(e)}))},e.prototype.getSizedEntry=function(e,t){var n=this;return Jt(e).get(Xt(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:Zt(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=Oe();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.getSizedEntries=function(e,t){var n=this,r=Oe(),i=new Ie(he.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);o?(r=r.insert(e,o),i=i.insert(e,Zt(t))):(r=r.insert(e,null),i=i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Ge.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Jt(e).iterate({range:r},(function(e,t,r){for(var s=he.fromSegments(e);o&&he.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Le(),o=t.path.length+1,s={};if(n.isEqual(Te.MIN)){var a=t.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=t.path.toArray(),l=this.serializer.toDbTimestampKey(n);s.range=IDBKeyRange.lowerBound([u,l],!0),s.index=dn.collectionReadTimeIndex}return Jt(e).iterate(s,(function(e,n,s){if(e.length===o){var a=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(a.key.path)?a instanceof Ht&&t.matches(a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},e.prototype.getNewDocumentChanges=function(e,t){var n=this,r=Pe(),i=this.serializer.toDbTimestampKey(t),o=Jt(e),s=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:dn.readTimeIndex,range:s},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},e.prototype.getLastDocumentChange=function(e){var t,n=this,r=Jt(e),i=Te.MIN;return r.iterate({index:dn.readTimeIndex,reverse:!0},(function(e,r,o){t=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()})).next((function(){return{changedDoc:t,readTime:i}}))},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Yt(e).get(fn.key).next((function(e){return b(!!e,"Missing document cache metadata"),e}))},e.prototype.setMetadata=function(e,t){return Yt(e).put(fn.key,t)},e.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof Gt&&t.version.isEqual(Te.forDeletedDoc())?null:t}return null},e.RemoteDocumentChangeBuffer=function(e){function t(t,n){var r=e.call(this)||this;return r.documentCache=t,r.trackRemovals=n,r.documentSizes=new Kt((function(e){return e.toString()})),r}return o.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new ke((function(e,t){return Y(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,s){var a=t.documentSizes.get(o);if(b(void 0!==a,"Cannot modify a document that wasn't read (for "+o+")"),s){b(!t.readTime.isEqual(Te.MIN),"Cannot add a document with a read time of zero");var u=t.documentCache.serializer.toDbRemoteDocument(s,t.readTime);i=i.add(o.path.popLast());var l=Zt(u);r+=l-a,n.push(t.documentCache.addEntry(e,o,u))}else if(r-=a,t.trackRemovals){var c=t.documentCache.serializer.toDbRemoteDocument(new Gt(o,Te.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,c))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),Ge.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},t}(Qt),e}();function Yt(e){return Un.getStore(e,fn.store)}function Jt(e){return Un.getStore(e,dn.store)}function Xt(e){return e.path.toArray()}function Zt(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var en=function(){function e(){this.collectionParentIndex=new tn}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Ge.resolve()},e.prototype.getCollectionParents=function(e,t){return Ge.resolve(this.collectionParentIndex.getEntries(t))},e}(),tn=function(){function e(){this.index={}}return e.prototype.add=function(e){b(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ke(ue.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new ke(ue.comparator)).toArray()},e}(),nn=9,rn=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;b(n<r&&n>=0&&r<=nn,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new $e(t);n<1&&r>=1&&(function(e){e.createObjectStore(sn.store)}(e),function(e){e.createObjectStore(an.store,{keyPath:an.keyPath}),e.createObjectStore(un.store,{keyPath:un.keyPath,autoIncrement:!0}).createIndex(un.userMutationsIndex,un.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ln.store)}(e),vn(e),function(e){e.createObjectStore(dn.store)}(e));var s=Ge.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(mn.store),e.deleteObjectStore(pn.store),e.deleteObjectStore(gn.store)}(e),vn(e)),s=s.next((function(){return function(e){var t=e.store(gn.store),n=new gn(0,0,Te.MIN.toTimestamp(),0);return t.put(gn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(e,t){return t.store(un.store).loadAll().next((function(n){e.deleteObjectStore(un.store),e.createObjectStore(un.store,{keyPath:un.keyPath,autoIncrement:!0}).createIndex(un.userMutationsIndex,un.userMutationsKeyPath,{unique:!0});var r=t.store(un.store),i=n.map((function(e){return r.put(e)}));return Ge.waitFor(i)}))}(e,o)}))),s=s.next((function(){!function(e){e.createObjectStore(bn.store,{keyPath:bn.keyPath})}(e)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(e){e.createObjectStore(fn.store)}(e),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(dn.store);t.createIndex(dn.readTimeIndex,dn.readTimeIndexPath,{unique:!1}),t.createIndex(dn.collectionReadTimeIndex,dn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),s},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(dn.store).iterate((function(e,n){t+=Zt(n)})).next((function(){var n=new fn(t);return e.store(fn.store).put(fn.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(an.store),r=e.store(un.store);return n.loadAll().next((function(n){return Ge.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(un.userMutationsIndex,i).next((function(r){return Ge.forEach(r,(function(r){b(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return nt(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(mn.store),n=e.store(dn.store);return ft(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new ue(n),s=function(e){return[0,we(e)]}(o);r.push(t.get(s).next((function(n){return n?Ge.resolve():function(n){return t.put(new mn(0,we(n),e))}(o)})))})).next((function(){return Ge.waitFor(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(yn.store,{keyPath:yn.keyPath});var n=t.store(yn.store),r=new tn,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:we(i)})}};return t.store(dn.store).iterate({keysOnly:!0},(function(e,t){var n=new ue(e);return i(n.popLast())})).next((function(){return t.store(ln.store).iterate({keysOnly:!0},(function(e,t){var n=Ce(e[1]);return i(n.popLast())}))}))},e}(),on=function(){return function(e,t){this.seconds=e,this.nanoseconds=t}}(),sn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}(),an=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),un=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}(),ln=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,we(t)]},e.key=function(e,t,n){return[e,we(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}(),cn=function(){return function(e,t){this.path=e,this.readTime=t}}(),hn=function(){return function(e,t){this.path=e,this.version=t}}(),dn=function(){function e(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return e.store="remoteDocuments",e.readTimeIndex="readTimeIndex",e.readTimeIndexPath="readTime",e.collectionReadTimeIndex="collectionReadTimeIndex",e.collectionReadTimeIndexPath=["parentPath","readTime"],e}(),fn=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}(),pn=function(){function e(e,t,n,r,i,o,s){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),mn=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,b(0===e==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),gn=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),yn=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function vn(e){e.createObjectStore(mn.store,{keyPath:mn.keyPath}).createIndex(mn.documentTargetsIndex,mn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(pn.store,{keyPath:pn.keyPath}).createIndex(pn.queryTargetsIndexName,pn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(gn.store)}var bn=function(){function e(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}return e.store="clientMetadata",e.keyPath="clientId",e}(),wn=o.__spreadArrays([an.store,un.store,ln.store,dn.store,pn.store,sn.store,gn.store,mn.store],[bn.store]),_n=o.__spreadArrays(wn,[fn.store]),Sn=o.__spreadArrays(_n,[yn.store]),Cn=function(){function e(){this.collectionParentsCache=new tn}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(b(t.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)}));var o={collectionId:r,parent:we(i)};return En(e).put(o)}return Ge.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[X(t),""],!1,!0);return En(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Ce(o.parent))}return n}))},e}();function En(e){return Un.getStore(e,yn.store)}var Tn=function(e){return e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution",e}({}),In=function(){function e(e,t,n,r,i,o,s){void 0===i&&(i=Te.MIN),void 0===o&&(o=Te.MIN),void 0===s&&(s=_()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},e}(),An=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=he.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Gt(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=he.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new Wt(t,n)):v("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof Ht){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e);return new dn(null,null,i,a=e.hasCommittedMutations,n,r)}if(e instanceof Gt){var o=e.key.path.toArray(),s=this.toDbTimestamp(e.version),a=e.hasCommittedMutations;return new dn(null,new cn(o,s),null,a,n,r)}if(e instanceof Wt){o=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new dn(new hn(o,u),null,null,!0,n,r)}return v("Unexpected MaybeDocument")},e.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},e.prototype.fromDbTimestampKey=function(e){var t=new Ee(e[0],e[1]);return Te.fromTimestamp(t)},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new on(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new Ee(e.seconds,e.nanoseconds);return Te.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new un(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=Ee.fromMillis(e.localWriteTimeMs);return new ze(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(we(e.path))})),t},e.prototype.fromDbResourcePaths=function(e){for(var t=qe(),n=0,r=e;n<r.length;n++)t=t.add(new he(Ce(r[n])));return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):Te.MIN,i=e.resumeToken;return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new In(t,e.targetId,Tn.Listen,e.lastListenSequenceNumber,n,r,i)},e.prototype.toDbTarget=function(e){b(Tn.Listen===e.purpose,"Only queries with purpose "+Tn.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),e.resumeToken instanceof Uint8Array?(b(Ke.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new pn(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},e}();function Nn(e,t){var n=e[1],r=t[1],i=Y(e[0],t[0]);return 0===i?Y(n,r):i}var Dn=function(){function e(e){this.maxElements=e,this.buffer=new ke(Nn),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Nn(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),kn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xn=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Rn=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){b(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==xn.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;b(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;m("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(fe.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(qn)}))},e}(),Pn=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Ge.resolve(se.INVALID);var r=new Dn(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===xn.COLLECTION_DISABLED?(m("LruGarbageCollector","Garbage collection skipped; disabled"),Ge.resolve(kn)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(m("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),kn):n.runGarbageCollection(e,t)}))},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,i,o,s,a,u,l=this,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(m("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return i=t,a=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),f()<=d.DEBUG&&m("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-c)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+e+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-c)+"ms"),Ge.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),On=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),Mn="IndexedDbPersistence",Ln="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Fn=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return o.__extends(t,e),t}(On),Un=function(){function e(t,n,r,i,o,s,a,u){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=s,this.sequenceNumberSyncer=u,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new zn(this,o),this.dbName=n+e.MAIN_DATABASE,this.serializer=new An(a),this.document=i.document,this.targetCache=new ct(this.referenceDelegate,this.serializer),this.indexManager=new Cn,this.remoteDocumentCache=new $t(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new C(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Fn)return Ke.getStore(e.simpleDbTransaction,t);throw v("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!e.isAvailable())throw new C(S.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},e.prototype.start=function(){var e=this;return b(!this.started,"IndexedDbPersistence double-started!"),b(null!==this.window,"Expected 'window' to be defined"),Ke.openOrCreate(this.dbName,nn,new rn(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[gn.store],(function(e){return ft(e)}))})).then((function(t){e.listenSequence=new se(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",Sn,(function(t){return Bn(t).put(new bn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return m(Mn,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},e.prototype.verifyPrimaryLease=function(e){var t=this;return jn(e).get(sn.key).next((function(e){return Ge.resolve(t.isLocalClient(e))}))},e.prototype.removeClientMetadata=function(e){return Bn(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=e.getStore(n,bn.store);return r.loadAll().next((function(e){var n=t.filterActiveClients(e,18e5),i=e.filter((function(e){return-1===n.indexOf(e)}));return Ge.forEach(i,(function(e){return r.delete(e.clientId)})).next((function(){return i}))}))}))]);case 1:n.sent().forEach((function(e){t.window.localStorage.removeItem(t.zombiedClientLocalStorageKey(e.clientId))})),n.label=2;case 2:return[2]}}))}))},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(fe.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return jn(e).get(sn.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new C(S.FAILED_PRECONDITION,Vn);return!1}}return!(!t.networkEnabled||!t.inForeground)||Bn(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){return!(t.clientId===e.clientId||!(!t.networkEnabled&&e.networkEnabled||!t.inForeground&&e.inForeground&&t.networkEnabled===e.networkEnabled))}))}))})).next((function(e){return t.isPrimary!==e&&m(Mn,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[sn.store,bn.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[bn.store],(function(t){return Bn(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},e.clearPersistence=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return e.isAvailable()?[4,Ke.delete(t+e.MAIN_DATABASE)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return b(this.started,"Cannot initialize MutationQueue before persistence is started."),et.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getTargetCache=function(){return b(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},e.prototype.getRemoteDocumentCache=function(){return b(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return b(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;m(Mn,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),s=t.startsWith("readonly");return this.simpleDb.runTransaction(s?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite",Sn,(function(o){return i=new Fn(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw g("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new C(S.FAILED_PRECONDITION,Ln);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return jn(e).get(sn.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new C(S.FAILED_PRECONDITION,Vn)}))},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new sn(this.clientId,this.allowTabSynchronization,Date.now());return jn(e).put(sn.key,t)},e.isAvailable=function(){return Ke.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=jn(e);return n.get(sn.key).next((function(e){return t.isLocalClient(e)?(m(Mn,"Releasing primary lease."),n.delete(sn.key)):Ge.resolve()}))},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(g("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(b(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(b("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return m(Mn,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(n){return g(Mn,"Failed to get zombied client id.",n),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){g("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function qn(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){if(!function(e){return e.code===S.FAILED_PRECONDITION&&e.message===Ln}(e))throw e;return m(Mn,"Unexpectedly lost primary lease"),[2]}))}))}function jn(e){return e.store(sn.store)}function Bn(e){return e.store(bn.store)}var zn=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new Pn(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Hn(e,t)},e.prototype.removeReference=function(e,t){return Hn(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Hn(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Ge.resolve(!0):function(e,t){var n=!1;return st(e).iterateSerial((function(r){return tt(e,r,t).next((function(e){return e&&(n=!0),Ge.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(s,a){if(a<=t){var u=n.isPinned(e,s).next((function(t){if(!t)return o++,r.getEntry(e,s).next((function(){return r.removeEntry(s),pt(e).delete([0,we(s.path)])}))}));i.push(u)}})).next((function(){return Ge.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Hn(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=pt(e),i=se.INVALID;return r.iterate({index:mn.documentTargetsIndex},(function(e,r){var o=r.path,s=r.sequenceNumber;0===e[0]?(i!==se.INVALID&&t(new he(Ce(n)),i),i=s,n=o):i=se.INVALID})).next((function(){i!==se.INVALID&&t(new he(Ce(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Hn(e,t){return pt(e).put(function(e,t){return new mn(0,we(e.path),t)}(t,e.currentSequenceNumber))}var Gn=Number,Wn=Gn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Kn=Gn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Qn=Gn.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function $n(e){return null==e}function Yn(e){return Qn(e)&&e<=Kn&&e>=Wn}var Jn=function(){function e(e,t,n,r,i,o,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.memoizedCanonicalId=null}return e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";$n(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),$n(this.limit)||(e+=", limit: "+this.limit),this.orderBy.length>0&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},e.prototype.isDocumentQuery=function(){return he.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e}(),Xn=function(e){return e.First="F",e.Last="L",e}({}),Zn=function(){function e(e,t,n,r,i,o,s,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Xn.First),void 0===s&&(s=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)this.memoizedOrderBy=e.isKeyField()?[hr]:[new cr(e),hr];else{b(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:ur.ASCENDING)===ur.ASCENDING?hr:dr)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){b(null==this.getInequalityFilterField()||!(t instanceof nr)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),b(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){b(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.withLimitToFirst=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Xn.First,this.startAt,this.endAt)},e.prototype.withLimitToLast=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Xn.Last,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},e.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},e.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},e.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(e,t);if(0!==s)return s;n=n||o.field.isKeyField()}return b(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimitToFirst=function(){return!$n(this.limit)&&this.limitType===Xn.First},e.prototype.hasLimitToLast=function(){return!$n(this.limit)&&this.limitType===Xn.Last},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof nr&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof nr&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Xn.First)this.memoizedTarget=new Jn(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t];e.push(new cr(r.field,r.dir===ur.DESCENDING?ur.ASCENDING:ur.DESCENDING))}var i=this.endAt?new lr(this.endAt.position,!this.endAt.before):null,o=this.startAt?new lr(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new Jn(this.path,this.collectionGroup,e,this.filters,this.limit,i,o)}return this.memoizedTarget},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):he.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){b(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),er=function(){return function(){}}(),tr=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return v("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),nr=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return o.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===tr.IN?(b(r instanceof Bt,"Comparing on key with IN, but filter value not an ArrayValue"),b(r.internalValue.every((function(e){return e instanceof Ut})),"Comparing on key with IN, but an array value was not a RefValue"),new ir(e,r)):(b(r instanceof Ut,"Comparing on key, but filter value not a RefValue"),b(n!==tr.ARRAY_CONTAINS&&n!==tr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new rr(e,n,r));if(r.isEqual(Dt.INSTANCE)){if(n!==tr.EQUAL)throw new C(S.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Ot.NAN)){if(n!==tr.EQUAL)throw new C(S.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===tr.ARRAY_CONTAINS?new or(e,r):n===tr.IN?(b(r instanceof Bt,"IN filter has invalid value: "+r.toString()),new sr(e,r)):n===tr.ARRAY_CONTAINS_ANY?(b(r instanceof Bt,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new ar(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case tr.LESS_THAN:return e<0;case tr.LESS_THAN_OR_EQUAL:return e<=0;case tr.EQUAL:return 0===e;case tr.GREATER_THAN:return e>0;case tr.GREATER_THAN_OR_EQUAL:return e>=0;default:return v("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[tr.LESS_THAN,tr.LESS_THAN_OR_EQUAL,tr.GREATER_THAN,tr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(er),rr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.matches=function(e){var t=he.comparator(e.key,this.value.key);return this.matchesComparison(t)},t}(nr),ir=function(e){function t(t,n){var r=e.call(this,t,tr.IN,n)||this;return r.value=n,r}return o.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},t}(nr),or=function(e){function t(t,n){return e.call(this,t,tr.ARRAY_CONTAINS,n)||this}return o.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Bt&&t.contains(this.value)},t}(nr),sr=function(e){function t(t,n){var r=e.call(this,t,tr.IN,n)||this;return r.value=n,r}return o.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(nr),ar=function(e){function t(t,n){var r=e.call(this,t,tr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return o.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Bt&&n.internalValue.some((function(e){return t.value.contains(e)}))},t}(nr),ur=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),lr=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},e.prototype.sortsBeforeDocument=function(e,t){b(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())b(o instanceof Ut,"Bound has a non-key value where the key path is being used."),n=he.comparator(o.key,t.key);else{var s=t.field(i.field);b(null!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(i.dir===ur.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++)if(!this.position[t].isEqual(e.position[t]))return!1;return!0},e}(),cr=function(){function e(e,t){this.field=e,void 0===t&&(t=ur.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Ht.compareByKey(e,t):Ht.compareByField(this.field,e,t);switch(this.dir){case ur.ASCENDING:return n;case ur.DESCENDING:return-1*n;default:return v("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),hr=new cr(ce.keyField(),ur.ASCENDING),dr=new cr(ce.keyField(),ur.DESCENDING),fr=function(){function e(){}return e.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return b(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()?this.executeFullCollectionScan(e,t):n.isEqual(Te.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next((function(o){var s=i.applyQuery(t,o);return(t.hasLimitToFirst()||t.hasLimitToLast())&&i.needsRefill(t.limitType,s,r,n)?i.executeFullCollectionScan(e,t):(f()<=d.DEBUG&&m("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),i.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next((function(e){return s.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.applyQuery=function(e,t){var n=new ke((function(t,n){return e.docComparator(t,n)}));return t.forEach((function(t,r){r instanceof Ht&&e.matches(r)&&(n=n.add(r))})),n},e.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===Xn.First?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.executeFullCollectionScan=function(e,t){return f()<=d.DEBUG&&m("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,Te.MIN)},e}(),pr=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e}))},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=Oe();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)})),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Pe();return i.forEach((function(e,t){t||(t=new Gt(e,Te.forDeletedDoc())),o=o.insert(e,t)})),o}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new he(t)).next((function(e){var t=Le();return e instanceof Ht&&(t=t.insert(e.key,e)),t}))},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;b(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=Le();return this.indexManager.getCollectionParents(e,i).next((function(s){return Ge.forEach(s,(function(s){var a=t.asCollectionQueryAtPath(s.child(i));return r.getDocumentsMatchingCollectionQuery(e,a,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return o.addMissingBaseDocuments(e,i=t,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],s=0,a=o.mutations;s<a.length;s++){var u=a[s],l=u.key,c=r.get(l),h=u.applyToLocalView(c,c,o.localWriteTime);r=h instanceof Ht?r.insert(l,h):r.remove(l)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=qe(),i=0,o=t;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof St&&null===n.get(u.key)&&(r=r.add(u.key))}var l=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof Ht&&(l=l.insert(e,t))})),l}))},e}(),mr=function(){function e(){this.refsByKey=new ke(gr.compareByKey),this.refsByTarget=new ke(gr.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new gr(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.removeRef(new gr(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.removeReferencesForId=function(e){var t=this,n=he.EMPTY,r=new gr(n,e),i=new gr(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=he.EMPTY,n=new gr(t,e),r=new gr(t,e+1),i=qe();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new gr(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),gr=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return he.comparator(e.key,t.key)||Y(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return Y(e.targetOrBatchId,t.targetOrBatchId)||he.comparator(e.key,t.key)},e}(),yr=function(){function e(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new mr,this.targetDataByTarget=new Ie(Y),this.targetIdByTarget=new Kt((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=Te.MIN,b(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new pr(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return e.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},e.prototype.handleUserChange=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i=this;return o.__generator(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(s){return o=s,t=i.persistence.getMutationQueue(e),n=new pr(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],s=qe(),a=0,u=o;a<u.length;a++){t.push((f=u[a]).batchId);for(var l=0,c=f.mutations;l<c.length;l++)s=s.add(c[l].key)}for(var h=0,d=e;h<d.length;h++){var f;i.push((f=d[h]).batchId);for(var p=0,m=f.mutations;p<m.length;p++)s=s.add(m[p].key)}return n.getDocuments(r,s).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},e.prototype.localWrite=function(e){var t,n=this,r=Ee.now(),i=e.reduce((function(e,t){return e.add(t.key)}),qe());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var s=[],a=0,u=e;a<u.length;a++){var l=u[a],c=l.extractBaseValue(t.get(l.key));null!=c&&s.push(new St(l.key,c,c.fieldMask(),bt.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,s,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):Ge.resolve(null)}))}))},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return b(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},e.prototype.applyRemoteEvent=function(t){var n=this,r=t.snapshotVersion,i=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var s=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.targetDataByTarget;var a=[];A(t.targetChanges,(function(t,s){var u=i.get(t);if(u){a.push(n.targetCache.removeMatchingKeys(o,s.removedDocuments,t).next((function(){return n.targetCache.addMatchingKeys(o,s.addedDocuments,t)})));var l=s.resumeToken;if(l.length>0){var c=u.withResumeToken(l,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(t,c),e.shouldPersistTargetData(u,c,s)&&a.push(n.targetCache.updateTargetData(o,c))}}}));var u=Pe(),l=qe();if(t.documentUpdates.forEach((function(e,t){l=l.add(e)})),a.push(s.getEntries(o,l).next((function(e){t.documentUpdates.forEach((function(i,l){var c=e.get(i);l instanceof Gt&&l.version.isEqual(Te.MIN)?(s.removeEntry(i,r),u=u.insert(i,l)):null==c||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(b(!Te.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),s.addEntry(l,r),u=u.insert(i,l)):m("LocalStore","Ignoring outdated watch update for ",i,". Current version:",c.version," Watch version:",l.version),t.resolvedLimboDocuments.has(i)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))}))}))),!r.isEqual(Te.MIN)){var c=n.targetCache.getLastRemoteSnapshotVersion(o).next((function(e){return b(r.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+e),n.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,r)}));a.push(c)}return Ge.waitFor(a).next((function(){return s.apply(o)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(o,u)}))})).then((function(e){return n.targetDataByTarget=i,e}))},e.shouldPersistTargetData=function(e,t,n){return b(t.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0},e.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var s=this.targetDataByTarget.get(o);b(null!==s,"Can't set limbo-free snapshot version for unknown target: "+o);var a=s.withLastLimboFreeSnapshotVersion(s.snapshotVersion);this.targetDataByTarget=this.targetDataByTarget.insert(o,a)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Ge.forEach(e,(function(e){return Ge.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},e.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?Ge.resolve(r=i):t.targetCache.allocateTargetId(n).next((function(i){return r=new In(e,i,Tn.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},e.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?Ge.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},e.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);return b(null!==r,"Tried to release nonexistent target: "+e),this.persistence.runTransaction("Release target",t?"readwrite-idempotent":"readwrite-primary-idempotent",(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?Ge.resolve():Ge.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},e.prototype.executeQuery=function(e,t){var n=this,r=Te.MIN,i=qe();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:Te.MIN,t?i:qe())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),s=Ge.resolve();return o.forEach((function(r){s=s.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,s=t.docVersions.get(r);b(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(s)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):b(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),s.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},e.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs;return e.lastDocumentChangeReadTime=t.readTime,n}))},e.prototype.synchronizeLastDocumentChangeReadTime=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t=this;return o.__generator(this,(function(n){return this.remoteDocuments instanceof $t?(e=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.getLastDocumentChange(t)})).then((function(e){t.lastDocumentChangeReadTime=e.readTime}))]):[2]}))}))},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),vr=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=_(),this.batchesByDocumentKey=new ke(gr.compareByKey)}return e.prototype.checkEmpty=function(e){return Ge.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");b(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return b(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Ge.resolve()},e.prototype.getLastStreamToken=function(e){return Ge.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Ge.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){b(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&b(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new ze(i,t,n,r);this.mutationQueue.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new gr(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return Ge.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return Ge.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return b(null!=n,"Failed to find local mutation batch."),Ge.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this.indexOfBatchId(t+1),r=n<0?0:n;return Ge.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return Ge.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return Ge.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new gr(t,0),i=new gr(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){b(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);b(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),Ge.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new ke(Y);return t.forEach((function(e){var t=new gr(e,0),i=new gr(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){b(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),Ge.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;he.isDocumentKey(i)||(i=i.child(""));var o=new gr(new he(i),0),s=new ke(Y);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.targetOrBatchId)),!0)}),o),Ge.resolve(this.findMutationBatches(s))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;b(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Ge.forEach(t.mutations,(function(i){var o=new gr(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new gr(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Ge.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&b(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Ge.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return b(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return b(n.batchId===e,"If found batch must match"),n},e}(),br=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new Ie(he.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){b(!n.isEqual(Te.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:s,readTime:n}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Ge.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=Oe();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),Ge.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Le(),i=new he(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,l=a.readTime;if(!t.path.isPrefixOf(s.key.path))break;l.compareTo(n)<=0||u instanceof Ht&&t.matches(u)&&(r=r.insert(u.key,u))}return Ge.resolve(r)},e.prototype.forEachDocumentKey=function(e,t){return Ge.forEach(this.docs,(function(e){return t(e)}))},e.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return Ge.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return o.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),Ge.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(Qt),e}(),wr=function(){function e(e){this.persistence=e,this.targets=new Kt((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=Te.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new mr,this.targetCount=0,this.targetIdGenerator=lt.forTargetCache()}return e.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),Ge.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Ge.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Ge.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Ge.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Ge.resolve()},e.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return b(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,Ge.resolve()},e.prototype.updateTargetData=function(e,t){return b(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),Ge.resolve()},e.prototype.removeTargetData=function(e,t){return b(this.targetCount>0,"Removing a target from an empty cache"),b(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Ge.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(s,a){a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r.targets.delete(s),o.push(r.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),Ge.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return Ge.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return Ge.resolve(n)},e.prototype.getTargetDataForTarget=function(e,t){return v("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Ge.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Ge.resolve(n)},e.prototype.containsKey=function(e,t){return Ge.resolve(this.references.containsKey(t))},e}(),_r=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new se(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new wr(this),this.indexManager=new en,this.remoteDocumentCache=new br(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}return e.createLruPersistence=function(t,n,r){return new e(t,(function(e){return new Er(e,new An(n),r)}))},e.createEagerPersistence=function(t){return new e(t,(function(e){return new Cr(e)}))},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return[2,[this.clientId]]}))}))},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new vr(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.targetCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;m("MemoryPersistence","Starting transaction:",e);var i=new Sr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.mutationQueuesContainKey=function(e,t){return Ge.or((n=this.mutationQueues,r=[],N(n,(function(e,t){return r.push(t)})),r).map((function(n){return function(){return n.containsKey(e,t)}})));var n,r},e}(),Sr=function(e){function t(t){var n=e.call(this)||this;return n.currentSequenceNumber=t,n}return o.__extends(t,e),t}(On),Cr=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw v("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Ge.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Ge.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Ge.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Ge.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Ge.resolve(n.inMemoryPins.containsKey(t))}])},e}(),Er=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Kt((function(e){return we(e.path)})),this.garbageCollector=new Pn(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Ge.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Ge.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?Ge.resolve():t(i)}))}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e,e.version);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw v("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return Ge.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Ge.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Ge.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),Tr=1e3,Ir=1.5,Ar=6e4,Nr=function(){function e(e,t,n,r,i){void 0===n&&(n=Tr),void 0===r&&(r=Ir),void 0===i&&(i=Ar),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&m("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}(),Dr=function(e){return e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff",e}({}),kr=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Dr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Nr(e,t)}return e.prototype.isStarted=function(){return this.state===Dr.Starting||this.state===Dr.Open||this.state===Dr.Backoff},e.prototype.isOpen=function(){return this.state===Dr.Open},e.prototype.start=function(){this.state!==Dr.Error?(b(this.state===Dr.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Dr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.inhibitBackoff=function(){b(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Dr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.isOpen()?[2,this.close(Dr.Initial)]:[2]}))}))},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return b(this.isStarted(),"Only started streams should be closed."),b(e===Dr.Error||$n(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Dr.Error?this.backoff.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(g(t.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===S.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;b(this.state===Dr.Initial,"Must be in initial state to auth"),this.state=Dr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new C(S.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},e.prototype.startStream=function(e){var t=this;b(this.state===Dr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return b(t.state===Dr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=Dr.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.performBackoff=function(){var e=this;b(this.state===Dr.Error,"Should only perform backoff when in Error state"),this.state=Dr.Backoff,this.backoff.backoffAndRun((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){return b(this.state===Dr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Dr.Initial,this.start(),b(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},e.prototype.handleStreamClose=function(e){return b(this.isStarted(),"Can't handle server close on non-started stream"),m("PersistentStream","close with error: "+e),this.stream=null,this.close(Dr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(m("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),xr=function(e){function t(t,n,r,i,o){var s=e.call(this,t,fe.ListenStreamConnectionBackoff,fe.ListenStreamIdle,n,r,o)||this;return s.serializer=i,s}return o.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(kr),Rr=function(e){function t(t,n,r,i,o){var s=e.call(this,t,fe.WriteStreamConnectionBackoff,fe.WriteStreamIdle,n,r,o)||this;return s.serializer=i,s.handshakeComplete_=!1,s.lastStreamToken=_(),s}return o.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(b(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return b(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){b(this.isOpen(),"Writing handshake requires an opened stream"),b(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;b(this.isOpen(),"Writing mutations requires an opened stream"),b(this.handshakeComplete_,"Handshake must be complete before writing mutations"),b(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},t}(kr),Pr=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new Rr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new xr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Pe();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);b(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===S.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===S.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e}(),Or=function(){function e(e){this.datastore=e,this.readVersions=Fe(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new C(S.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof Gt||e instanceof Ht?n.recordVersion(e):v("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new Et(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),!e.isEmpty())throw new C(S.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e instanceof Ht)t=e.version;else{if(!(e instanceof Gt))throw v("Document in a transaction was a "+e.constructor.name);t=Te.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new C(S.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?bt.updateTime(t):bt.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(Te.forDeletedDoc()))throw new C(S.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bt.updateTime(t)}return bt.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){b(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}(),Mr=function(e){return e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline",e}({}),Lr=function(e){return e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState",e}({}),Vr=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Mr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Mr.Unknown),b(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(fe.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,b(e.state===Mr.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Mr.Offline),Promise.resolve()})))},e.prototype.handleWatchStreamFailure=function(e){this.state===Mr.Online?(this.setAndBroadcast(Mr.Unknown),b(0===this.watchStreamFailures,"watchStreamFailures must be 0"),b(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Mr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Mr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(g(t),this.shouldWarnClientIsOffline=!1):m("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}(),Fr=function(e){return e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e}({});function Ur(e){switch(e){case S.OK:return v("Treated status OK as error");case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return v("Unknown status code: "+e)}}function qr(e){if(void 0===e)return g("GRPC error has no .code"),S.UNKNOWN;switch(e){case Fr.OK:return S.OK;case Fr.CANCELLED:return S.CANCELLED;case Fr.UNKNOWN:return S.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return S.INTERNAL;case Fr.UNAVAILABLE:return S.UNAVAILABLE;case Fr.UNAUTHENTICATED:return S.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case Fr.NOT_FOUND:return S.NOT_FOUND;case Fr.ALREADY_EXISTS:return S.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return S.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case Fr.ABORTED:return S.ABORTED;case Fr.OUT_OF_RANGE:return S.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return S.UNIMPLEMENTED;case Fr.DATA_LOSS:return S.DATA_LOSS;default:return v("Unknown status code: "+e)}}function jr(e){if(void 0===e)return Fr.OK;switch(e){case S.OK:return Fr.OK;case S.CANCELLED:return Fr.CANCELLED;case S.UNKNOWN:return Fr.UNKNOWN;case S.DEADLINE_EXCEEDED:return Fr.DEADLINE_EXCEEDED;case S.RESOURCE_EXHAUSTED:return Fr.RESOURCE_EXHAUSTED;case S.INTERNAL:return Fr.INTERNAL;case S.UNAVAILABLE:return Fr.UNAVAILABLE;case S.UNAUTHENTICATED:return Fr.UNAUTHENTICATED;case S.INVALID_ARGUMENT:return Fr.INVALID_ARGUMENT;case S.NOT_FOUND:return Fr.NOT_FOUND;case S.ALREADY_EXISTS:return Fr.ALREADY_EXISTS;case S.PERMISSION_DENIED:return Fr.PERMISSION_DENIED;case S.FAILED_PRECONDITION:return Fr.FAILED_PRECONDITION;case S.ABORTED:return Fr.ABORTED;case S.OUT_OF_RANGE:return Fr.OUT_OF_RANGE;case S.UNIMPLEMENTED:return Fr.UNIMPLEMENTED;case S.DATA_LOSS:return Fr.DATA_LOSS;default:return v("Unknown status code: "+e)}}var Br=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||he.comparator(t.key,n.key)}:function(e,t){return he.comparator(e.key,t.key)},this.keyedMap=Le(),this.sortedSet=new Ie(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),zr=function(e){return e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata",e}({}),Hr=function(e){return e[e.Local=0]="Local",e[e.Synced=1]="Synced",e}({}),Gr=function(){function e(){this.changeMap=new Ie(he.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==zr.Added&&n.type===zr.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===zr.Metadata&&n.type!==zr.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===zr.Modified&&n.type===zr.Modified?this.changeMap=this.changeMap.insert(t,{type:zr.Modified,doc:e.doc}):e.type===zr.Modified&&n.type===zr.Added?this.changeMap=this.changeMap.insert(t,{type:zr.Added,doc:e.doc}):e.type===zr.Removed&&n.type===zr.Added?this.changeMap=this.changeMap.remove(t):e.type===zr.Removed&&n.type===zr.Modified?this.changeMap=this.changeMap.insert(t,{type:zr.Removed,doc:n.doc}):e.type===zr.Added&&n.type===zr.Removed?this.changeMap=this.changeMap.insert(t,{type:zr.Modified,doc:e.doc}):v("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},e}(),Wr=function(){function e(e,t,n,r,i,o,s,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:zr.Added,doc:e})})),new e(t,n,Br.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Kr=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=Qr.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(Te.MIN,i,Be(),Pe(),qe())},e}(),Qr=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(_(),n,qe(),qe(),qe())},e}(),$r=function(){return function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r}}(),Yr=function(){return function(e,t){this.targetId=e,this.existenceFilter=t}}(),Jr=function(e){return e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset",e}({}),Xr=function(){return function(e,t,n,r){void 0===n&&(n=_()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}(),Zr=function(){function e(){this.pendingResponses=0,this.documentChanges=ni(),this._resumeToken=_(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=qe(),t=qe(),n=qe();return this.documentChanges.forEach((function(r,i){switch(i){case zr.Added:e=e.add(r);break;case zr.Modified:t=t.add(r);break;case zr.Removed:n=n.add(r);break;default:v("Encountered invalid change type: "+i)}})),new Qr(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ni()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),ei=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Pe(),this.pendingDocumentTargetMapping=ti(),this.pendingTargetResets=new ke(Y)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Ht?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Gt&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],e.key,e.newDoc)},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case Jr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Jr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Jr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),b(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Jr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Jr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:v("Unknown target watch change state: "+e.state)}}))},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):A(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new he(i.path);this.removeDocumentFromTarget(t,o,new Gt(o,Te.forDeletedDoc()))}else b(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};A(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var s=new he(o.target.path);null!==t.pendingDocumentUpdates.get(s)||t.targetContainsDocument(r,s)||t.removeDocumentFromTarget(r,s,new Gt(s,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=qe();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===Tn.LimboResolution||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Kr(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Pe(),this.pendingDocumentTargetMapping=ti(),this.pendingTargetResets=new ke(Y),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?zr.Modified:zr.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,zr.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Zr),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new ke(Y),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||m("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;b(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Zr,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function ti(){return new Ie(he.comparator)}function ni(){return new Ie(he.comparator)}var ri="RemoteStore",ii=function(){function e(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return o.__awaiter(s,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(m(ri,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Vr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Mr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.disableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Mr.Offline),[2]}}))}))},e.prototype.disableNetworkInternal=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(m(ri,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},e.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return m(ri,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Mr.Unknown),[2]}}))}))},e.prototype.listen=function(e){T(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},e.prototype.unlisten=function(e){b(T(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),D(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Mr.Unknown))},e.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){b(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new ei(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!D(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(t){return A(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},e.prototype.onWatchStreamClose=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return void 0===e&&b(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Mr.Unknown),[2]}))}))},e.prototype.onWatchStreamChange=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Mr.Online),e instanceof Xr&&e.state===Jr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof $r?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Yr?this.watchChangeAggregator.handleExistenceFilter(e):(b(e instanceof Xr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Te.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.raiseWatchSnapshot=function(e){var t=this;b(!e.isEqual(Te.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return A(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(_(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new In(n.target,e,Tn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;b(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){return T(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},e.prototype.fillWritePipeline=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(e=t.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:t.sent(),t.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){b(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){b(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++)e.writeStream.writeMutations(n[t].mutations)})).catch(qn)},e.prototype.onMutationResult=function(e,t){var n=this;b(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=He.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},e.prototype.onWriteStreamClose=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(n){return void 0===e&&b(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]:[2]}))}))},e.prototype.handleHandshakeError=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return Ur(e.code)?(m(ri,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=_(),[2,this.localStore.setLastStreamToken(_()).catch(qn)]):[2]}))}))},e.prototype.handleWriteError=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n=this;return o.__generator(this,(function(r){return Ur(i=e.code)&&i!==S.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},e.prototype.createTransaction=function(){return new Or(this.datastore)},e.prototype.restartNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Mr.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},e.prototype.handleCredentialChange=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(m(ri,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.applyPrimaryState=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Mr.Unknown),t.label=4;case 4:return[2]}}))}))},e}(),oi=function(){function e(e,t){if(x("GeoPoint",arguments,2),O("GeoPoint","number",1,e),O("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new C(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new C(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return Y(this._lat,e._lat)||Y(this._long,e._long)},e}(),si=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Vt(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),ai=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=ci(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Bt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&J(t.elements,this.elements)},e}(),ui=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=ci(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Bt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&J(t.elements,this.elements)},e}(),li=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);return n instanceof Pt&&this.operand instanceof Pt?new Pt(n.internalValue+this.operand.internalValue):new Ot(n.internalValue+this.operand.internalValue)},e.prototype.applyToRemoteDocument=function(e,t){return b(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof xt?e:new Pt(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function ci(e){return e instanceof Bt?e.internalValue.slice():[]}var hi,di,fi=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),pi=((hi={})[ur.ASCENDING.name]="ASCENDING",hi[ur.DESCENDING.name]="DESCENDING",hi),mi=((di={})[tr.LESS_THAN.name]="LESS_THAN",di[tr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",di[tr.GREATER_THAN.name]="GREATER_THAN",di[tr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",di[tr.EQUAL.name]="EQUAL",di[tr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",di[tr.IN.name]="IN",di[tr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",di),gi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(e,t){b(!$n(e),t+" is missing")}function vi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):v("can't parse "+e)}var bi=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?S.UNKNOWN:qr(e.code);return new C(t,e.message||"")},e.prototype.toInt32Value=function(e){return this.options.useProto3Json||$n(e)?e:{value:e}},e.prototype.fromInt32Value=function(e){var t;return $n(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);b(!!e,"Cannot deserialize null or undefined timestamp.");var t=vi(e.seconds||"0");return new Ee(t,e.nanos||0)},e.prototype.fromIso8601String=function(e){var t=0,n=gi.exec(e);if(b(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Ee(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(b(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),te.fromBase64String(e)):(b(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),te.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return b(!!e,"Trying to deserialize version that isn't set"),Te.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=ue.fromString(e);return b(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return b(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),b(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new he(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?ue.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new ue(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new ue(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return b(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof Dt)return{nullValue:"NULL_VALUE"};if(e instanceof kt)return{booleanValue:e.value()};if(e instanceof Pt)return{integerValue:""+e.value()};if(e instanceof Ot){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Mt?{stringValue:e.value()}:e instanceof jt?{mapValue:this.toMapValue(e)}:e instanceof Bt?{arrayValue:this.toArrayValue(e)}:e instanceof Lt?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof qt?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Ft?{bytesValue:this.toBytes(e.value())}:e instanceof Ut?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:v("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Dt.INSTANCE;if("booleanValue"in e)return kt.of(e.booleanValue);if("integerValue"in e)return new Pt(vi(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Ot.NAN;if("Infinity"===e.doubleValue)return Ot.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Ot.NEGATIVE_INFINITY}return new Ot(e.doubleValue)}if("stringValue"in e)return new Mt(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e)return yi(e.arrayValue,"arrayValue"),new Bt((e.arrayValue.values||[]).map((function(e){return t.fromValue(e)})));if("timestampValue"in e)return yi(e.timestampValue,"timestampValue"),new Lt(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e)return yi(e.geoPointValue,"geoPointValue"),new qt(new oi(e.geoPointValue.latitude||0,e.geoPointValue.longitude||0));if("bytesValue"in e){yi(e.bytesValue,"bytesValue");var n=this.fromBlob(e.bytesValue);return new Ft(n)}if("referenceValue"in e){yi(e.referenceValue,"referenceValue");var r=this.fromResourceName(e.referenceValue),i=new oe(r.get(1),r.get(3)),o=new he(this.extractLocalPathFromResourceName(r));return new Ut(i,o)}return v("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return b(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new Ht(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},e.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},e.prototype.fromFields=function(e){var t=this,n=jt.EMPTY;return N(e,(function(e,r){n=n.set(new ce([e]),t.fromValue(r))})),n},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},e.prototype.fromFound=function(e){var t=this;b(!!e.found,"Tried to deserialize a found document from a missing document."),yi(e.found.name,"doc.found.name"),yi(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Ht(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},e.prototype.fromMissing=function(e){b(!!e.missing,"Tried to deserialize a missing document from a found document."),b(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Gt(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):v("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Jr.Added:return"ADD";case Jr.Current:return"CURRENT";case Jr.NoChange:return"NO_CHANGE";case Jr.Removed:return"REMOVE";case Jr.Reset:return"RESET";default:return v("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Yr)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof $r){var t;if(e.newDoc instanceof Ht)return{documentChange:{document:{name:this.toName((t=e.newDoc).key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}};if(e.newDoc instanceof Gt)return{documentDelete:{document:this.toName((t=e.newDoc).key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof Xr){var n=void 0;return e.cause&&(n={code:jr(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return v("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){yi(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),s=e.targetChange.cause,a=s&&this.fromRpcStatus(s);t=new Xr(r,i,o,a||null)}else if("documentChange"in e){yi(e.documentChange,"documentChange");var u=e.documentChange;yi(u.document,"documentChange.name"),yi(u.document.name,"documentChange.document.name"),yi(u.document.updateTime,"documentChange.document.updateTime");var l=this.fromName(u.document.name),c=this.fromVersion(u.document.updateTime),h=new Ht(l,c,{},void 0,u.document,(function(e){return n.fromValue(e)}));t=new $r(u.targetIds||[],u.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){yi(e.documentDelete,"documentDelete");var d=e.documentDelete;yi(d.document,"documentDelete.document"),l=this.fromName(d.document),c=d.readTime?this.fromVersion(d.readTime):Te.forDeletedDoc(),h=new Gt(l,c),t=new $r([],d.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){yi(e.documentRemove,"documentRemove");var f=e.documentRemove;yi(f.document,"documentRemove"),l=this.fromName(f.document),t=new $r([],f.removedTargetIds||[],l,null)}else{if(!("filter"in e))return v("Unknown change type "+JSON.stringify(e));yi(e.filter,"filter");var p=e.filter;yi(p.targetId,"filter.targetId");var m=new fi(p.count||0);t=new Yr(p.targetId,m)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Jr.NoChange:"ADD"===e?Jr.Added:"REMOVE"===e?Jr.Removed:"CURRENT"===e?Jr.Current:"RESET"===e?Jr.Reset:v("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return Te.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Te.MIN:t.readTime?this.fromVersion(t.readTime):Te.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof _t)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof Et)t={delete:this.toName(e.key)};else if(e instanceof St)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof Ct))return v("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):bt.NONE;if(e.update){yi(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new St(r,i,o,n)}return new _t(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new Et(r,n);if(e.transform){r=this.fromName(e.transform.document);var s=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return b(!0===n.exists,'Transforms only support precondition "exists == true"'),new Ct(r,s)}return v("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return b(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:v("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?bt.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?bt.exists(e.exists):bt.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=this.fromVersion(e.updateTime?e.updateTime:t);r.isEqual(Te.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new yt(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(b(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof si)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ai)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof ui)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof li)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw v("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)b("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=si.instance;else if("appendMissingElements"in e)n=new ai((e.appendMissingElements.values||[]).map((function(e){return t.fromValue(e)})));else if("removeAllFromArray"in e)n=new ui((e.removeAllFromArray.values||[]).map((function(e){return t.fromValue(e)})));else if("increment"in e){var r=this.fromValue(e.increment);b(r instanceof xt,"NUMERIC_ADD transform requires a NumberValue"),n=new li(r)}else v("Unknown transform proto: "+JSON.stringify(e));var i=ce.fromServerFormat(e.fieldPath);return new gt(i,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;return b(1===t,"DocumentsTarget contained other than 1 document: "+t),Zn.atPath(this.fromQueryPath(e.documents[0])).toTarget()},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(b(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(b(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){b(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var s=[];n.where&&(s=this.fromFilter(n.where));var a=[];n.orderBy&&(a=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var l=null;n.startAt&&(l=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new Zn(t,i,a,s,u,Xn.First,l,c).toTarget()},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case Tn.Listen:return null;case Tn.ExistenceFilterMismatch:return"existence-filter-mismatch";case Tn.LimboResolution:return"limbo-document";default:return v("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof nr?t.toUnaryOrFieldFilter(e):v("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):v("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},e.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new lr(r,n)},e.prototype.toDirection=function(e){return pi[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return ur.ASCENDING;case"DESCENDING":return ur.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return mi[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return tr.EQUAL;case"GREATER_THAN":return tr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return tr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return tr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return tr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return tr.ARRAY_CONTAINS;case"IN":return tr.IN;case"ARRAY_CONTAINS_ANY":return tr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return v("Unspecified operator");default:return v("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return ce.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new cr(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return nr.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===tr.EQUAL){if(e.value.isEqual(Ot.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Dt.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return nr.create(t,tr.EQUAL,Ot.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return nr.create(n,tr.EQUAL,Dt.INSTANCE);case"OPERATOR_UNSPECIFIED":return v("Unspecified filter");default:return v("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return ce.fromServerFormat(e)}));return mt.fromArray(t)},e}(),wi=function(){return function(){this.viewSnap=null,this.targetId=0,this.listeners=[]}}(),_i=function(){function e(e){this.syncEngine=e,this.queries=new Kt((function(e){return e.canonicalId()})),this.onlineState=Mr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new wi,this.queries.set(t,r)),r.listeners.push(e),b(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap&&e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then((function(e){return r.targetId=e,e})):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return o.__generator(this,(function(o){return n=!1,(r=this.queries.get(t=e.query))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=this.queries.get(i.query);if(o){for(var s=0,a=o.listeners;s<a.length;s++)a[s].onViewSnapshot(i)&&(t=!0);o.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(e)&&(t=!0)})),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},e}(),Si=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Mr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(b(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==zr.Metadata&&t.push(i)}e=new Wr(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){return b(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache||(this.options.waitForSyncWhenOnline&&t!==Mr.Offline?(b(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Mr.Offline)},e.prototype.shouldRaiseEvent=function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){b(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Wr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),Ci=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}return e.fromSnapshot=function(t,n){for(var r=qe(),i=qe(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case zr.Added:r=r.add(a.doc.key);break;case zr.Removed:i=i.add(a.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),Ei=function(){return function(e){this.key=e}}(),Ti=function(){return function(e){this.key=e}}(),Ii=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=qe(),this.mutatedKeys=qe(),this.documentSet=new Br(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Gr,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,l=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=t instanceof Ht?t:null;h&&(b(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var d=!!c&&n.mutatedKeys.has(c.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data().isEqual(h.data())?d!==f&&(r.track({type:zr.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(c,h)||(r.track({type:zr.Modified,doc:h}),p=!0,(u&&n.query.docComparator(h,u)>0||l&&n.query.docComparator(h,l)<0)&&(a=!0)):!c&&h?(r.track({type:zr.Added,doc:h}),p=!0):c&&!h&&(r.track({type:zr.Removed,doc:c}),p=!0,(u||l)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(e):o.delete(e)):(s=s.delete(e),o=o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;s.size>this.query.limit;){var c=this.query.hasLimitToFirst()?s.last():s.first();s=s.delete(c.key),o=o.delete(c.key),r.track({type:zr.Removed,doc:c})}return b(!a||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;b(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case zr.Added:return 1;case zr.Modified:case zr.Metadata:return 2;case zr.Removed:return 0;default:return v("Unknown ChangeType: "+e)}};return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var s=t?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?Hr.Synced:Hr.Local,u=a!==this.syncState;return this.syncState=a,0!==o.length||u?{snapshot:new Wr(this.query,e.documentSet,i,o,e.mutatedKeys,a===Hr.Local,u,!1),limboChanges:s}:{limboChanges:s}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===Mr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Gr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return b(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=qe(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new Ti(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new Ei(e))})),n},e.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=qe();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},e.prototype.computeInitialSnapshot=function(){return Wr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Hr.Local)},e}(),Ai=5,Ni=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=Ai,this.backoff=new Nr(this.asyncQueue,fe.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return o.__awaiter(e,void 0,void 0,(function(){var e,t,n=this;return o.__generator(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!$n(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(g){return this.deferred.reject(g),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Ur(t)}return!1},e}(),Di=function(){return function(e,t,n){this.query=e,this.targetId=t,this.view=n}}(),ki=function(){return function(e){this.key=e,this.receivedDocument=!1}}(),xi=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Kt((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new Ie(he.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new mr,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=lt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Mr.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){b(null!==e,"SyncEngine listener cannot be null"),b(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,s;return o.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(this.sharedClientState.addLocalQueryTarget(t=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=o.sent(),s=this.sharedClientState.addLocalQueryTarget(i.targetId),[4,this.initializeViewAndComputeSnapshot(e,t=i.targetId,"current"===s)];case 3:n=o.sent(),this.isPrimary&&this.remoteStore.listen(i),o.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},e.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,s,a,u,l;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=o.sent(),i=new Ii(e,r.remoteKeys),s=i.computeDocChanges(r.documents),a=Qr.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==Mr.Offline),b(0===(u=i.applyChanges(s,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),b(!!u.snapshot,"applyChanges for new view should always return a snapshot"),l=new Di(e,t,i),this.queryViewsByQuery.set(e,l),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,u.snapshot]}}))}))},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},e.prototype.unlisten=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return o.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),b(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),(n=this.queriesByTarget[t.targetId]).length>1?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(qn)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.write=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},e.prototype.runTransaction=function(e,t,n){new Ni(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),N(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(b(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?b(r.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(b(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,qn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Lr.RemoteStore||!this.isPrimary&&t===Lr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);b(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s,a,u=this;return o.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),(r=(n=this.limboResolutionsByTarget[e])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new Ie(he.comparator)).insert(r,new Gt(r,Te.forDeletedDoc())),s=qe().add(r),a=new Kr(Te.MIN,{},new ke(Y),i,s),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return u.removeAndCleanupTarget(e,t)})).catch(qn)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},e.prototype.applyBatchState=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(m("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):v("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},e.prototype.applySuccessfulWrite=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(t=e.batch.batchId,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,qn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.rejectFailedWrite=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,qn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.registerPendingWritesCallback=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||m("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?(e.resolve(),[2]):((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n),[2])}}))}))},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new C(S.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Ie(Y)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(b(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),b(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var s=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),s.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof Ei?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof Ti?(m("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):v("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){m("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Zn.atPath(t.path);this.limboResolutionsByTarget[n]=new ki(t),this.remoteStore.listen(new In(r.toTarget(),n,Tn.LimboResolution,se.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s=this;return o.__generator(this,(function(o){switch(o.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(o,a){i.push(Promise.resolve().then((function(){var t=a.view.computeDocChanges(e);return t.needsRefill?s.localStore.executeQuery(a.query,!1).then((function(e){return a.view.computeDocChanges(e.documents,t)})):t})).then((function(e){var i=a.view.applyChanges(e,!0===s.isPrimary,t&&t.targetChanges[a.targetId]);if(s.updateTrackedLimbos(a.targetId,i.limboChanges),i.snapshot){s.isPrimary&&s.sharedClientState.updateQueryState(a.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var o=Ci.fromSnapshot(a.targetId,i.snapshot);r.push(o)}})))})),[4,Promise.all(i)];case 1:return o.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return o.sent(),[2]}}))}))},e.prototype.assertSubscribed=function(e){b(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},e.prototype.applyPrimaryState=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,s,a,u=this;return o.__generator(this,(function(o){switch(o.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return o.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=o.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],a=Promise.resolve(),A(this.queriesByTarget,(function(e,t){u.sharedClientState.isLocalQueryTarget(e)?s.push(e):a=a.then((function(){return u.removeAndCleanupTarget(e),u.localStore.releaseTarget(e,!0)})),u.remoteStore.unlisten(e)})),[4,a]);case 4:return o.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return o.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))},e.prototype.resetLimboDocuments=function(){var e=this;A(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Ie(he.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,l,c,h,d,f,p;return o.__generator(this,(function(o){switch(o.label){case 0:t=[],n=[],r=0,i=e,o.label=1;case 1:return r<i.length?(a=void 0,(u=this.queriesByTarget[s=i[r]])&&0!==u.length?[4,this.localStore.releaseTarget(s,!0)]:[3,8]):[3,14];case 2:return o.sent(),[4,this.localStore.allocateTarget(u[0].toTarget())];case 3:a=o.sent(),l=0,c=u,o.label=4;case 4:return l<c.length?(b(!!(d=this.queryViewsByQuery.get(h=c[l])),"No query view found for "+h),[4,this.synchronizeViewAndComputeSnapshot(d)]):[3,7];case 5:(f=o.sent()).snapshot&&n.push(f.snapshot),o.label=6;case 6:return l++,[3,4];case 7:return[3,12];case 8:return b(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(s)];case 9:return b(!!(p=o.sent()),"Target for id "+s+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return a=o.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),s,!1)];case 11:o.sent(),o.label=12;case 12:t.push(a),o.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},e.prototype.synthesizeTargetToQuery=function(e){return new Zn(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,Xn.First,e.startAt,e.endAt)},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return m("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=Kr.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:v("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},e.prototype.applyActiveTargetsChange=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s,a,u,l,c,h,d=this;return o.__generator(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(b(!this.queriesByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getTarget(h)]):[3,6];case 2:return b(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return s=f.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),s.targetId,!1)];case 4:f.sent(),this.remoteStore.listen(s),f.label=5;case 5:return n++,[3,1];case 6:a=function(e){return o.__generator(this,(function(t){switch(t.label){case 0:return u.queriesByTarget[e]?[4,u.localStore.releaseTarget(e,!1).then((function(){d.remoteStore.unlisten(e),d.removeAndCleanupTarget(e)})).catch(qn)]:[2,"continue"];case 1:return t.sent(),[2]}}))},u=this,l=0,c=t,f.label=7;case 7:return l<c.length?[5,a(h=c[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return qe().add(t.key);var n=qe(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.queryViewsByQuery.get(s);b(!!a,"No query view found for "+s),n=n.unionWith(a.view.syncedDocuments)}return n},e}(),Ri=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Pi="firestore_clients";function Oi(e,t){return b(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Pi+"_"+e+"_"+t}var Mi="firestore_mutations";function Li(e,t,n){var r=Mi+"_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}var Vi="firestore_targets";function Fi(e,t){return Vi+"_"+e+"_"+t}var Ui="firestore_online_state",qi="firestore_sequence_number",ji="SharedClientState",Bi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,b(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new C(i.error.code,i.error.message)),o?new e(t,n,i.state,s):(g(ji,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),zi=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,b(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new C(r.error.code,r.error.message)),i?new e(t,r.state,o):(g(ji,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Hi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Be(),s=0;i&&s<r.activeTargetIds.length;++s)i=Yn(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new e(t,o):(g(ji,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Gi=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&n.onlineState in Mr&&"string"==typeof n.clientId?new e(n.clientId,Mr[n.onlineState]):(g(ji,"Failed to parse online state: "+t),null)},e}(),Wi=function(){function e(){this.activeTargetIds=Be()}return e.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Ki=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new C(S.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=Oi(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(e){return qi+"_"+e}(this.persistenceKey),this.activeClients[this.localClientId]=new Wi,this.clientStateKeyRe=new RegExp("^"+Pi+"_"+s+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Mi+"_"+s+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Vi+"_"+s+"_(\\d+)$"),this.onlineStateKey=function(e){return Ui+"_"+e}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,i,s,a,u,l,c,h=this;return o.__generator(this,(function(o){switch(o.label){case 0:return b(!this.started,"WebStorageSharedClientState already started"),b(null!==this.syncEngine,"syncEngine property must be set before calling start()"),b(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=o.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(Oi(this.persistenceKey,r)))&&(s=Hi.fromWebStorageEntry(r,i))&&(this.activeClients[s.clientId]=s);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(u),l=0,c=this.earlyEvents;l<c.length;l++)this.handleWebStorageEvent(c[l]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=Be();return N(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Fi(this.persistenceKey,e));if(n){var r=zi.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Fi(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return m(ji,"READ",e,t),t},e.prototype.setItem=function(e,t){m(ji,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){m(ji,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(m(ji,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return o.__awaiter(t,void 0,void 0,(function(){var t,n,r,i,s,a;return o.__generator(this,(function(o){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(s=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(s)]}else e.key===this.sequenceNumberKey&&(b(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=se.INVALID;if(null!=e)try{var n=JSON.parse(e);b("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(r){g(ji,"Failed to read sequence number from WebStorage",r)}return t}(e.newValue))!==se.INVALID&&this.sequenceNumberHandler(a));return[2]}))}))}))}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new Bi(this.currentUser,e,t,n),i=Li(this.persistenceKey,this.currentUser,e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=Li(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:Mr[e]}))},e.prototype.persistQueryTargetState=function(e,t,n){var r=Fi(this.persistenceKey,e),i=new zi(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return b(null!==n,"Cannot parse client state key '"+e+"'"),Hi.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);b(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]);return Bi.fromWebStorageEntry(new Ri(void 0!==n[2]?n[2]:null),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);b(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return zi.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Gi.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return e.user.uid!==this.currentUser.uid?(m(ji,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),s=[],a=[];return i.forEach((function(e){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(t){return r.has(e)||s.push(e),[2]}))}))})),r.forEach((function(e){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(t){return i.has(e)||a.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(s,a)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}(),Qi=function(){function e(){this.localState=new Wi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Wi,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),$i=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return xn.withCacheSize(this.cacheSizeBytes)},e}(),Yi=function(){return function(){}}(),Ji=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=$.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new de,r=new de,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof $i?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof C?e.code===S.FAILED_PRECONDITION||e.code===S.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new C(S.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Un.buildStoragePrefix(this.databaseInfo),i=new bi(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,s;return o.__generator(this,(function(o){switch(o.label){case 0:if(t.synchronizeTabs&&!Ki.isAvailable(this.platform))throw new C(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Ki(this.asyncQueue,this.platform,r,this.clientId,e):new Qi,[4,Un.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return s=o.sent(),this.persistence=s,[2,s.referenceDelegate.garbageCollector]}}))}))}))},e.prototype.startMemoryPersistence=function(){return this.persistence=_r.createEagerPersistence(this.clientId),this.sharedClientState=new Qi,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return m("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return o.__awaiter(n,void 0,void 0,(function(){var n,i,s,a,u,l=this;return o.__generator(this,(function(c){switch(c.label){case 0:return n=new fr,this.localStore=new yr(this.persistence,n,e),[4,this.localStore.start()];case 1:return c.sent(),t&&(this.lruScheduler=new Rn(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),s=this.platform.newSerializer(this.databaseInfo.databaseId),a=new Pr(this.asyncQueue,r,this.credentials,s),u=function(e){return l.syncEngine.applyOnlineStateChange(e,Lr.SharedClientState)},this.remoteStore=new ii(this.localStore,a,this.asyncQueue,(function(e){return l.syncEngine.applyOnlineStateChange(e,Lr.RemoteStore)}),i),this.syncEngine=new xi(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=u,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new _i(this.syncEngine),[4,this.sharedClientState.start()];case 2:return c.sent(),[4,this.remoteStore.start()];case 3:return c.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return o.__awaiter(l,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return c.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return o.__awaiter(l,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return c.sent(),[2]}}))}))}))},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),m("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new de;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new Si(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof Ht)return e;if(e instanceof Gt)return null;throw new C(S.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return o.__awaiter(t,void 0,void 0,(function(){var t,n,r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new Ii(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new de;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new de;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},e}(),Xi=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),Zi=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<1)throw new C(S.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Q(1,"element")+".")}(0,e);for(var n=0;n<e.length;++n)if(O("FieldPath","string",n,e[n]),0===e[n].length)throw new C(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ce(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(ce.keyField().canonicalString()),e}(),eo=new RegExp("[~\\*/\\[\\]]"),to=function(){return function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e}}(),no=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(Ri.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){b(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),ro=function(){function e(e){var t=this;this.tokenListener=null,this.currentUser=Ri.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then((function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)}),(function(){})))}return e.prototype.getToken=function(){var e=this;b(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new C(S.ABORTED,"getToken aborted due to token change.");return n?(b("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new to(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){b(null!=this.tokenListener,"removeChangeListener() called twice"),b(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return b(null===e||"string"==typeof e,"Received invalid UID: "+e),new Ri(e)},e}(),io=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Ri.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),oo=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new io(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Ri.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function so(e){if(!e)return new no;switch(e.type){case"gapi":var t=e.client;return b(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new oo(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new C(S.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function ao(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var uo=function(){function e(e){this._methodName=e}return e.delete=function(){return k("FieldValue.delete",arguments),lo.instance},e.serverTimestamp=function(){return k("FieldValue.serverTimestamp",arguments),co.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("FieldValue.arrayUnion",arguments,1),new ho(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("FieldValue.arrayRemove",arguments,1),new fo(e)},e.increment=function(e){return O("FieldValue.increment","number",1,e),x("FieldValue.increment",arguments,1),new po(e)},e.prototype.isEqual=function(e){return this===e},e}(),lo=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return o.__extends(t,e),t.instance=new t,t}(uo),co=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return o.__extends(t,e),t.instance=new t,t}(uo),ho=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return o.__extends(t,e),t}(uo),fo=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return o.__extends(t,e),t}(uo),po=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return o.__extends(t,e),t}(uo),mo=E(uo,"Use FieldValue.<field>() instead."),go=/^__.*__$/,yo=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return n.push(null!==this.fieldMask?new St(e,this.data,this.fieldMask,t):new _t(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new Ct(e,this.fieldTransforms)),n},e}(),vo=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new St(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new Ct(e,this.fieldTransforms)),n},e}(),bo=function(e){return e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument",e[e.ArrayArgument=4]="ArrayArgument",e}({});function wo(e){switch(e){case bo.Set:case bo.MergeSet:case bo.Update:return!0;case bo.Argument:case bo.ArrayArgument:return!1;default:throw v("Unexpected case for UserDataSource: "+e)}}var _o=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new C(S.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(wo(this.dataSource)&&go.test(e))throw this.createError('Document fields cannot begin and end with "__"')},e}(),So=function(){return function(e,t){this.databaseId=e,this.key=t}}(),Co=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new _o(bo.Set,e,ce.EMPTY_PATH);To("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new yo(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new _o(bo.MergeSet,e,ce.EMPTY_PATH);To("Data must be an object, but it was:",r,t);var i,o,s=this.parseData(t,r);if(n){for(var a=new ke(ce.comparator),u=0,l=n;u<l.length;u++){var c=l[u],h=void 0;if(c instanceof Zi)h=c._internalPath;else{if("string"!=typeof c)throw v("Expected stringOrFieldPath to be a string or a FieldPath");h=Ao(e,c)}if(!r.contains(h))throw new C(S.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");a=a.add(h)}i=mt.fromSet(a),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=mt.fromArray(r.fieldMask),o=r.fieldTransforms;return new yo(s,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new _o(bo.Update,e,ce.EMPTY_PATH);To("Data must be an object, but it was:",r,t);var i=new ke(ce.comparator),o=jt.EMPTY;N(t,(function(t,s){var a=Ao(e,t),u=r.childContextForFieldPath(a);if((s=n.runPreConverter(s,u))instanceof lo)i=i.add(a);else{var l=n.parseData(s,u);null!=l&&(i=i.add(a),o=o.set(a,l))}}));var s=mt.fromSet(i);return new vo(o,s,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new _o(bo.Update,e,ce.EMPTY_PATH),o=[Io(e,t)],s=[n];if(r.length%2!=0)throw new C(S.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(Io(e,r[a])),s.push(r[a+1]);var u=new ke(ce.comparator),l=jt.EMPTY;for(a=0;a<o.length;++a){var c=o[a],h=i.childContextForFieldPath(c),d=this.runPreConverter(s[a],h);if(d instanceof lo)u=u.add(c);else{var f=this.parseData(d,h);null!=f&&(u=u.add(c),l=l.set(c,f))}}var p=mt.fromSet(u);return new vo(l,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new _o(n?bo.ArrayArgument:bo.Argument,e,ce.EMPTY_PATH),i=this.parseData(t,r);return b(null!=i,"Parsed data should not be null."),b(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(r){var n=No(r);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(Eo(e=this.runPreConverter(e,t)))return To("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof uo)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==bo.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new Ie(Y);return D(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):N(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new jt(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var s=this.parseData(o[i],t.childContextForArray(r));null==s&&(s=Dt.INSTANCE),n.push(s),r++}return new Bt(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!wo(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof lo){if(t.dataSource!==bo.MergeSet)throw t.dataSource===bo.Update?(b(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof co)t.fieldTransforms.push(new gt(t.path,si.instance));else if(e instanceof ho){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new ai(n);t.fieldTransforms.push(new gt(t.path,r))}else if(e instanceof fo){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new ui(n);t.fieldTransforms.push(new gt(t.path,i))}else if(e instanceof po){var o=this.parseQueryValue("FieldValue.increment",e._operand),s=new li(o);t.fieldTransforms.push(new gt(t.path,s))}else v("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return Dt.INSTANCE;if("number"==typeof e)return Yn(e)?new Pt(e):new Ot(e);if("boolean"==typeof e)return kt.of(e);if("string"==typeof e)return new Mt(e);if(e instanceof Date)return new Lt(Ee.fromDate(e));if(e instanceof Ee)return new Lt(new Ee(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof oi)return new qt(e);if(e instanceof te)return new Ft(e);if(e instanceof So)return new Ut(e.databaseId,e.key);throw t.createError("Unsupported field value: "+B(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new _o(bo.Argument,e,ce.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},e}();function Eo(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ee||e instanceof oi||e instanceof te||e instanceof So||e instanceof uo)}function To(e,t,n){if(!Eo(n)||!j(n)){var r=B(n);throw t.createError("an object"===r?e+" a custom object":e+" "+r)}}function Io(e,t){if(t instanceof Zi)return t._internalPath;if("string"==typeof t)return Ao(e,t);throw new C(S.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ao(e,t){try{return function(e){if(e.search(eo)>=0)throw new C(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Zi.bind.apply(Zi,o.__spreadArrays([void 0],e.split("."))))}catch(t){throw new C(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(r){var n=No(r);throw new C(S.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function No(e){return e instanceof Error?e.message:e.toString()}var Do="firestore.googleapis.com",ko=!0,xo=!0,Ro=!1,Po=xn.COLLECTION_DISABLED,Oo=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new C(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Do,this.ssl=ko}else L("settings","non-empty string","host",e.host),this.host=e.host,V("settings","boolean","ssl",e.ssl),this.ssl=I(e.ssl,ko);if(H("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),V("settings","object","credentials",e.credentials),this.credentials=e.credentials,V("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?g("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&g("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=I(e.timestampsInSnapshots,xo),V("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=xn.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Po&&e.cacheSizeBytes<xn.MINIMUM_CACHE_SIZE_BYTES)throw new C(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+xn.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}V("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?Ro:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),Mo=function(){function e(t,n){var r=this;if(this._firebaseApp=null,this._queue=new me,this.INTERNAL={delete:function(){return o.__awaiter(r,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof t.options){var i=t;this._firebaseApp=i,this._databaseId=e.databaseIdFromApp(i),this._persistenceKey=i.name,this._credentials=new ro(n)}else{var s=t;if(!s.projectId)throw new C(S.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new oe(s.projectId,s.database),this._persistenceKey="[DEFAULT]",this._credentials=new no}this._settings=new Oo({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(x("Firestore.settings",arguments,1),O("Firestore.settings","object",1,e),T(e,"persistence"))throw new C(S.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Oo(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new C(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=so(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new C(S.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&g("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=I(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new $i(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=Un.buildStoragePrefix(this.makeDatabaseInfo()),n=new de;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return o.__awaiter(e,void 0,void 0,(function(){var e;return o.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new C(S.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Un.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){return this.ensureClientConfigured(),ao(e)?this.onSnapshotsInSyncInternal(e):(O("Firestore.onSnapshotsInSync","function",1,e),this.onSnapshotsInSyncInternal({next:e}))},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new Xi({next:function(){e.next&&e.next()},error:function(e){throw v("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Yi),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new re(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){b(!!this._settings.host,"FirestoreSettings.host is not set"),b(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Ji(w.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new Co((function(t){if(t instanceof Fo){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new C(S.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new So(e,t._key)}return t}))},e.databaseIdFromApp=function(e){var t=e.options;if(!T(t,"projectId"))throw new C(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new C(S.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new oe(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new C(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return x("Firestore.collection",arguments,1),O("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Ho(ue.fromString(e),this)},e.prototype.doc=function(e){return x("Firestore.doc",arguments,1),O("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Fo.forPath(ue.fromString(e),this)},e.prototype.collectionGroup=function(e){if(x("Firestore.collectionGroup",arguments,1),O("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new C(S.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Bo(new Zn(ue.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return x("Firestore.runTransaction",arguments,1),O("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new Lo(t,n))}))},e.prototype.batch=function(){return this.ensureClientConfigured(),new Vo(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(f()){case d.DEBUG:return"debug";case d.ERROR:return"error";case d.SILENT:return"silent";default:return v("Unknown log level: "+f())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(x("Firestore.setLogLevel",arguments,1),O("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":p(d.DEBUG);break;case"error":p(d.ERROR);break;case"silent":p(d.SILENT);break;default:throw new C(S.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),Lo=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;x("Transaction.get",arguments,1);var n=Qo("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return v("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Gt)return new qo(t._firestore,n._key,null,!1,!1,n._converter);if(r instanceof Ht)return new qo(t._firestore,n._key,r,!1,!1,n._converter);throw v("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},e.prototype.set=function(e,t,n){P("Transaction.set",arguments,2,3);var r=Qo("Transaction.set",e,this._firestore);n=Go("Transaction.set",n);var i=Yo(r._converter,t,"Transaction.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(s,o,n.mergeFields):this._firestore._dataConverter.parseSetData(s,o);return this._transaction.set(r._key,a),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof t||t instanceof Zi?(R("Transaction.update",arguments,3),r=Qo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(x("Transaction.update",arguments,2),r=Qo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){x("Transaction.delete",arguments,1);var t=Qo("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Vo=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){P("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Qo("WriteBatch.set",e,this._firestore);n=Go("WriteBatch.set",n);var i=Yo(r._converter,t,"WriteBatch.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(s,o,n.mergeFields):this._firestore._dataConverter.parseSetData(s,o);return this._mutations=this._mutations.concat(a.toMutations(r._key,bt.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),"string"==typeof t||t instanceof Zi?(R("WriteBatch.update",arguments,3),r=Qo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(x("WriteBatch.update",arguments,2),r=Qo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,bt.exists(!0))),this},e.prototype.delete=function(e){x("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Qo("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new Et(t._key,bt.NONE)),this},e.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new C(S.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Fo=function(){function e(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n,r){if(t.length%2!=0)throw new C(S.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new he(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ho(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(x("DocumentReference.collection",arguments,1),O("DocumentReference.collection","non-empty string",1,e),!e)throw new C(S.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=ue.fromString(e);return new Ho(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)&&this._converter===t._converter},e.prototype.set=function(e,t){P("DocumentReference.set",arguments,1,2),t=Go("DocumentReference.set",t);var n=Yo(this._converter,e,"DocumentReference.set"),r=n[0],i=n[1],o=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,t.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,bt.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof Zi?(R("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(x("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,bt.exists(!0)))},e.prototype.delete=function(){return x("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Et(this._key,bt.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];P("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||ao(e[i])||(H("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),V("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return ao(e[i])?n=e[i]:(O("DocumentReference.onSnapshot","function",i,e[i]),M("DocumentReference.onSnapshot","function",i+1,e[i+1]),M("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Xi({next:function(e){if(t.next){b(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new qo(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(Zn.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return P("DocumentReference.get",arguments,0,1),Ko("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new qo(t.firestore,t._key,e,!0,e instanceof Ht&&e.hasLocalMutations,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new C(S.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new C(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e.prototype.withConverter=function(t){return new e(this._key,this.firestore,t)},e}(),Uo=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),qo=function(){function e(e,t,n,r,i,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}return e.prototype.data=function(e){if(P("DocumentSnapshot.data",arguments,0,1),e=Wo("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new jo(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),At.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},e.prototype.get=function(e,t){if(P("DocumentSnapshot.get",arguments,1,2),t=Wo("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(Io("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,At.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Fo(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new Uo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))&&this._converter===t._converter},e.prototype.toJSObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.toJSValue(i,t)})),r},e.prototype.toJSValue=function(e,t){if(e instanceof jt)return this.toJSObject(e,t);if(e instanceof Bt)return this.toJSArray(e,t);if(e instanceof Ut){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||g("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Fo(n,this._firestore,this._converter)}return e.value(t)},e.prototype.toJSArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.toJSValue(e,t)}))},e}(),jo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return b(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},t}(qo),Bo=function(){function e(e,t,n){this._query=e,this.firestore=t,this._converter=n}return e.prototype.where=function(t,n,r){x("Query.where",arguments,3),z("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];U("Query.where",o,2,n);var s=Io("Query.where",t),a=tr.fromString(n);if(s.isKeyField()){if(a===tr.ARRAY_CONTAINS||a===tr.ARRAY_CONTAINS_ANY)throw new C(S.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===tr.IN){this.validateDisjunctiveFilterElements(r,a);for(var u=[],l=0,c=r;l<c.length;l++){var h=c[l];u.push(this.parseDocumentIdValue(h))}i=new Bt(u)}else i=this.parseDocumentIdValue(r)}else a!==tr.IN&&a!==tr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,a),i=this.firestore._dataConverter.parseQueryValue("Query.where",r,a===tr.IN);var d=nr.create(s,a,i);return this.validateNewFilter(d),new e(this._query.addFilter(d),this.firestore,this._converter)},e.prototype.orderBy=function(t,n){var r;if(P("Query.orderBy",arguments,1,2),M("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=ur.ASCENDING;else{if("desc"!==n)throw new C(S.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=ur.DESCENDING}if(null!==this._query.startAt)throw new C(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new C(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=Io("Query.orderBy",t),o=new cr(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore,this._converter)},e.prototype.limit=function(t){return x("Query.limit",arguments,1),O("Query.limit","number",1,t),W("Query.limit",1,t),new e(this._query.withLimitToFirst(t),this.firestore,this._converter)},e.prototype.limitToLast=function(t){return x("Query.limitToLast",arguments,1),O("Query.limitToLast","number",1,t),W("Query.limitToLast",1,t),new e(this._query.withLimitToLast(t),this.firestore,this._converter)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.withConverter=function(t){return new e(this._query,this.firestore,t)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(z(e,1,t),t instanceof qo){if(n.length>0)throw new C(S.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new C(S.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new Ut(this.firestore._databaseId,t.key));else{var a=t.field(s.field);if(a instanceof Vt)throw new C(S.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.canonicalString();throw new C(S.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new lr(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new C(S.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var s=t[o];if(r[o].field.isKeyField()){if("string"!=typeof s)throw new C(S.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof s);if(!this._query.isCollectionGroupQuery()&&-1!==s.indexOf("/"))throw new C(S.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this._query.path.child(ue.fromString(s));if(!he.isDocumentKey(a))throw new C(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new he(a);i.push(new Ut(this.firestore._databaseId,u))}else{var l=this.firestore._dataConverter.parseQueryValue(e,s);i.push(l)}}return new lr(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];P("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||ao(e[i])||(H("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),V("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),ao(e[i])?n=e[i]:(O("Query.onSnapshot","function",i,e[i]),M("Query.onSnapshot","function",i+1,e[i+1]),M("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Xi({next:function(e){t.next&&t.next(new zo(n.firestore,n._query,e,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(s)}},e.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new C(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},e.prototype.get=function(e){var t=this;return P("Query.get",arguments,0,1),Ko("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new zo(t.firestore,t._query,e,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new C(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new C(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new C(S.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(ue.fromString(e));if(!he.isDocumentKey(t))throw new C(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Ut(this.firestore._databaseId,new he(t))}if(e instanceof Fo)return new Ut(this.firestore._databaseId,e._key);throw new C(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+B(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new C(S.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new C(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new C(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter((function(e){return Number.isNaN(e)})).length>0)throw new C(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof nr){var t=[tr.ARRAY_CONTAINS,tr.ARRAY_CONTAINS_ANY],n=[tr.IN,tr.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new C(S.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var s=this._query.getFirstOrderByField();null!==s&&this.validateOrderByAndInequalityMatch(e.field,s)}else if(i||r){var a=null;if(i&&(a=this._query.findFilterOperator(n)),null===a&&r&&(a=this._query.findFilterOperator(t)),null!=a)throw new C(S.INVALID_ARGUMENT,a===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new C(S.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),zo=function(){function e(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Uo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;P("QuerySnapshot.forEach",arguments,1,2),O("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new Bo(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(H("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),V("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new C(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(t){var s=new jo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r);return b(t.type===zr.Added,"Invalid event type for first snapshot"),b(!i||n.query.docComparator(i,t.doc)<0,"Got added events in wrong order"),i=t.doc,{type:"added",doc:s,oldIndex:-1,newIndex:o++}}))}var s=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==zr.Metadata})).map((function(t){var i=new jo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r),o=-1,a=-1;return t.type!==zr.Added&&(b((o=s.indexOf(t.doc.key))>=0,"Index for document not found"),s=s.delete(t.doc.key)),t.type!==zr.Removed&&(a=(s=s.add(t.doc)).indexOf(t.doc.key)),{type:$o(t.type),doc:i,oldIndex:o,newIndex:a}}))}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)&&this._converter===t._converter},e.prototype.convertToDocumentImpl=function(e){return new jo(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},e}();o.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(zo.prototype.docChanges,e,{get:function(){return function(){throw new C(S.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var Ho=function(e){function t(t,n,r){var i=e.call(this,Zn.atPath(t),n,r)||this;if(i._path=t,t.length%2!=1)throw new C(S.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return i}return o.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Fo(new he(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(P("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=$.newId()),O("CollectionReference.doc","non-empty string",1,e),""===e)throw new C(S.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=ue.fromString(e);return Fo.forPath(this._query.path.child(t),this.firestore,this._converter)},t.prototype.add=function(e){x("CollectionReference.add",arguments,1),O("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then((function(){return t}))},t.prototype.withConverter=function(e){return new t(this._path,this.firestore,e)},t}(Bo);function Go(e,t){if(void 0===t)return{merge:!1};if(H(e,t,["merge","mergeFields"]),V(e,"boolean","merge",t.merge),"mergeFields","a string or a FieldPath",void 0!==(n=t.mergeFields)&&function(e,t,n,r,i){if(!(r instanceof Array))throw new C(S.INVALID_ARGUMENT,"Function "+e+"() requires its mergeFields option to be an array, but it was: "+B(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new C(S.INVALID_ARGUMENT,"Function "+e+"() requires all mergeFields elements to be a string or a FieldPath, but the value at index "+o+" was: "+B(r[o]))}(e,0,0,n,(function(e){return"string"==typeof e||e instanceof Zi})),void 0!==t.mergeFields&&void 0!==t.merge)throw new C(S.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');var n;return t}function Wo(e,t){return void 0===t?{}:(H(e,t,["serverTimestamps"]),F(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Ko(e,t){M(e,"object",1,t),t&&(H(e,t,["source"]),F(e,0,"source",t.source,["default","server","cache"]))}function Qo(e,t,n){if(t instanceof Fo){if(t.firestore!==n)throw new C(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw G(e,"DocumentReference",1,t)}function $o(e){switch(e){case zr.Added:return"added";case zr.Modified:case zr.Metadata:return"modified";case zr.Removed:return"removed";default:return v("Unknown change type: "+e)}}function Yo(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var Jo=E(Mo,"Use firebase.firestore() instead."),Xo=E(Lo,"Use firebase.firestore().runTransaction() instead."),Zo=E(Vo,"Use firebase.firestore().batch() instead."),es=E(Fo,"Use firebase.firestore().doc() instead."),ts=E(qo),ns=E(jo),rs=E(Bo),is=E(zo),os=E(Ho,"Use firebase.firestore().collection() instead."),ss={Firestore:Jo,GeoPoint:oi,Timestamp:Ee,Blob:ne,Transaction:Xo,WriteBatch:Zo,DocumentReference:es,DocumentSnapshot:ts,Query:rs,QueryDocumentSnapshot:ns,QuerySnapshot:is,CollectionReference:os,FieldPath:Zi,FieldValue:mo,setLogLevel:Mo.setLogLevel,CACHE_SIZE_UNLIMITED:Po},as=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),us=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){m("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},e.prototype.onNetworkUnavailable=function(){m("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},e.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),ls=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){b(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){b(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){b(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){b(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){b(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){b(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),cs="Connection",hs=function(){return{BatchGetDocuments:"batchGet",Commit:"commit"}}(),ds="gl-js/ fire/"+c,fs=function(){function e(e){this.databaseId=e.databaseId,this.baseUrl=(e.ssl?"https":"http")+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=ds},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(s,a){var u=new l.XhrIo;u.listenOnce(l.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var t=u.getResponseJson();m(cs,"XHR received:",JSON.stringify(t)),s(t);break;case l.ErrorCode.TIMEOUT:m(cs,'RPC "'+e+'" timed out'),a(new C(S.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(m(cs,'RPC "'+e+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=(o=r.status.toLowerCase().replace("_","-"),Object.values(S).indexOf(o)>=0?o:S.UNKNOWN);a(new C(i,r.message))}else a(new C(S.UNKNOWN,"Server responded with status "+u.getStatus()))}else m(cs,'RPC "'+e+'" failed'),a(new C(S.UNAVAILABLE,"Connection failed."));break;default:v('RPC "'+e+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{m(cs,'RPC "'+e+'" completed.')}var o}));var c=o.__assign({},t);delete c.database;var h=JSON.stringify(c);m(cs,"XHR sending: ",i+" "+h);var d={"Content-Type":"text/plain"};r.modifyHeadersForRequest(d,n),u.send(i,"POST",h,d,15)}))},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=l.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),a.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");m(cs,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,h=new ls({sendFn:function(e){c?m(cs,"Not sending because WebChannel is closed:",e):(u||(m(cs,"Opening WebChannel transport."),s.open(),u=!0),m(cs,"WebChannel sending:",e),s.send(e))},closeFn:function(){return s.close()}}),d=function(e,t){s.listen(e,(function(e){try{t(e)}catch(n){setTimeout((function(){throw n}),0)}}))};return d(l.WebChannel.EventType.OPEN,(function(){c||m(cs,"WebChannel transport opened.")})),d(l.WebChannel.EventType.CLOSE,(function(){c||(c=!0,m(cs,"WebChannel transport closed"),h.callOnClose())})),d(l.WebChannel.EventType.ERROR,(function(e){c||(c=!0,m(cs,"WebChannel transport errored:",e),h.callOnClose(new C(S.UNAVAILABLE,"The operation could not be completed")))})),d(l.WebChannel.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];b(!!n,"Got a webchannel message without data.");var r=n.error||(null===(t=n[0])||void 0===t?void 0:t.error);if(r){m(cs,"WebChannel received error:",r);var i=r.status,o=function(e){var t=Fr[e];if(void 0!==t)return qr(t)}(i),a=r.message;void 0===o&&(o=S.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,h.callOnClose(new C(o,a)),s.close()}else m(cs,"WebChannel received:",n),h.callOnMessage(n)}})),setTimeout((function(){h.callOnOpen()}),0),h},e.prototype.makeUrl=function(e){var t=hs[e];return b(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},e}();w.setPlatform(new(function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new fs(e))},e.prototype.newConnectivityMonitor=function(){return us.isAvailable()?new us:new as},e.prototype.newSerializer=function(e){return new bi(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}()));var ps="@firebase/firestore",ms="1.9.1";function gs(e){(function(e){e.INTERNAL.registerComponent(new u.Component("firestore",(function(e){var t=e.getProvider("app").getImmediate();return new Mo(t,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(e){b(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(ss)))})(e),e.registerVersion(ps,ms)}gs(i),t.registerFirestore=gs},"S+S0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("mrSG"),i=n("zVF4"),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e="[DEFAULT]");var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=r.__assign({identifier:"[DEFAULT]",optional:!1},e),n=t.optional,i=this.normalizeInstanceIdentifier(t.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService("[DEFAULT]")}catch(c){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var l=this.getOrInitializeService(u);a.resolve(l)}catch(c){}}}catch(h){t={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return"[DEFAULT]"===e?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e},e}(),a=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=a,t.Provider=s},Wcq6:function(e,t,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.6.1","app"),e.exports=i},mrSG:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return l})),n.d(t,"__awaiter",(function(){return c})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return g})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return w})),n.d(t,"__makeTemplateObject",(function(){return _})),n.d(t,"__importStar",(function(){return S})),n.d(t,"__importDefault",(function(){return C}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function u(e){a("next",e)}function l(e){a("throw",e)}function c(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}},o76x:function(e){e.exports=JSON.parse('[{"id":1,"ECTS":8,"name":"Sanicula kauaiensis H. St. John","imgPath":"http://dummyimage.com/158x185.bmp/ff4444/ffffff","description":"Vestibulum quam sapien, varius ut, blandit non, interdum in, ante. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis faucibus accumsan odio. Curabitur convallis.\\n\\nDuis consequat dui nec nisi volutpat eleifend. Donec ut dolor. Morbi vel lectus in quam fringilla rhoncus.\\n\\nMauris enim leo, rhoncus sed, vestibulum sit amet, cursus id, turpis. Integer aliquet, massa id lobortis convallis, tortor risus dapibus augue, vel accumsan tellus nisi eu orci. Mauris lacinia sapien quis libero.","rating":4.99,"seats":180,"semester":5,"type":0},{"id":2,"ECTS":4,"name":"Astragalus leptaleus A. Gray","imgPath":"http://dummyimage.com/133x103.jpg/dddddd/000000","description":"Maecenas tristique, est et tempus semper, est quam pharetra magna, ac consequat metus sapien ut nunc. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris viverra diam vitae quam. Suspendisse potenti.","rating":3.4,"seats":220,"semester":2,"type":2},{"id":3,"ECTS":2,"name":"Amorpha L.","imgPath":"http://dummyimage.com/227x208.jpg/5fa2dd/ffffff","description":"In hac habitasse platea dictumst. Morbi vestibulum, velit id pretium iaculis, diam erat fermentum justo, nec condimentum neque sapien placerat ante. Nulla justo.\\n\\nAliquam quis turpis eget elit sodales scelerisque. Mauris sit amet eros. Suspendisse accumsan tortor quis turpis.\\n\\nSed ante. Vivamus tortor. Duis mattis egestas metus.","rating":4.05,"seats":230,"semester":2,"type":2},{"id":4,"ECTS":7,"name":"Lathyrus polymorphus Nutt. ssp. polymorphus","imgPath":"http://dummyimage.com/142x112.png/dddddd/000000","description":"Phasellus in felis. Donec semper sapien a libero. Nam dui.","rating":2.88,"seats":250,"semester":4,"type":2},{"id":5,"ECTS":7,"name":"Crotalaria juncea L.","imgPath":"http://dummyimage.com/189x199.png/5fa2dd/ffffff","description":"Mauris enim leo, rhoncus sed, vestibulum sit amet, cursus id, turpis. Integer aliquet, massa id lobortis convallis, tortor risus dapibus augue, vel accumsan tellus nisi eu orci. Mauris lacinia sapien quis libero.\\n\\nNullam sit amet turpis elementum ligula vehicula consequat. Morbi a ipsum. Integer a nibh.\\n\\nIn quis justo. Maecenas rhoncus aliquam lacus. Morbi quis tortor id nulla ultrices aliquet.","rating":2.69,"seats":140,"semester":7,"type":1},{"id":6,"ECTS":7,"name":"Caloplaca cerina (Ehrh. ex Hedwig) Th. Fr.","imgPath":"http://dummyimage.com/126x182.png/5fa2dd/ffffff","description":"Proin leo odio, porttitor id, consequat in, consequat ut, nulla. Sed accumsan felis. Ut at dolor quis odio consequat varius.\\n\\nInteger ac leo. Pellentesque ultrices mattis odio. Donec vitae nisi.\\n\\nNam ultrices, libero non mattis pulvinar, nulla pede ullamcorper augue, a suscipit nulla elit ac nulla. Sed vel enim sit amet nunc viverra dapibus. Nulla suscipit ligula in lacus.","rating":1.6,"seats":70,"semester":1,"type":2},{"id":7,"ECTS":6,"name":"Viguiera triloba (A. Gray) J. Olsen","imgPath":"http://dummyimage.com/248x118.bmp/cc0000/ffffff","description":"Nulla ut erat id mauris vulputate elementum. Nullam varius. Nulla facilisi.\\n\\nCras non velit nec nisi vulputate nonummy. Maecenas tincidunt lacus at velit. Vivamus vel nulla eget eros elementum pellentesque.","rating":2.69,"seats":190,"semester":6,"type":3},{"id":8,"ECTS":3,"name":"Arctostaphylos viscida Parry ssp. viscida","imgPath":"http://dummyimage.com/108x168.png/5fa2dd/ffffff","description":"Pellentesque at nulla. Suspendisse potenti. Cras in purus eu magna vulputate luctus.","rating":1.96,"seats":160,"semester":7,"type":2},{"id":9,"ECTS":8,"name":"Sedum spathulifolium Hook.","imgPath":"http://dummyimage.com/154x173.bmp/ff4444/ffffff","description":"In sagittis dui vel nisl. Duis ac nibh. Fusce lacus purus, aliquet at, feugiat non, pretium quis, lectus.\\n\\nSuspendisse potenti. In eleifend quam a odio. In hac habitasse platea dictumst.","rating":4.51,"seats":70,"semester":6,"type":0},{"id":10,"ECTS":7,"name":"Alchorneopsis portoricensis Urb.","imgPath":"http://dummyimage.com/196x187.bmp/dddddd/000000","description":"Proin eu mi. Nulla ac enim. In tempor, turpis nec euismod scelerisque, quam turpis adipiscing lorem, vitae mattis nibh ligula nec sem.\\n\\nDuis aliquam convallis nunc. Proin at turpis a pede posuere nonummy. Integer non velit.\\n\\nDonec diam neque, vestibulum eget, vulputate ut, ultrices vel, augue. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec pharetra, magna vestibulum aliquet ultrices, erat tortor sollicitudin mi, sit amet lobortis sapien sapien non mi. Integer ac neque.","rating":2.27,"seats":190,"semester":6,"type":2},{"id":11,"ECTS":3,"name":"Flacourtia inermis Roxb.","imgPath":"http://dummyimage.com/206x194.jpg/ff4444/ffffff","description":"Etiam vel augue. Vestibulum rutrum rutrum neque. Aenean auctor gravida sem.","rating":4.94,"seats":150,"semester":5,"type":0},{"id":12,"ECTS":3,"name":"Salix planifolia Pursh ssp. planifolia","imgPath":"http://dummyimage.com/245x167.png/5fa2dd/ffffff","description":"Integer tincidunt ante vel ipsum. Praesent blandit lacinia erat. Vestibulum sed magna at nunc commodo placerat.\\n\\nPraesent blandit. Nam nulla. Integer pede justo, lacinia eget, tincidunt eget, tempus vel, pede.","rating":4.66,"seats":120,"semester":5,"type":0},{"id":13,"ECTS":8,"name":"Doellingeria umbellata (Mill.) Nees var. umbellata","imgPath":"http://dummyimage.com/166x136.png/dddddd/000000","description":"Sed sagittis. Nam congue, risus semper porta volutpat, quam pede lobortis ligula, sit amet eleifend pede libero quis orci. Nullam molestie nibh in lectus.\\n\\nPellentesque at nulla. Suspendisse potenti. Cras in purus eu magna vulputate luctus.","rating":3.19,"seats":70,"semester":6,"type":1},{"id":14,"ECTS":8,"name":"Malacothrix incana (Nutt.) Torr. & A. Gray","imgPath":"http://dummyimage.com/192x196.png/dddddd/000000","description":"Duis consequat dui nec nisi volutpat eleifend. Donec ut dolor. Morbi vel lectus in quam fringilla rhoncus.\\n\\nMauris enim leo, rhoncus sed, vestibulum sit amet, cursus id, turpis. Integer aliquet, massa id lobortis convallis, tortor risus dapibus augue, vel accumsan tellus nisi eu orci. Mauris lacinia sapien quis libero.","rating":3.99,"seats":130,"semester":4,"type":3},{"id":15,"ECTS":4,"name":"Draba burkei (C.L. Hitchc.) Windham & Beilstein","imgPath":"http://dummyimage.com/227x220.png/5fa2dd/ffffff","description":"Maecenas tristique, est et tempus semper, est quam pharetra magna, ac consequat metus sapien ut nunc. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris viverra diam vitae quam. Suspendisse potenti.\\n\\nNullam porttitor lacus at turpis. Donec posuere metus vitae ipsum. Aliquam non mauris.\\n\\nMorbi non lectus. Aliquam sit amet diam in magna bibendum imperdiet. Nullam orci pede, venenatis non, sodales sed, tincidunt eu, felis.","rating":1.3,"seats":130,"semester":7,"type":3},{"id":16,"ECTS":6,"name":"Ageratina rothrockii (A. Gray) R.M. King & H. Rob.","imgPath":"http://dummyimage.com/160x238.jpg/dddddd/000000","description":"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Proin risus. Praesent lectus.\\n\\nVestibulum quam sapien, varius ut, blandit non, interdum in, ante. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis faucibus accumsan odio. Curabitur convallis.\\n\\nDuis consequat dui nec nisi volutpat eleifend. Donec ut dolor. Morbi vel lectus in quam fringilla rhoncus.","rating":2.68,"seats":220,"semester":6,"type":1},{"id":17,"ECTS":3,"name":"Dasylirion Zucc.","imgPath":"http://dummyimage.com/135x178.bmp/dddddd/000000","description":"Fusce posuere felis sed lacus. Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl. Nunc rhoncus dui vel sem.","rating":4.36,"seats":50,"semester":6,"type":2},{"id":18,"ECTS":4,"name":"Geranium viscosissimum Fisch. & C.A. Mey. ex C.A. Mey. var. viscosissimum","imgPath":"http://dummyimage.com/116x168.png/cc0000/ffffff","description":"Nulla ut erat id mauris vulputate elementum. Nullam varius. Nulla facilisi.","rating":3.46,"seats":70,"semester":6,"type":3},{"id":19,"ECTS":3,"name":"Alchemilla wichurae (Buser) Stefansson","imgPath":"http://dummyimage.com/240x118.jpg/ff4444/ffffff","description":"Praesent blandit. Nam nulla. Integer pede justo, lacinia eget, tincidunt eget, tempus vel, pede.\\n\\nMorbi porttitor lorem id ligula. Suspendisse ornare consequat lectus. In est risus, auctor sed, tristique in, tempus sit amet, sem.","rating":4.19,"seats":230,"semester":3,"type":3},{"id":20,"ECTS":2,"name":"Malacothrix saxatilis (Nutt.) Torr. & A. Gray var. commutata (Torr. & A. Gray) Ferris","imgPath":"http://dummyimage.com/146x250.png/ff4444/ffffff","description":"Aliquam quis turpis eget elit sodales scelerisque. Mauris sit amet eros. Suspendisse accumsan tortor quis turpis.\\n\\nSed ante. Vivamus tortor. Duis mattis egestas metus.","rating":3.58,"seats":100,"semester":5,"type":3},{"id":21,"ECTS":7,"name":"Tortula obtusissima (M\xfcll. Hal.) Mitt.","imgPath":"http://dummyimage.com/202x113.jpg/5fa2dd/ffffff","description":"Maecenas tristique, est et tempus semper, est quam pharetra magna, ac consequat metus sapien ut nunc. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris viverra diam vitae quam. Suspendisse potenti.","rating":2.17,"seats":180,"semester":2,"type":3},{"id":22,"ECTS":2,"name":"Crotalaria longirostrata Hook. & Arn.","imgPath":"http://dummyimage.com/108x122.png/cc0000/ffffff","description":"Vestibulum ac est lacinia nisi venenatis tristique. Fusce congue, diam id ornare imperdiet, sapien urna pretium nisl, ut volutpat sapien arcu sed augue. Aliquam erat volutpat.\\n\\nIn congue. Etiam justo. Etiam pretium iaculis justo.","rating":3.72,"seats":70,"semester":1,"type":1},{"id":23,"ECTS":4,"name":"Thelesperma filifolium (Hook.) A. Gray var. intermedium (Rydb.) Shinners","imgPath":"http://dummyimage.com/158x188.bmp/5fa2dd/ffffff","description":"Duis bibendum. Morbi non quam nec dui luctus rutrum. Nulla tellus.\\n\\nIn sagittis dui vel nisl. Duis ac nibh. Fusce lacus purus, aliquet at, feugiat non, pretium quis, lectus.\\n\\nSuspendisse potenti. In eleifend quam a odio. In hac habitasse platea dictumst.","rating":3.8,"seats":130,"semester":7,"type":2},{"id":24,"ECTS":8,"name":"Arracacia xanthorrhiza E.N. Bancroft","imgPath":"http://dummyimage.com/105x228.jpg/cc0000/ffffff","description":"Aenean fermentum. Donec ut mauris eget massa tempor convallis. Nulla neque libero, convallis eget, eleifend luctus, ultricies eu, nibh.\\n\\nQuisque id justo sit amet sapien dignissim vestibulum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nulla dapibus dolor vel est. Donec odio justo, sollicitudin ut, suscipit a, feugiat et, eros.","rating":1.07,"seats":220,"semester":7,"type":0},{"id":25,"ECTS":2,"name":"Ceanothus \xd7flexilis Greene ex McMinn","imgPath":"http://dummyimage.com/120x131.bmp/5fa2dd/ffffff","description":"Sed ante. Vivamus tortor. Duis mattis egestas metus.\\n\\nAenean fermentum. Donec ut mauris eget massa tempor convallis. Nulla neque libero, convallis eget, eleifend luctus, ultricies eu, nibh.","rating":3.11,"seats":110,"semester":7,"type":1},{"id":26,"ECTS":6,"name":"Dalbergia candenatensis (Dennst.) Prain","imgPath":"http://dummyimage.com/225x167.bmp/ff4444/ffffff","description":"Phasellus in felis. Donec semper sapien a libero. Nam dui.\\n\\nProin leo odio, porttitor id, consequat in, consequat ut, nulla. Sed accumsan felis. Ut at dolor quis odio consequat varius.\\n\\nInteger ac leo. Pellentesque ultrices mattis odio. Donec vitae nisi.","rating":2.02,"seats":190,"semester":6,"type":0},{"id":27,"ECTS":3,"name":"Paspalum maritimum Trin.","imgPath":"http://dummyimage.com/153x238.png/dddddd/000000","description":"Duis aliquam convallis nunc. Proin at turpis a pede posuere nonummy. Integer non velit.","rating":4.05,"seats":210,"semester":5,"type":0},{"id":28,"ECTS":5,"name":"Delissea fallax Hillebr.","imgPath":"http://dummyimage.com/126x149.jpg/dddddd/000000","description":"Proin leo odio, porttitor id, consequat in, consequat ut, nulla. Sed accumsan felis. Ut at dolor quis odio consequat varius.\\n\\nInteger ac leo. Pellentesque ultrices mattis odio. Donec vitae nisi.\\n\\nNam ultrices, libero non mattis pulvinar, nulla pede ullamcorper augue, a suscipit nulla elit ac nulla. Sed vel enim sit amet nunc viverra dapibus. Nulla suscipit ligula in lacus.","rating":4.1,"seats":110,"semester":6,"type":1},{"id":29,"ECTS":4,"name":"Vaccinium ovatum Pursh","imgPath":"http://dummyimage.com/130x124.jpg/ff4444/ffffff","description":"Curabitur in libero ut massa volutpat convallis. Morbi odio odio, elementum eu, interdum eu, tincidunt in, leo. Maecenas pulvinar lobortis est.\\n\\nPhasellus sit amet erat. Nulla tempus. Vivamus in felis eu sapien cursus vestibulum.\\n\\nProin eu mi. Nulla ac enim. In tempor, turpis nec euismod scelerisque, quam turpis adipiscing lorem, vitae mattis nibh ligula nec sem.","rating":3.22,"seats":160,"semester":1,"type":3},{"id":30,"ECTS":5,"name":"Rhodanthe chlorocephala (Turcz.) P. Wilson ssp. rosea (Hook.) P. Wilson","imgPath":"http://dummyimage.com/224x141.jpg/ff4444/ffffff","description":"In congue. Etiam justo. Etiam pretium iaculis justo.\\n\\nIn hac habitasse platea dictumst. Etiam faucibus cursus urna. Ut tellus.","rating":2.27,"seats":170,"semester":2,"type":3},{"id":31,"ECTS":6,"name":"Holodiscus discolor (Pursh) Maxim.","imgPath":"http://dummyimage.com/161x119.bmp/5fa2dd/ffffff","description":"Cras non velit nec nisi vulputate nonummy. Maecenas tincidunt lacus at velit. Vivamus vel nulla eget eros elementum pellentesque.\\n\\nQuisque porta volutpat erat. Quisque erat eros, viverra eget, congue eget, semper rutrum, nulla. Nunc purus.","rating":3.75,"seats":100,"semester":7,"type":0},{"id":32,"ECTS":4,"name":"Festuca rubra L. ssp. vallicola (Rydb.) Pavlick","imgPath":"http://dummyimage.com/199x215.jpg/dddddd/000000","description":"Quisque porta volutpat erat. Quisque erat eros, viverra eget, congue eget, semper rutrum, nulla. Nunc purus.","rating":3.75,"seats":210,"semester":4,"type":0},{"id":33,"ECTS":2,"name":"Shepherdia rotundifolia Parry","imgPath":"http://dummyimage.com/145x178.jpg/cc0000/ffffff","description":"Quisque id justo sit amet sapien dignissim vestibulum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nulla dapibus dolor vel est. Donec odio justo, sollicitudin ut, suscipit a, feugiat et, eros.\\n\\nVestibulum ac est lacinia nisi venenatis tristique. Fusce congue, diam id ornare imperdiet, sapien urna pretium nisl, ut volutpat sapien arcu sed augue. Aliquam erat volutpat.\\n\\nIn congue. Etiam justo. Etiam pretium iaculis justo.","rating":4.91,"seats":80,"semester":1,"type":1},{"id":34,"ECTS":6,"name":"Sidalcea malviflora (DC.) A. Gray ex Benth. ssp. malviflora","imgPath":"http://dummyimage.com/239x148.bmp/dddddd/000000","description":"Suspendisse potenti. In eleifend quam a odio. In hac habitasse platea dictumst.\\n\\nMaecenas ut massa quis augue luctus tincidunt. Nulla mollis molestie lorem. Quisque ut erat.\\n\\nCurabitur gravida nisi at nibh. In hac habitasse platea dictumst. Aliquam augue quam, sollicitudin vitae, consectetuer eget, rutrum at, lorem.","rating":4.05,"seats":110,"semester":1,"type":3},{"id":35,"ECTS":4,"name":"Lespedeza formosa (Vogel) Koehne","imgPath":"http://dummyimage.com/138x216.png/cc0000/ffffff","description":"Etiam vel augue. Vestibulum rutrum rutrum neque. Aenean auctor gravida sem.","rating":4.22,"seats":180,"semester":6,"type":1},{"id":36,"ECTS":6,"name":"Hygroamblystegium tenax (Hedw.) Jenn.","imgPath":"http://dummyimage.com/211x207.bmp/ff4444/ffffff","description":"Sed sagittis. Nam congue, risus semper porta volutpat, quam pede lobortis ligula, sit amet eleifend pede libero quis orci. Nullam molestie nibh in lectus.\\n\\nPellentesque at nulla. Suspendisse potenti. Cras in purus eu magna vulputate luctus.","rating":1.65,"seats":140,"semester":6,"type":3},{"id":37,"ECTS":4,"name":"Alchorneopsis floribunda (Benth.) M\xfcll. Arg.","imgPath":"http://dummyimage.com/124x112.bmp/ff4444/ffffff","description":"Morbi non lectus. Aliquam sit amet diam in magna bibendum imperdiet. Nullam orci pede, venenatis non, sodales sed, tincidunt eu, felis.\\n\\nFusce posuere felis sed lacus. Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl. Nunc rhoncus dui vel sem.\\n\\nSed sagittis. Nam congue, risus semper porta volutpat, quam pede lobortis ligula, sit amet eleifend pede libero quis orci. Nullam molestie nibh in lectus.","rating":1.01,"seats":90,"semester":4,"type":2},{"id":38,"ECTS":6,"name":"Erigeron zothecinus S.L. Welsh","imgPath":"http://dummyimage.com/182x153.bmp/dddddd/000000","description":"Sed sagittis. Nam congue, risus semper porta volutpat, quam pede lobortis ligula, sit amet eleifend pede libero quis orci. Nullam molestie nibh in lectus.\\n\\nPellentesque at nulla. Suspendisse potenti. Cras in purus eu magna vulputate luctus.\\n\\nCum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus vestibulum sagittis sapien. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.","rating":3.81,"seats":130,"semester":2,"type":0},{"id":39,"ECTS":3,"name":"Bruchia brevifolia Sull.","imgPath":"http://dummyimage.com/222x119.jpg/5fa2dd/ffffff","description":"Proin eu mi. Nulla ac enim. In tempor, turpis nec euismod scelerisque, quam turpis adipiscing lorem, vitae mattis nibh ligula nec sem.","rating":1,"seats":240,"semester":6,"type":2},{"id":40,"ECTS":5,"name":"Racomitrium varium (Mitt.) A. Jaeger","imgPath":"http://dummyimage.com/100x116.bmp/5fa2dd/ffffff","description":"In hac habitasse platea dictumst. Etiam faucibus cursus urna. Ut tellus.","rating":3.44,"seats":150,"semester":2,"type":0},{"id":41,"ECTS":8,"name":"Rumex confertus Willd.","imgPath":"http://dummyimage.com/246x168.bmp/dddddd/000000","description":"Vestibulum quam sapien, varius ut, blandit non, interdum in, ante. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis faucibus accumsan odio. Curabitur convallis.\\n\\nDuis consequat dui nec nisi volutpat eleifend. Donec ut dolor. Morbi vel lectus in quam fringilla rhoncus.\\n\\nMauris enim leo, rhoncus sed, vestibulum sit amet, cursus id, turpis. Integer aliquet, massa id lobortis convallis, tortor risus dapibus augue, vel accumsan tellus nisi eu orci. Mauris lacinia sapien quis libero.","rating":3.85,"seats":200,"semester":4,"type":1},{"id":42,"ECTS":2,"name":"Peperomia distachya (L.) A. Dietr.","imgPath":"http://dummyimage.com/134x124.bmp/ff4444/ffffff","description":"Maecenas leo odio, condimentum id, luctus nec, molestie sed, justo. Pellentesque viverra pede ac diam. Cras pellentesque volutpat dui.","rating":2.99,"seats":240,"semester":6,"type":3},{"id":43,"ECTS":3,"name":"Arabis davidsonii Greene","imgPath":"http://dummyimage.com/100x215.jpg/ff4444/ffffff","description":"In congue. Etiam justo. Etiam pretium iaculis justo.\\n\\nIn hac habitasse platea dictumst. Etiam faucibus cursus urna. Ut tellus.","rating":4.73,"seats":130,"semester":7,"type":2},{"id":44,"ECTS":5,"name":"Anthoceros fusiformis Austin","imgPath":"http://dummyimage.com/142x185.bmp/ff4444/ffffff","description":"Vestibulum ac est lacinia nisi venenatis tristique. Fusce congue, diam id ornare imperdiet, sapien urna pretium nisl, ut volutpat sapien arcu sed augue. Aliquam erat volutpat.\\n\\nIn congue. Etiam justo. Etiam pretium iaculis justo.\\n\\nIn hac habitasse platea dictumst. Etiam faucibus cursus urna. Ut tellus.","rating":2.81,"seats":150,"semester":3,"type":3},{"id":45,"ECTS":2,"name":"Phoradendron pauciflorum Torr.","imgPath":"http://dummyimage.com/202x223.png/ff4444/ffffff","description":"Praesent blandit. Nam nulla. Integer pede justo, lacinia eget, tincidunt eget, tempus vel, pede.\\n\\nMorbi porttitor lorem id ligula. Suspendisse ornare consequat lectus. In est risus, auctor sed, tristique in, tempus sit amet, sem.\\n\\nFusce consequat. Nulla nisl. Nunc nisl.","rating":4.83,"seats":110,"semester":5,"type":3},{"id":46,"ECTS":5,"name":"Eleocharis albida Torr.","imgPath":"http://dummyimage.com/154x243.png/cc0000/ffffff","description":"In hac habitasse platea dictumst. Morbi vestibulum, velit id pretium iaculis, diam erat fermentum justo, nec condimentum neque sapien placerat ante. Nulla justo.\\n\\nAliquam quis turpis eget elit sodales scelerisque. Mauris sit amet eros. Suspendisse accumsan tortor quis turpis.\\n\\nSed ante. Vivamus tortor. Duis mattis egestas metus.","rating":3.35,"seats":220,"semester":5,"type":0},{"id":47,"ECTS":2,"name":"Leymus racemosus (Lam.) Tzvelev ssp. sabulosus (M. Bieb.) Tzvelev [excluded]","imgPath":"http://dummyimage.com/217x103.bmp/cc0000/ffffff","description":"Phasellus sit amet erat. Nulla tempus. Vivamus in felis eu sapien cursus vestibulum.\\n\\nProin eu mi. Nulla ac enim. In tempor, turpis nec euismod scelerisque, quam turpis adipiscing lorem, vitae mattis nibh ligula nec sem.\\n\\nDuis aliquam convallis nunc. Proin at turpis a pede posuere nonummy. Integer non velit.","rating":1.64,"seats":70,"semester":3,"type":3},{"id":48,"ECTS":8,"name":"Combretum paniculatum Vent.","imgPath":"http://dummyimage.com/185x233.bmp/cc0000/ffffff","description":"Nullam sit amet turpis elementum ligula vehicula consequat. Morbi a ipsum. Integer a nibh.","rating":4.38,"seats":120,"semester":1,"type":1},{"id":49,"ECTS":8,"name":"Clermontia pallida Hillebr.","imgPath":"http://dummyimage.com/248x204.bmp/dddddd/000000","description":"Nullam porttitor lacus at turpis. Donec posuere metus vitae ipsum. Aliquam non mauris.\\n\\nMorbi non lectus. Aliquam sit amet diam in magna bibendum imperdiet. Nullam orci pede, venenatis non, sodales sed, tincidunt eu, felis.","rating":2.93,"seats":140,"semester":3,"type":2},{"id":50,"ECTS":7,"name":"Lysimachia lamiatilis H. St. John","imgPath":"http://dummyimage.com/177x217.bmp/ff4444/ffffff","description":"Cras mi pede, malesuada in, imperdiet et, commodo vulputate, justo. In blandit ultrices enim. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.","rating":2.1,"seats":140,"semester":1,"type":0},{"id":51,"ECTS":7,"name":"Psorotichia schaereri (A. Massal.) Arnold","imgPath":"http://dummyimage.com/198x198.png/cc0000/ffffff","description":"Aenean lectus. Pellentesque eget nunc. Donec quis orci eget orci vehicula condimentum.\\n\\nCurabitur in libero ut massa volutpat convallis. Morbi odio odio, elementum eu, interdum eu, tincidunt in, leo. Maecenas pulvinar lobortis est.\\n\\nPhasellus sit amet erat. Nulla tempus. Vivamus in felis eu sapien cursus vestibulum.","rating":1.97,"seats":70,"semester":5,"type":1},{"id":52,"ECTS":2,"name":"Neomacounia nitida (Lindb.) Irel.","imgPath":"http://dummyimage.com/109x196.jpg/5fa2dd/ffffff","description":"Morbi porttitor lorem id ligula. Suspendisse ornare consequat lectus. In est risus, auctor sed, tristique in, tempus sit amet, sem.\\n\\nFusce consequat. Nulla nisl. Nunc nisl.","rating":3.33,"seats":210,"semester":1,"type":1},{"id":53,"ECTS":8,"name":"Xylosma crenata (H. St. John) H. St. John","imgPath":"http://dummyimage.com/144x218.jpg/cc0000/ffffff","description":"Aliquam quis turpis eget elit sodales scelerisque. Mauris sit amet eros. Suspendisse accumsan tortor quis turpis.\\n\\nSed ante. Vivamus tortor. Duis mattis egestas metus.","rating":4.67,"seats":60,"semester":5,"type":3},{"id":54,"ECTS":4,"name":"Polypodium attenuatum Humb. & Bonpl. ex Willd.","imgPath":"http://dummyimage.com/165x148.bmp/ff4444/ffffff","description":"Cras mi pede, malesuada in, imperdiet et, commodo vulputate, justo. In blandit ultrices enim. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.","rating":2.45,"seats":240,"semester":2,"type":1},{"id":55,"ECTS":7,"name":"Pohlia drummondii (M\xfcll. Hal.) Andrews","imgPath":"http://dummyimage.com/121x154.bmp/5fa2dd/ffffff","description":"Suspendisse potenti. In eleifend quam a odio. In hac habitasse platea dictumst.","rating":4.97,"seats":190,"semester":6,"type":1},{"id":56,"ECTS":4,"name":"Monanthochloe littoralis Engelm.","imgPath":"http://dummyimage.com/233x120.jpg/ff4444/ffffff","description":"Duis bibendum, felis sed interdum venenatis, turpis enim blandit mi, in porttitor pede justo eu massa. Donec dapibus. Duis at velit eu est congue elementum.","rating":1.77,"seats":60,"semester":2,"type":1},{"id":57,"ECTS":3,"name":"Arthonia subminutula Nyl.","imgPath":"http://dummyimage.com/220x115.png/cc0000/ffffff","description":"Proin leo odio, porttitor id, consequat in, consequat ut, nulla. Sed accumsan felis. Ut at dolor quis odio consequat varius.\\n\\nInteger ac leo. Pellentesque ultrices mattis odio. Donec vitae nisi.\\n\\nNam ultrices, libero non mattis pulvinar, nulla pede ullamcorper augue, a suscipit nulla elit ac nulla. Sed vel enim sit amet nunc viverra dapibus. Nulla suscipit ligula in lacus.","rating":1.47,"seats":70,"semester":3,"type":1},{"id":58,"ECTS":6,"name":"Melochia pyramidata L.","imgPath":"http://dummyimage.com/172x114.png/5fa2dd/ffffff","description":"Sed ante. Vivamus tortor. Duis mattis egestas metus.\\n\\nAenean fermentum. Donec ut mauris eget massa tempor convallis. Nulla neque libero, convallis eget, eleifend luctus, ultricies eu, nibh.","rating":3.23,"seats":90,"semester":6,"type":3},{"id":59,"ECTS":6,"name":"Neisosperma Raf.","imgPath":"http://dummyimage.com/110x170.png/cc0000/ffffff","description":"Aliquam quis turpis eget elit sodales scelerisque. Mauris sit amet eros. Suspendisse accumsan tortor quis turpis.\\n\\nSed ante. Vivamus tortor. Duis mattis egestas metus.\\n\\nAenean fermentum. Donec ut mauris eget massa tempor convallis. Nulla neque libero, convallis eget, eleifend luctus, ultricies eu, nibh.","rating":3.59,"seats":230,"semester":1,"type":0},{"id":60,"ECTS":4,"name":"Omphalodes verna Moench","imgPath":"http://dummyimage.com/101x189.png/ff4444/ffffff","description":"Duis bibendum, felis sed interdum venenatis, turpis enim blandit mi, in porttitor pede justo eu massa. Donec dapibus. Duis at velit eu est congue elementum.\\n\\nIn hac habitasse platea dictumst. Morbi vestibulum, velit id pretium iaculis, diam erat fermentum justo, nec condimentum neque sapien placerat ante. Nulla justo.","rating":2.94,"seats":120,"semester":3,"type":0},{"id":61,"ECTS":5,"name":"Liparis elata Lindl.","imgPath":"http://dummyimage.com/211x142.png/cc0000/ffffff","description":"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Proin risus. Praesent lectus.\\n\\nVestibulum quam sapien, varius ut, blandit non, interdum in, ante. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis faucibus accumsan odio. Curabitur convallis.\\n\\nDuis consequat dui nec nisi volutpat eleifend. Donec ut dolor. Morbi vel lectus in quam fringilla rhoncus.","rating":1.3,"seats":60,"semester":3,"type":2},{"id":62,"ECTS":5,"name":"Streptanthus lemmonii S. Watson","imgPath":"http://dummyimage.com/177x214.bmp/dddddd/000000","description":"Sed sagittis. Nam congue, risus semper porta volutpat, quam pede lobortis ligula, sit amet eleifend pede libero quis orci. Nullam molestie nibh in lectus.\\n\\nPellentesque at nulla. Suspendisse potenti. Cras in purus eu magna vulputate luctus.","rating":1.49,"seats":230,"semester":5,"type":3},{"id":63,"ECTS":7,"name":"Cytisus villosus Pourr.","imgPath":"http://dummyimage.com/135x101.bmp/cc0000/ffffff","description":"Sed ante. Vivamus tortor. Duis mattis egestas metus.\\n\\nAenean fermentum. Donec ut mauris eget massa tempor convallis. Nulla neque libero, convallis eget, eleifend luctus, ultricies eu, nibh.","rating":2.38,"seats":60,"semester":6,"type":1},{"id":64,"ECTS":2,"name":"Tragia brevispica Engelm. & A. Gray","imgPath":"http://dummyimage.com/155x218.jpg/cc0000/ffffff","description":"Integer ac leo. Pellentesque ultrices mattis odio. Donec vitae nisi.\\n\\nNam ultrices, libero non mattis pulvinar, nulla pede ullamcorper augue, a suscipit nulla elit ac nulla. Sed vel enim sit amet nunc viverra dapibus. Nulla suscipit ligula in lacus.\\n\\nCurabitur at ipsum ac tellus semper interdum. Mauris ullamcorper purus sit amet nulla. Quisque arcu libero, rutrum ac, lobortis vel, dapibus at, diam.","rating":4.88,"seats":130,"semester":6,"type":2},{"id":65,"ECTS":5,"name":"Xyris scabrifolia Harper","imgPath":"http://dummyimage.com/109x181.jpg/5fa2dd/ffffff","description":"Vestibulum ac est lacinia nisi venenatis tristique. Fusce congue, diam id ornare imperdiet, sapien urna pretium nisl, ut volutpat sapien arcu sed augue. Aliquam erat volutpat.","rating":1.97,"seats":170,"semester":1,"type":0},{"id":66,"ECTS":6,"name":"Calylophus hartwegii (Benth.) P.H. Raven ssp. filifolius (Eastw.) Towner & P.H. Raven","imgPath":"http://dummyimage.com/243x215.bmp/dddddd/000000","description":"Nullam sit amet turpis elementum ligula vehicula consequat. Morbi a ipsum. Integer a nibh.\\n\\nIn quis justo. Maecenas rhoncus aliquam lacus. Morbi quis tortor id nulla ultrices aliquet.\\n\\nMaecenas leo odio, condimentum id, luctus nec, molestie sed, justo. Pellentesque viverra pede ac diam. Cras pellentesque volutpat dui.","rating":4.55,"seats":130,"semester":6,"type":3},{"id":67,"ECTS":7,"name":"Mentzelia texana Urb. & Gilg","imgPath":"http://dummyimage.com/239x115.bmp/cc0000/ffffff","description":"Sed sagittis. Nam congue, risus semper porta volutpat, quam pede lobortis ligula, sit amet eleifend pede libero quis orci. Nullam molestie nibh in lectus.\\n\\nPellentesque at nulla. Suspendisse potenti. Cras in purus eu magna vulputate luctus.\\n\\nCum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus vestibulum sagittis sapien. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.","rating":3.25,"seats":140,"semester":2,"type":3},{"id":68,"ECTS":7,"name":"Sedum spathulifolium Hook.","imgPath":"http://dummyimage.com/164x138.png/ff4444/ffffff","description":"Fusce posuere felis sed lacus. Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl. Nunc rhoncus dui vel sem.\\n\\nSed sagittis. Nam congue, risus semper porta volutpat, quam pede lobortis ligula, sit amet eleifend pede libero quis orci. Nullam molestie nibh in lectus.\\n\\nPellentesque at nulla. Suspendisse potenti. Cras in purus eu magna vulputate luctus.","rating":3.71,"seats":50,"semester":7,"type":3},{"id":69,"ECTS":2,"name":"Thladiantha dubia Bunge","imgPath":"http://dummyimage.com/151x139.png/dddddd/000000","description":"In sagittis dui vel nisl. Duis ac nibh. Fusce lacus purus, aliquet at, feugiat non, pretium quis, lectus.","rating":1.05,"seats":130,"semester":3,"type":1},{"id":70,"ECTS":6,"name":"Hydrophyllum macrophyllum Nutt.","imgPath":"http://dummyimage.com/106x152.png/ff4444/ffffff","description":"Nullam porttitor lacus at turpis. Donec posuere metus vitae ipsum. Aliquam non mauris.\\n\\nMorbi non lectus. Aliquam sit amet diam in magna bibendum imperdiet. Nullam orci pede, venenatis non, sodales sed, tincidunt eu, felis.","rating":1.25,"seats":160,"semester":5,"type":2},{"id":71,"ECTS":8,"name":"Verrucaria ceuthocarpa Wahlenb.","imgPath":"http://dummyimage.com/167x133.bmp/ff4444/ffffff","description":"Duis bibendum, felis sed interdum venenatis, turpis enim blandit mi, in porttitor pede justo eu massa. Donec dapibus. Duis at velit eu est congue elementum.","rating":3.86,"seats":80,"semester":5,"type":3},{"id":72,"ECTS":5,"name":"Oenothera stricta Ledeb. ex Link","imgPath":"http://dummyimage.com/195x227.png/ff4444/ffffff","description":"Quisque id justo sit amet sapien dignissim vestibulum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nulla dapibus dolor vel est. Donec odio justo, sollicitudin ut, suscipit a, feugiat et, eros.\\n\\nVestibulum ac est lacinia nisi venenatis tristique. Fusce congue, diam id ornare imperdiet, sapien urna pretium nisl, ut volutpat sapien arcu sed augue. Aliquam erat volutpat.","rating":2.73,"seats":70,"semester":5,"type":3},{"id":73,"ECTS":8,"name":"Mertensia bella Piper","imgPath":"http://dummyimage.com/195x185.png/ff4444/ffffff","description":"Integer ac leo. Pellentesque ultrices mattis odio. Donec vitae nisi.\\n\\nNam ultrices, libero non mattis pulvinar, nulla pede ullamcorper augue, a suscipit nulla elit ac nulla. Sed vel enim sit amet nunc viverra dapibus. Nulla suscipit ligula in lacus.","rating":3.18,"seats":70,"semester":5,"type":0},{"id":74,"ECTS":5,"name":"Lupinus densiflorus Benth. var. lacteus (Kellogg) C.P. Sm.","imgPath":"http://dummyimage.com/116x203.jpg/cc0000/ffffff","description":"Curabitur in libero ut massa volutpat convallis. Morbi odio odio, elementum eu, interdum eu, tincidunt in, leo. Maecenas pulvinar lobortis est.\\n\\nPhasellus sit amet erat. Nulla tempus. Vivamus in felis eu sapien cursus vestibulum.\\n\\nProin eu mi. Nulla ac enim. In tempor, turpis nec euismod scelerisque, quam turpis adipiscing lorem, vitae mattis nibh ligula nec sem.","rating":3.61,"seats":190,"semester":2,"type":1},{"id":75,"ECTS":5,"name":"Callitriche pedunculosa Nutt.","imgPath":"http://dummyimage.com/174x212.png/dddddd/000000","description":"Cras mi pede, malesuada in, imperdiet et, commodo vulputate, justo. In blandit ultrices enim. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.","rating":2.59,"seats":110,"semester":3,"type":1},{"id":76,"ECTS":4,"name":"Lotus strigosus (Nutt.) Greene var. strigosus","imgPath":"http://dummyimage.com/148x238.png/ff4444/ffffff","description":"Integer ac leo. Pellentesque ultrices mattis odio. Donec vitae nisi.\\n\\nNam ultrices, libero non mattis pulvinar, nulla pede ullamcorper augue, a suscipit nulla elit ac nulla. Sed vel enim sit amet nunc viverra dapibus. Nulla suscipit ligula in lacus.","rating":1.54,"seats":170,"semester":5,"type":2},{"id":77,"ECTS":5,"name":"Paspalum acuminatum Raddi","imgPath":"http://dummyimage.com/127x175.png/5fa2dd/ffffff","description":"Fusce posuere felis sed lacus. Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl. Nunc rhoncus dui vel sem.","rating":4.33,"seats":250,"semester":4,"type":3},{"id":78,"ECTS":3,"name":"Cereus hildmannianus K. Schum.","imgPath":"http://dummyimage.com/249x191.jpg/cc0000/ffffff","description":"Aenean fermentum. Donec ut mauris eget massa tempor convallis. Nulla neque libero, convallis eget, eleifend luctus, ultricies eu, nibh.\\n\\nQuisque id justo sit amet sapien dignissim vestibulum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nulla dapibus dolor vel est. Donec odio justo, sollicitudin ut, suscipit a, feugiat et, eros.","rating":3.6,"seats":130,"semester":1,"type":2},{"id":79,"ECTS":5,"name":"Pleomele aurea (H. Mann) N.E. Br.","imgPath":"http://dummyimage.com/182x163.bmp/5fa2dd/ffffff","description":"Vestibulum ac est lacinia nisi venenatis tristique. Fusce congue, diam id ornare imperdiet, sapien urna pretium nisl, ut volutpat sapien arcu sed augue. Aliquam erat volutpat.\\n\\nIn congue. Etiam justo. Etiam pretium iaculis justo.","rating":4.68,"seats":80,"semester":3,"type":3},{"id":80,"ECTS":5,"name":"Herbertia lahue (Molina) Goldblatt","imgPath":"http://dummyimage.com/142x137.bmp/ff4444/ffffff","description":"Vestibulum quam sapien, varius ut, blandit non, interdum in, ante. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis faucibus accumsan odio. Curabitur convallis.\\n\\nDuis consequat dui nec nisi volutpat eleifend. Donec ut dolor. Morbi vel lectus in quam fringilla rhoncus.\\n\\nMauris enim leo, rhoncus sed, vestibulum sit amet, cursus id, turpis. Integer aliquet, massa id lobortis convallis, tortor risus dapibus augue, vel accumsan tellus nisi eu orci. Mauris lacinia sapien quis libero.","rating":1.77,"seats":140,"semester":5,"type":2},{"id":81,"ECTS":3,"name":"Phacelia linearis (Pursh) Holz.","imgPath":"http://dummyimage.com/189x148.jpg/cc0000/ffffff","description":"Nullam sit amet turpis elementum ligula vehicula consequat. Morbi a ipsum. Integer a nibh.\\n\\nIn quis justo. Maecenas rhoncus aliquam lacus. Morbi quis tortor id nulla ultrices aliquet.\\n\\nMaecenas leo odio, condimentum id, luctus nec, molestie sed, justo. Pellentesque viverra pede ac diam. Cras pellentesque volutpat dui.","rating":3.74,"seats":230,"semester":3,"type":2},{"id":82,"ECTS":5,"name":"Dalea phleoides (Torr. & A. Gray) Shinners","imgPath":"http://dummyimage.com/195x148.jpg/dddddd/000000","description":"Suspendisse potenti. In eleifend quam a odio. In hac habitasse platea dictumst.\\n\\nMaecenas ut massa quis augue luctus tincidunt. Nulla mollis molestie lorem. Quisque ut erat.\\n\\nCurabitur gravida nisi at nibh. In hac habitasse platea dictumst. Aliquam augue quam, sollicitudin vitae, consectetuer eget, rutrum at, lorem.","rating":2.37,"seats":210,"semester":7,"type":0},{"id":83,"ECTS":8,"name":"Umbilicaria scholanderi (Llano) Krog","imgPath":"http://dummyimage.com/112x112.png/ff4444/ffffff","description":"Aenean lectus. Pellentesque eget nunc. Donec quis orci eget orci vehicula condimentum.\\n\\nCurabitur in libero ut massa volutpat convallis. Morbi odio odio, elementum eu, interdum eu, tincidunt in, leo. Maecenas pulvinar lobortis est.","rating":1.42,"seats":90,"semester":7,"type":2},{"id":84,"ECTS":4,"name":"Hulsea vestita A. Gray ssp. inyoensis (D.D. Keck) Wilken","imgPath":"http://dummyimage.com/188x145.bmp/dddddd/000000","description":"Integer tincidunt ante vel ipsum. Praesent blandit lacinia erat. Vestibulum sed magna at nunc commodo placerat.\\n\\nPraesent blandit. Nam nulla. Integer pede justo, lacinia eget, tincidunt eget, tempus vel, pede.","rating":2.95,"seats":110,"semester":4,"type":3},{"id":85,"ECTS":2,"name":"Hordeum marinum Huds.","imgPath":"http://dummyimage.com/218x195.bmp/ff4444/ffffff","description":"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Proin risus. Praesent lectus.\\n\\nVestibulum quam sapien, varius ut, blandit non, interdum in, ante. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis faucibus accumsan odio. Curabitur convallis.\\n\\nDuis consequat dui nec nisi volutpat eleifend. Donec ut dolor. Morbi vel lectus in quam fringilla rhoncus.","rating":2.8,"seats":140,"semester":3,"type":1},{"id":86,"ECTS":5,"name":"Senecio integerrimus Nutt. var. scribneri (Rydb.) T.M. Barkley","imgPath":"http://dummyimage.com/238x135.jpg/ff4444/ffffff","description":"Quisque id justo sit amet sapien dignissim vestibulum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nulla dapibus dolor vel est. Donec odio justo, sollicitudin ut, suscipit a, feugiat et, eros.","rating":3.19,"seats":110,"semester":4,"type":2},{"id":87,"ECTS":2,"name":"Mohavea confertiflora (A. DC.) A. Heller","imgPath":"http://dummyimage.com/130x212.jpg/ff4444/ffffff","description":"Nulla ut erat id mauris vulputate elementum. Nullam varius. Nulla facilisi.\\n\\nCras non velit nec nisi vulputate nonummy. Maecenas tincidunt lacus at velit. Vivamus vel nulla eget eros elementum pellentesque.\\n\\nQuisque porta volutpat erat. Quisque erat eros, viverra eget, congue eget, semper rutrum, nulla. Nunc purus.","rating":4.27,"seats":70,"semester":7,"type":1},{"id":88,"ECTS":3,"name":"Streptopus lanceolatus (Aiton) Reveal var. lanceolatus","imgPath":"http://dummyimage.com/130x171.png/5fa2dd/ffffff","description":"Phasellus in felis. Donec semper sapien a libero. Nam dui.\\n\\nProin leo odio, porttitor id, consequat in, consequat ut, nulla. Sed accumsan felis. Ut at dolor quis odio consequat varius.","rating":3.54,"seats":140,"semester":4,"type":1},{"id":89,"ECTS":7,"name":"Trifolium eriocephalum Nutt. ssp. villiferum (House) J.M. Gillett","imgPath":"http://dummyimage.com/169x180.bmp/cc0000/ffffff","description":"Cras non velit nec nisi vulputate nonummy. Maecenas tincidunt lacus at velit. Vivamus vel nulla eget eros elementum pellentesque.\\n\\nQuisque porta volutpat erat. Quisque erat eros, viverra eget, congue eget, semper rutrum, nulla. Nunc purus.","rating":1.26,"seats":220,"semester":1,"type":0},{"id":90,"ECTS":6,"name":"Crotalaria vitellina Ker Gawl.","imgPath":"http://dummyimage.com/175x239.png/cc0000/ffffff","description":"Donec diam neque, vestibulum eget, vulputate ut, ultrices vel, augue. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec pharetra, magna vestibulum aliquet ultrices, erat tortor sollicitudin mi, sit amet lobortis sapien sapien non mi. Integer ac neque.\\n\\nDuis bibendum. Morbi non quam nec dui luctus rutrum. Nulla tellus.","rating":3.4,"seats":230,"semester":6,"type":2},{"id":91,"ECTS":3,"name":"Allium cuthbertii Small","imgPath":"http://dummyimage.com/234x249.jpg/5fa2dd/ffffff","description":"Aenean fermentum. Donec ut mauris eget massa tempor convallis. Nulla neque libero, convallis eget, eleifend luctus, ultricies eu, nibh.","rating":3.39,"seats":80,"semester":2,"type":0},{"id":92,"ECTS":4,"name":"Eugenia cacuminis Alain","imgPath":"http://dummyimage.com/174x138.jpg/dddddd/000000","description":"Morbi porttitor lorem id ligula. Suspendisse ornare consequat lectus. In est risus, auctor sed, tristique in, tempus sit amet, sem.\\n\\nFusce consequat. Nulla nisl. Nunc nisl.","rating":3.4,"seats":70,"semester":4,"type":2},{"id":93,"ECTS":5,"name":"Lecidea nylanderi (Anzi) Th. Fr.","imgPath":"http://dummyimage.com/144x231.jpg/cc0000/ffffff","description":"Cras non velit nec nisi vulputate nonummy. Maecenas tincidunt lacus at velit. Vivamus vel nulla eget eros elementum pellentesque.","rating":1.93,"seats":100,"semester":3,"type":1},{"id":94,"ECTS":4,"name":"Carex atrofusca Schkuhr var. major (Boeckeler) Raymond","imgPath":"http://dummyimage.com/183x166.bmp/dddddd/000000","description":"In hac habitasse platea dictumst. Morbi vestibulum, velit id pretium iaculis, diam erat fermentum justo, nec condimentum neque sapien placerat ante. Nulla justo.","rating":3.72,"seats":210,"semester":5,"type":1},{"id":95,"ECTS":6,"name":"Carex subspathacea Wormsk. ex Hornem.","imgPath":"http://dummyimage.com/206x183.bmp/5fa2dd/ffffff","description":"Morbi non lectus. Aliquam sit amet diam in magna bibendum imperdiet. Nullam orci pede, venenatis non, sodales sed, tincidunt eu, felis.\\n\\nFusce posuere felis sed lacus. Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl. Nunc rhoncus dui vel sem.\\n\\nSed sagittis. Nam congue, risus semper porta volutpat, quam pede lobortis ligula, sit amet eleifend pede libero quis orci. Nullam molestie nibh in lectus.","rating":1.11,"seats":140,"semester":2,"type":2},{"id":96,"ECTS":6,"name":"Calamagrostis canadensis (Michx.) P. Beauv. var. canadensis","imgPath":"http://dummyimage.com/195x118.bmp/cc0000/ffffff","description":"Phasellus in felis. Donec semper sapien a libero. Nam dui.\\n\\nProin leo odio, porttitor id, consequat in, consequat ut, nulla. Sed accumsan felis. Ut at dolor quis odio consequat varius.","rating":1.34,"seats":50,"semester":6,"type":2},{"id":97,"ECTS":3,"name":"Parishella A. Gray","imgPath":"http://dummyimage.com/152x167.png/ff4444/ffffff","description":"In congue. Etiam justo. Etiam pretium iaculis justo.\\n\\nIn hac habitasse platea dictumst. Etiam faucibus cursus urna. Ut tellus.","rating":2.97,"seats":200,"semester":4,"type":0},{"id":98,"ECTS":4,"name":"Roellia Kindb.","imgPath":"http://dummyimage.com/235x241.jpg/ff4444/ffffff","description":"Aliquam quis turpis eget elit sodales scelerisque. Mauris sit amet eros. Suspendisse accumsan tortor quis turpis.\\n\\nSed ante. Vivamus tortor. Duis mattis egestas metus.","rating":1.08,"seats":50,"semester":7,"type":2},{"id":99,"ECTS":5,"name":"Machaerina mariscoides (Gaudich.) J. Kern ssp. mariscoides (Gaudich.) J. Kern [excluded]","imgPath":"http://dummyimage.com/205x191.png/cc0000/ffffff","description":"Praesent blandit. Nam nulla. Integer pede justo, lacinia eget, tincidunt eget, tempus vel, pede.\\n\\nMorbi porttitor lorem id ligula. Suspendisse ornare consequat lectus. In est risus, auctor sed, tristique in, tempus sit amet, sem.","rating":3.02,"seats":170,"semester":6,"type":1},{"id":100,"ECTS":8,"name":"Lantana involucrata L. var. odorata (L.) Moldenke","imgPath":"http://dummyimage.com/114x242.jpg/5fa2dd/ffffff","description":"Nulla ut erat id mauris vulputate elementum. Nullam varius. Nulla facilisi.\\n\\nCras non velit nec nisi vulputate nonummy. Maecenas tincidunt lacus at velit. Vivamus vel nulla eget eros elementum pellentesque.","rating":1.66,"seats":200,"semester":2,"type":1}]')},"q/0M":function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}n.r(t),n.d(t,"LogLevel",(function(){return o})),n.d(t,"Logger",(function(){return u})),n.d(t,"setLogLevel",(function(){return l}));var i=[],o=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}({}),s=o.INFO,a=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var s=(new Date).toISOString();switch(t){case o.DEBUG:case o.VERBOSE:console.log.apply(console,r(["["+s+"]  "+e.name+":"],n));break;case o.INFO:console.info.apply(console,r(["["+s+"]  "+e.name+":"],n));break;case o.WARN:console.warn.apply(console,r(["["+s+"]  "+e.name+":"],n));break;case o.ERROR:console.error.apply(console,r(["["+s+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},u=function(){function e(e){this.name=e,this._logLevel=s,this._logHandler=a,i.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function l(e){i.forEach((function(t){t.logLevel=e}))}},wj3C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n("mrSG"),s=n("zVF4"),a=n("S+S0"),u=n("q/0M"),l=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),c=new s.ErrorFactory("app","Firebase",l),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),m=function(){function e(e,t,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=s.deepCopy(e),this.container=new a.ComponentContainer(t.name),this._addComponent(new a.Component("app",(function(){return u}),"PUBLIC"));try{for(var l=o.__values(this.firebase_.INTERNAL.components.values()),c=l.next();!c.done;c=l.next())this._addComponent(c.value)}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=d),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=d),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){p.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw c.create("app-deleted",{appName:this.name_})},e}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw c.create("bad-app-name",{appName:String(a)});if(s.contains(t,a))throw c.create("duplicate-app",{appName:a});var u=new e(n,o,r);return t[a]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=f[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){var l=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&l.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&l.push("and"),s&&l.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void p.warn(l.join(" "))}u(new a.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},apps:null,SDK_VERSION:"7.6.0",INTERNAL:{registerComponent:u,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(!s.contains(t,e=e||d))throw c.create("no-app",{appName:e});return t[e]}function u(a){var u,l,h=a.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var d=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[h])throw c.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==a.serviceProps&&s.deepExtend(d,a.serviceProps),r[h]=d,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,h);return n.apply(this,a.multipleInstances?e:[])}}try{for(var f=o.__values(Object.keys(t)),m=f.next();!m.done;m=f.next())t[m.value]._addComponent(a)}catch(g){u={error:g}}finally{try{m&&!m.done&&(l=f.return)&&l.call(f)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(m);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){s.deepExtend(t,e)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),t}(),y=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t;return"VERSION"===(null===(t=e.getComponent())||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(s.isBrowser()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.isNode()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),b.apply(void 0,e)};var w=g;!function(e,t){e.INTERNAL.registerComponent(new a.Component("platform-logger",(function(e){return new y(e)}),"PRIVATE")),e.registerVersion(h,"0.5.0",void 0),e.registerVersion("fire-js","")}(w),t.default=w,t.firebase=w},x7I3:function(e,t,n){"use strict";n.r(t),n.d(t,"ErrorCode",(function(){return ar})),n.d(t,"EventType",(function(){return ur})),n.d(t,"WebChannel",(function(){return lr})),n.d(t,"XhrIo",(function(){return cr})),n.d(t,"createWebChannelTransport",(function(){return sr}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},s=i;function a(e){return"string"==typeof e}function u(e){return"number"==typeof e}function l(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function c(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function d(e){return"array"==h(e)}function f(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now||function(){return+new Date};function S(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.xb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function C(){this.j=this.j,this.i=this.i}C.prototype.j=!1,C.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[m]||(this[m]=++g))},C.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(a(e))return a(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},T=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=a(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function I(e){return Array.prototype.concat.apply([],arguments)}function A(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function N(e){return/^[\s\xa0]*$/.test(e)}var D,k=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function x(e,t){return-1!=e.indexOf(t)}function R(e,t){return e<t?-1:e>t?1:0}e:{var P=s.navigator;if(P){var O=P.userAgent;if(O){D=O;break e}}D=""}function M(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function L(e){var t,n={};for(t in e)n[t]=e[t];return n}var V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<V.length;o++)n=V[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function U(e){return U[" "](e),e}U[" "]=c;var q,j,B=x(D,"Opera"),z=x(D,"Trident")||x(D,"MSIE"),H=x(D,"Edge"),G=H||z,W=x(D,"Gecko")&&!(x(D.toLowerCase(),"webkit")&&!x(D,"Edge"))&&!(x(D,"Trident")||x(D,"MSIE"))&&!x(D,"Edge"),K=x(D.toLowerCase(),"webkit")&&!x(D,"Edge");function Q(){var e=s.document;return e?e.documentMode:void 0}e:{var $="",Y=(j=D,W?/rv:([^\);]+)(\)|;)/.exec(j):H?/Edge\/([\d\.]+)/.exec(j):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(j):K?/WebKit\/(\S+)/.exec(j):B?/(?:Version)[ \/]?(\S+)/.exec(j):void 0);if(Y&&($=Y?Y[1]:""),z){var J=Q();if(null!=J&&J>parseFloat($)){q=String(J);break e}}q=$}var X,Z={};function ee(e){return function(e,t){var n=Z;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=k(String(q)).split("."),r=k(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;t=R(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||R(0==s[2].length,0==a[2].length)||R(s[2],a[2]),s=s[3],a=a[3]}while(0==t)}return 0<=t}))}var te=s.document;X=te&&z?Q()||("CSS1Compat"==te.compatMode?parseInt(q,10):5):void 0;var ne=!z||9<=Number(X),re=z&&!ee("9"),ie=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{s.addEventListener("test",c,t),s.removeEventListener("test",c,t)}catch(n){}return e}();function oe(e,t){this.type=e,this.a=this.target=t,this.Ia=!0}function se(e,t){if(oe.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(W){e:{try{U(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=a(e.pointerType)?e.pointerType:ae[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}oe.prototype.b=function(){this.Ia=!1},S(se,oe);var ae={2:"touch",3:"pen",4:"mouse"};se.prototype.b=function(){se.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,re)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var ue="closure_listenable_"+(1e6*Math.random()|0),le=0;function ce(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++le,this.X=this.Z=!1}function he(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function de(e){this.src=e,this.a={},this.b=0}function fe(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=E(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}de.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var s=pe(e,t,r,i);return-1<s?(t=e[s],n||(t.Z=!1)):((t=new ce(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),ge={};function ye(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(d(n)){for(var s=0;s<n.length;s++)e(t,n[s],r,i,o);return null}return r=Ee(r),t&&t[ue]?t.Aa(n,r,p(i)?!!i.capture:!!i,o):ve(t,n,r,!0,i,o)}(e,t,n,r,i);if(d(t)){for(var o=0;o<t.length;o++)ye(e,t[o],n,r,i);return null}return n=Ee(n),e&&e[ue]?e.za(t,n,p(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i;if(s&&!ne)return null;var a=Se(e);if(a||(e[me]=a=new de(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){var e=_e,t=ne?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(we(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function be(e){if(!u(e)&&e&&!e.X){var t=e.src;if(t&&t[ue])fe(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(we(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Se(t))?(fe(n,e),0==n.b&&(n.src=null,t[me]=null)):he(e)}}}function we(e){return e in ge?ge[e]:ge[e]="on"+e}function _e(e,t){return!!e.X||function(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&be(e),n.call(r,t)}(e,ne?new se(t,this):t=new se(t||l("window.event"),this))}function Se(e){return(e=e[me])instanceof de?e:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ee(e){return"function"==h(e)?e:(e[Ce]||(e[Ce]=function(t){return e.handleEvent(t)}),e[Ce])}function Te(){C.call(this),this.c=new de(this),this.J=this,this.B=null}function Ie(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.X&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&fe(e.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ia}S(Te,C),Te.prototype[ue]=!0,(r=Te.prototype).addEventListener=function(e,t,n,r){ye(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(d(n))for(var s=0;s<n.length;s++)e(t,n[s],r,i,o);else i=p(i)?!!i.capture:!!i,r=Ee(r),t&&t[ue]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=pe(s=t.a[n],r,i,o))&&(he(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete t.a[n],t.b--))):t&&(t=Se(t))&&(n=t.a[n.toString()],t=-1,n&&(t=pe(n,r,i,o)),(r=-1<t?n[t]:null)&&be(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(a(e))e=new oe(e,n);else if(e instanceof oe)e.target=e.target||n;else{var i=e;F(e=new oe(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.a=t[o];i=Ie(s,r,!0,e)&&i}if(i=Ie(s=e.a=n,r,!0,e)&&i,i=Ie(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Ie(s=e.a=t[o],r,!1,e)&&i;return i},r.G=function(){if(Te.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)he(n[r]);delete t.a[e],t.b--}}this.B=null},r.za=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ae=s.JSON.stringify;function Ne(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function De(){this.b=this.a=null}Ne.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var ke,xe=new Ne((function(){return new Pe}),(function(e){e.reset()}));function Re(){var e=Ve,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Pe(){this.next=this.b=this.a=null}function Oe(e){s.setTimeout((function(){throw e}),0)}function Me(e,t){ke||function(){var e=s.Promise.resolve(void 0);ke=function(){e.then(Fe)}}(),Le||(ke(),Le=!0),Ve.add(e,t)}De.prototype.add=function(e,t){var n=xe.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Pe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Pe.prototype.reset=function(){this.next=this.b=this.a=null};var Le=!1,Ve=new De;function Fe(){for(var e;e=Re();){try{e.a.call(e.b)}catch(n){Oe(n)}var t=xe;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Le=!1}function Ue(e,t){Te.call(this),this.b=e||1,this.a=t||s,this.f=b(this.fb,this),this.g=_()}function qe(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function je(e,t,n){if("function"==h(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function Be(e,t,n){C.call(this),this.f=null!=n?b(e,n):e,this.c=t,this.b=b(this.$a,this),this.a=[]}function ze(e){e.U=je(e.b,e.c),e.f.apply(null,e.a)}function He(e){C.call(this),this.b=e,this.a={}}S(Ue,Te),(r=Ue.prototype).ba=!1,r.L=null,r.fb=function(){if(this.ba){var e=_()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(qe(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=_())},r.G=function(){Ue.N.G.call(this),qe(this),delete this.a},S(Be,C),(r=Be.prototype).ea=!1,r.U=null,r.Ta=function(e){this.a=arguments,this.U?this.ea=!0:ze(this)},r.G=function(){Be.N.G.call(this),this.U&&(s.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,ze(this))},S(He,C);var Ge=[];function We(e,t,n,r){d(n)||(n&&(Ge[0]=n.toString()),n=Ge);for(var i=0;i<n.length;i++){var o=ye(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Ke(e){M(e.a,(function(e,t){this.a.hasOwnProperty(t)&&be(e)}),e),e.a={}}function Qe(){}He.prototype.G=function(){He.N.G.call(this),Ke(this)},He.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $e=new Te;function Ye(e){oe.call(this,"serverreachability",e)}function Je(e){$e.dispatchEvent(new Ye($e,e))}function Xe(e){oe.call(this,"statevent",e)}function Ze(e){$e.dispatchEvent(new Xe($e,e))}function et(e){oe.call(this,"timingevent",e)}function tt(e,t){if("function"!=h(e))throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){e()}),t)}S(Ye,oe),S(Xe,oe),S(et,oe);var nt={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},rt={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function it(){}function ot(){}it.prototype.a=null;var st,at={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function ut(){oe.call(this,"d")}function lt(){oe.call(this,"c")}function ct(){}function ht(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new He(this),this.O=dt,this.P=new Ue(e=G?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}S(ut,oe),S(lt,oe),S(ct,it),st=new ct;var dt=45e3,ft={},pt={};function mt(e,t,n){e.F=1,e.f=qt(Pt(t)),e.l=n,e.H=!0,yt(e,null)}function gt(e,t,n,r){e.F=1,e.f=qt(Pt(t)),e.l=null,e.H=n,yt(e,r)}function yt(e,t){e.v=_(),wt(e),e.D=Pt(e.f),Ut(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new Be(b(e.Ja,e,e.a),e.J)),We(e.I,e.a,"readystatechange",e.cb),t=e.h?L(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),Je(1)}function vt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=bt(e,n);if(i==pt){4==t&&(e.c=4,Ze(14),r=!1);break}if(i==ft){e.c=4,Ze(15),r=!1;break}Tt(e,i)}4==t&&0==n.length&&(e.c=1,Ze(16),r=!1),e.b=e.b&&r,r||(Et(e),Ct(e))}function bt(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?pt:(n=Number(t.substring(n,r)),isNaN(n)?ft:(r+=1)+n>t.length?pt:(t=t.substr(r,n),e.A=r+n,t))}function wt(e){e.R=_()+e.O,_t(e,e.O)}function _t(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=tt(b(e.ab,e),t)}function St(e){e.i&&(s.clearTimeout(e.i),e.i=null)}function Ct(e){e.g.Ca()||e.m||e.g.na(e)}function Et(e){St(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,qe(e.P),Ke(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Tt(e,t){try{e.g.Fa(e,t),Je(4)}catch(n){}}function It(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||a(e))T(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(f(e)||a(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(a(e))return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function At(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof At)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Nt(e,t){kt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Dt(e))}function Dt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];kt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)kt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function kt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ht.prototype).setTimeout=function(e){this.O=e},r.cb=function(e){e=e.target;var t=this.B;t&&3==Pn(e)?t.Ta():this.Ja(e)},r.Ja=function(e){try{if(e==this.a)e:{var t=Pn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!G&&!this.a.aa())){this.m||4!=t||7==n||Je(8==n||0>=r?3:2),St(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var s=On(this.a,"X-HTTP-Initial-Response");if(s&&!N(s)){var a=s;break t}}a=null}if(!a){this.b=!1,this.c=3,Ze(12),Et(this),Ct(this);break e}this.s=!0,Tt(this,a)}this.H?(vt(this,t,o),G&&this.b&&3==t&&(We(this.I,this.P,"tick",this.bb),this.P.start())):Tt(this,o),4==t&&Et(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,wt(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Ze(12)):(this.c=0,Ze(13)),Et(this),Ct(this)}}}catch(u){}},r.bb=function(){if(this.a){var e=Pn(this.a),t=this.a.aa();this.A<t.length&&(St(this),vt(this,e,t),this.b&&4!=e&&wt(this))}},r.cancel=function(){this.m=!0,Et(this)},r.ab=function(){this.i=null;var e=_();0<=e-this.R?(2!=this.F&&(Je(3),Ze(17)),Et(this),this.c=2,Ct(this)):_t(this,this.R-e)},(r=At.prototype).C=function(){Dt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return Dt(this),this.a.concat()},r.get=function(e,t){return kt(this.b,e)?this.b[e]:t},r.set=function(e,t){kt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var xt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Rt?(this.h=void 0!==t?t:e.h,Ot(this,e.f),this.j=e.j,Mt(this,e.b),Lt(this,e.i),this.a=e.a,Vt(this,en(e.c)),this.g=e.g):e&&(n=String(e).match(xt))?(this.h=!!t,Ot(this,n[1]||"",!0),this.j=jt(n[2]||""),Mt(this,n[3]||"",!0),Lt(this,n[4]),this.a=jt(n[5]||"",!0),Vt(this,n[6]||"",!0),this.g=jt(n[7]||"")):(this.h=!!t,this.c=new $t(null,this.h))}function Pt(e){return new Rt(e)}function Ot(e,t,n){e.f=n?jt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Mt(e,t,n){e.b=n?jt(t,!0):t}function Lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Vt(e,t,n){t instanceof $t?(e.c=t,function(e,t){t&&!e.f&&(Yt(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Jt(this,t),Zt(this,n,e))}),e)),e.f=t}(e.c,e.h)):(n||(t=Bt(t,Kt)),e.c=new $t(t,e.h))}function Ft(e,t,n){e.c.set(t,n)}function Ut(e,t,n){d(n)||(n=[String(n)]),Zt(e.c,t,n)}function qt(e){return Ft(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),e}function jt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Bt(e,t,n){return a(e)?(e=encodeURI(e).replace(t,zt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function zt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Rt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Bt(t,Ht,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(Bt(t,Ht,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Bt(n,"/"==n.charAt(0)?Wt:Gt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Bt(n,Qt)),e.join("")},Rt.prototype.resolve=function(e){var t=Pt(this),n=!!e.f;n?Ot(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Mt(t,e.b):n=null!=e.i;var r=e.a;if(n)Lt(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(x(i,"./")||x(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Vt(t,en(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Ht=/[#\/\?@]/g,Gt=/[#\?:]/g,Wt=/[#\?]/g,Kt=/[#\?@]/g,Qt=/#/g;function $t(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Yt(e){e.a||(e.a=new At,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Jt(e,t){Yt(e),t=tn(e,t),kt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Nt(e.a,t))}function Xt(e,t){return Yt(e),t=tn(e,t),kt(e.a.b,t)}function Zt(e,t,n){Jt(e,t),0<n.length&&(e.c=null,e.a.set(tn(e,t),A(n)),e.b+=n.length)}function en(e){var t=new $t;return t.c=e.c,e.a&&(t.a=new At(e.a),t.b=e.b),t}function tn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function nn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(e){var t=e.a.F.a;if(null!=t)Ze(4),t?(Ze(10),Wn(e.a,e,!1)):(Ze(11),Wn(e.a,e,!0));else{e.b=new ht(e,void 0,void 0),e.b.h=e.h,t=Jn(t=e.a,t.Y()?e.f:null,e.i),Ze(4),Ut(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Ft(t,n,r),gt(e.b,t,!1,e.f)}}function on(){this.a=this.b=null}function sn(){this.a=new At}function an(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[m]||(e[m]=++g)):t.charAt(0)+e}function un(e,t){this.b=e,this.a=t}function ln(e){this.g=e||cn,e=s.PerformanceNavigationTiming?0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(s.ka&&s.ka.Da&&s.ka.Da()&&s.ka.Da().yb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new sn),this.b=null,this.c=[]}(r=$t.prototype).add=function(e,t){Yt(this),this.c=null,e=tn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){Yt(this),this.a.forEach((function(n,r){T(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.K=function(){Yt(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){Yt(this);var t=[];if(a(e))Xt(this,e)&&(t=I(t,this.a.get(tn(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=I(t,e[n])}return t},r.set=function(e,t){return Yt(this),this.c=null,Xt(this,e=tn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.c=e.join("&")},S((function(){}),(function(){})),(r=nn.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=On(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=On(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(i){return(t=this.a).m=this.c,void $n(t,2)}this.f=r[0]}else(t=this.a).m=this.c,$n(t,2)}else 1==this.M&&(this.g?Ze(6):"11111"==t?(Ze(5),this.g=!0,(!z||10<=Number(X))&&(this.c=200,this.b.cancel(),Ze(11),Wn(this.a,this,!0))):(Ze(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?(Ze(11),Wn(this.a,this,!0)):(Ze(10),Wn(this.a,this,!1)));else{0==this.M?Ze(8):1==this.M&&Ze(9);var e=this.a;e.m=this.c,$n(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},sn.prototype.add=function(e){this.a.set(an(e),e)},sn.prototype.C=function(){return this.a.C()};var cn=10;function hn(e,t){!e.a&&(x(t,"spdy")||x(t,"quic")||x(t,"h2"))&&(e.f=e.g,e.a=new sn,e.b&&(mn(e,e.b),e.b=null))}function dn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function fn(e){return e.b?1:e.a?e.a.a.c:0}function pn(e,t){return e.b?e=e.b==t:e.a?(t=an(t),e=kt(e.a.a.b,t)):e=!1,e}function mn(e,t){e.a?e.a.add(t):e.b=t}function gn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=an(t),n=kt(e.a.a.b,n)),n&&Nt(e.a.a,an(t)))}function yn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return T(e.a.C(),(function(e){t=t.concat(e.j)})),t}return A(e.c)}function vn(){}function bn(){this.a=new vn}function wn(e,t,n){var r=n||"";try{It(e,(function(e,n){var i=e;p(e)&&(i=Ae(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function _n(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}ln.prototype.cancel=function(){this.c=yn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(T(this.a.C(),(function(e){e.cancel()})),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},vn.prototype.stringify=function(e){return s.JSON.stringify(e,void 0)},vn.prototype.parse=function(e){return s.JSON.parse(e,void 0)};var Sn=s.JSON.parse;function Cn(e){Te.call(this),this.headers=new At,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=En,this.D=this.F=!1}S(Cn,Te);var En="",Tn=/^https?$/i,In=["POST","PUT"];function An(e){return"content-type"==e.toLowerCase()}function Nn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Dn(e),xn(e)}function Dn(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function kn(e){if(e.b&&void 0!==o&&(!e.s[1]||4!=Pn(e)||2!=e.T()))if(e.l&&4==Pn(e))je(e.Ea,0,e);else if(e.dispatchEvent("readystatechange"),4==Pn(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.A).match(xt)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!Tn.test(a?a.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var l=2<Pn(e)?e.a.statusText:""}catch(c){l=""}e.f=l+" ["+e.T()+"]",Dn(e)}}finally{xn(e)}}}function xn(e,t){if(e.a){Rn(e);var n=e.a,r=e.s[0]?c:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function Rn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(s.clearTimeout(e.m),e.m=null)}function Pn(e){return e.a?e.a.readyState:0}function On(e,t){return e.a?e.a.getResponseHeader(t):null}function Mn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return M(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),a(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Ft(e,t,n),e}function Ln(e){this.f=[],this.F=new on,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!l("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=l("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Ra=l("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Pa=l("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=l("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Ka=e&&e.zb||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new ln(e&&e.concurrentRequestLimit),this.ja=new bn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Vn(e){if(Fn(e),3==e.u){var t=e.P++,n=Pt(e.B);Ft(n,"SID",e.H),Ft(n,"RID",t),Ft(n,"TYPE","terminate"),Bn(e,n),(t=new ht(e,t,void 0)).F=2,t.f=qt(Pt(n)),n=!1,s.navigator&&s.navigator.sendBeacon&&(n=s.navigator.sendBeacon(t.f.toString(),"")),!n&&s.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=_(),wt(t)}Yn(e)}function Fn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(s.clearTimeout(e.l),e.l=null),Kn(e),e.b.cancel(),e.h&&(u(e.h)&&s.clearTimeout(e.h),e.h=null)}function Un(e,t){e.f.push(new un(e.Qa++,t)),3==e.u&&qn(e)}function qn(e){dn(e.b)||e.h||(e.h=!0,Me(e.Ha,e),e.A=0)}function jn(e,t){var n;n=t?t.W:e.P++;var r=Pt(e.B);Ft(r,"SID",e.H),Ft(r,"RID",n),Ft(r,"AID",e.O),Bn(e,r),e.g&&e.i&&Mn(r,e.g,e.i),n=new ht(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=zn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),mn(e.b,n),mt(n,r,t)}function Bn(e,t){e.c&&It({},(function(e,n){Ft(t,n,e)}))}function zn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?b(e.c.Sa,e.c,e):null;e:for(var i=e.f,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var l=i[u].b,c=i[u].a;if(0>(l-=o))o=Math.max(0,i[u].b-100),a=!1;else try{wn(c,s,"req"+l+"_")}catch(h){r&&r(c)}}if(a){r=s.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function Hn(e){e.a||e.l||(e.S=1,Me(e.Ga,e),e.v=0)}function Gn(e){return!(e.a||e.l||3<=e.v||(e.S++,e.l=tt(b(e.Ga,e),Qn(e,e.v)),e.v++,0))}function Wn(e,t,n){var r=t.l;r&&hn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Jn(e,null,e.ha),qn(e)}function Kn(e){null!=e.s&&(s.clearTimeout(e.s),e.s=null)}function Qn(e,t){var n=e.Na+Math.floor(Math.random()*e.Ra);return e.ma()||(n*=2),n*t}function $n(e,t){if(2==t){var n=null;e.c&&(n=null);var r=b(e.eb,e);n||(n=new Rt("//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||Ot(n,"https"),qt(n)),function(e,t){var n=new Qe;if(s.Image){var r=new Image;r.onload=w(_n,n,r,"TestLoadImage: loaded",!0,t),r.onerror=w(_n,n,r,"TestLoadImage: error",!1,t),r.onabort=w(_n,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=w(_n,n,r,"TestLoadImage: timeout",!1,t),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ze(2);e.u=0,e.c&&e.c.ta(t),Yn(e),Fn(e)}function Yn(e){e.u=0,e.m=-1,e.c&&(0==yn(e.b).length&&0==e.f.length||(e.b.c.length=0,A(e.f),e.f.length=0),e.c.sa())}function Jn(e,t,n){var r=function(e){return e instanceof Rt?Pt(e):new Rt(e,void 0)}(n);if(""!=r.b)t&&Mt(r,t+"."+r.b),Lt(r,r.i);else{var i=s.location;r=function(e,t,n,r){var i=new Rt(null,void 0);return e&&Ot(i,e),t&&Mt(i,t),n&&Lt(i,n),r&&(i.a=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.V&&M(e.V,(function(e,t){Ft(r,t,e)})),n=e.I,(t=e.j)&&n&&Ft(r,t,n),Ft(r,"VER",e.wa),Bn(e,r),r}function Xn(){}function Zn(){if(z&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function er(e,t){Te.call(this),this.a=new Ln(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!N(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new rr(this)}function tr(e){ut.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function nr(){lt.call(this),this.status=1}function rr(e){this.a=e}(r=Cn.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(e){var t;return(t=e.a)||(t=e.a={}),t}(this.H?this.H:st),this.a.onreadystatechange=b(this.Ea,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(o){return void Nn(this,o)}e=n||"";var i=new At(this.headers);r&&It(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=An,n=e.length,r=a(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:a(e)?e.charAt(t):e[t]}(i.K()),n=s.FormData&&e instanceof s.FormData,!(0<=E(In,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Rn(this),0<this.o&&((this.D=function(e){return z&&ee(9)&&u(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ba,this)):this.m=je(this.Ba,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(o){Nn(this,o)}},r.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),xn(this,!0)),Cn.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?kn(this):this.Za())},r.Za=function(){kn(this)},r.T=function(){try{return 2<Pn(this)?this.a.status:-1}catch(j){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(j){return""}},r.Ua=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Sn(t)}},r.ya=function(){return this.h},r.Xa=function(){return a(this.f)?this.f:String(this.f)},(r=Ln.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ht(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?F(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&a(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=zn(this,n,t),Ft(i=Pt(this.B),"RID",e),Ft(i,"CVER",22),this.o&&this.j&&Ft(i,"X-HTTP-Session-Id",this.j),Bn(this,i),this.g&&r&&Mn(i,this.g,r),mn(this.b,n),this.W?(Ft(i,"$req",t),Ft(i,"SID","null"),n.S=!0,mt(n,i,null)):mt(n,i,t),this.u=2}}else 3==this.u&&(e?jn(this,e):0==this.f.length||dn(this.b)||jn(this))},r.Ga=function(){this.l=null,this.a=new ht(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Pt(this.pa);Ft(e,"RID","rpc"),Ft(e,"SID",this.H),Ft(e,"CI",this.ia?"0":"1"),Ft(e,"AID",this.O),Bn(this,e),Ft(e,"TYPE","xmlhttp"),this.g&&this.i&&Mn(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),gt(this.a,e,!0,this.ga)},r.Fa=function(e,t){if(0!=this.u&&(this.a==e||pn(this.b,e)))if(this.m=e.o,!e.s&&pn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(o){n=null}if(d(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Kn(this),this.a.cancel(),this.a=null}Gn(this),Ze(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=tt(b(this.Ya,this),6e3));if(1>=fn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else $n(this,11)}else if((e.s||this.a==e)&&Kn(this),!N(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=On(r,"X-Client-Wire-Protocol"))&&hn(this.b,i),this.j&&(r=On(r,"X-HTTP-Session-Id")))&&(this.I=r,Ft(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Jn(this,this.Y()?this.ga:null,this.ha),r.s?(gn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(St(r),wt(r)),this.a=r):Hn(this),0<this.f.length&&qn(this)}else"stop"!=r[0]&&"close"!=r[0]||$n(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?$n(this,7):Vn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Gn(this),Ze(19))},r.na=function(e){var t=null;if(this.a==e){Kn(this),this.a=null;var n=2}else{if(!pn(this.b,e))return;t=e.j,gn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=_()-e.v,$e.dispatchEvent(new et($e,e.l?e.l.length:0,t,this.A)),qn(this)):Hn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(fn(e.b)>=e.b.f-(e.h?1:0)||(e.h?(e.f=t.j.concat(e.f),0):1==e.u||2==e.u||e.A>=(e.Oa?0:e.Pa)||(e.h=tt(b(e.Ha,e,t),Qn(e,e.A)),e.A++,0)))}(this,e)||2==n&&Gn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:$n(this,5);break;case 4:$n(this,10);break;case 3:$n(this,6);break;default:$n(this,2)}}},r.eb=function(e){Ze(e?2:1)},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cn(this.Ka)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Xn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},Zn.prototype.a=function(e,t){return new er(e,t)},S(er,Te),(r=er.prototype).addEventListener=function(e,t,n,r){er.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){er.N.removeEventListener.call(this,e,t,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;Ze(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new nn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Mn(t,e.g,e.i)),(e=e.w).i=n,t=Jn(e.a,null,e.i),Ze(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,rn(e)):(Ut(t,"MODE","init"),!e.a.o&&e.a.j&&Ut(t,"X-HTTP-Session-Id",e.a.j),e.b=new ht(e,void 0,void 0),e.b.h=e.h,gt(e.b,t,!1,null),e.M=0)},r.close=function(){Vn(this.a)},r.Wa=function(e){if(a(e)){var t={};t.__data__=e,Un(this.a,t)}else this.h?((t={}).__data__=Ae(e),Un(this.a,t)):Un(this.a,e)},r.G=function(){this.a.c=null,delete this.f,Vn(this.a),delete this.a,er.N.G.call(this)},S(tr,ut),S(nr,lt),S(rr,Xn),rr.prototype.va=function(){this.a.dispatchEvent("a")},rr.prototype.ua=function(e){this.a.dispatchEvent(new tr(e))},rr.prototype.ta=function(e){this.a.dispatchEvent(new nr(e))},rr.prototype.sa=function(){this.a.dispatchEvent("b")};var ir=w((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),Zn);Zn.prototype.createWebChannel=Zn.prototype.a,er.prototype.send=er.prototype.Wa,er.prototype.open=er.prototype.Va,er.prototype.close=er.prototype.close,nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,rt.COMPLETE="complete",ot.EventType=at,at.OPEN="a",at.CLOSE="b",at.ERROR="c",at.MESSAGE="d",Te.prototype.listen=Te.prototype.za,Cn.prototype.listenOnce=Cn.prototype.Aa,Cn.prototype.getLastError=Cn.prototype.Xa,Cn.prototype.getLastErrorCode=Cn.prototype.ya,Cn.prototype.getStatus=Cn.prototype.T,Cn.prototype.getResponseJson=Cn.prototype.Ua,Cn.prototype.getResponseText=Cn.prototype.aa,Cn.prototype.send=Cn.prototype.ca;var or={createWebChannelTransport:ir,ErrorCode:nt,EventType:rt,WebChannel:ot,XhrIo:Cn},sr=or.createWebChannelTransport,ar=or.ErrorCode,ur=or.EventType,lr=or.WebChannel,cr=or.XhrIo;t.default=or},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function s(e){setTimeout(()=>{throw e})}const a={closed:!0,next(e){},error(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;s(e)},complete(){}},u=Array.isArray||(e=>e&&"number"==typeof e.length);function l(e){return null!==e&&"object"==typeof e}function c(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}c.prototype=Object.create(Error.prototype);const h=c;let d=(()=>{class e{constructor(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let e,t=!1;if(this.closed)return;let{_parent:n,_parents:i,_unsubscribe:o,_subscriptions:s}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let a=-1,c=i?i.length:0;for(;n;)n.remove(this),n=++a<c&&i[a]||null;if(r(o))try{o.call(this)}catch(d){t=!0,e=d instanceof h?f(d.errors):[d]}if(u(s))for(a=-1,c=s.length;++a<c;){const n=s[a];if(l(n))try{n.unsubscribe()}catch(d){t=!0,e=e||[],d instanceof h?e=e.concat(f(d.errors)):e.push(d)}}if(t)throw new h(e)}add(t){let n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;(n=new e)._subscriptions=[t]}break;default:if(!t)return e.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(n._addParent(this)){const e=this._subscriptions;e?e.push(n):this._subscriptions=[n]}return n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}_addParent(e){let{_parent:t,_parents:n}=this;return t!==e&&(t?n?-1===n.indexOf(e)&&(n.push(e),!0):(this._parents=[e],!0):(this._parent=e,!0))}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function f(e){return e.reduce((e,t)=>e.concat(t instanceof h?t.errors:t),[])}const p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class m extends d{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof m?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,e,t,n)}}[p](){return this}static create(e,t,n){const r=new m(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:e,_parents:t}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this}}class g extends m{constructor(e,t,n,i){let o;super(),this._parentSubscriber=e;let s=this;r(t)?o=t:t&&(o=t.next,n=t.error,i=t.complete,t!==a&&(r((s=Object.create(t)).unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):s(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;s(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const y="function"==typeof Symbol&&Symbol.observable||"@@observable";function v(){}function b(...e){return w(e)}function w(e){return e?1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}:v}let _=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,i=function(e,t,n){if(e){if(e instanceof m)return e;if(e[p])return e[p]()}return e||t||n?new m(e,t,n):new m(a)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof m?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=S(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[y](){return this}pipe(...e){return 0===e.length?this:w(e)(this)}toPromise(e){return new(e=S(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function S(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function C(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}C.prototype=Object.create(Error.prototype);const E=C;class T extends d{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class I extends m{constructor(e){super(e),this.destination=e}}let A=(()=>{class e extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new I(this)}lift(e){const t=new N(this,this);return t.operator=e,t}next(e){if(this.closed)throw new E;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new E;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new E;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new E;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new E;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new T(this,e))}asObservable(){const e=new _;return e.source=this,e}}return e.create=(e,t)=>new N(e,t),e})();class N extends A{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):d.EMPTY}}function D(e){return e&&"function"==typeof e.schedule}class k extends m{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const x=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()},R=e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const O=P(),M=e=>t=>{const n=e[O]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t},L=e=>t=>{const n=e[y]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)},V=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function F(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const U=e=>{if(e instanceof _)return t=>e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t);if(e&&"function"==typeof e[y])return L(e);if(V(e))return x(e);if(F(e))return R(e);if(e&&"function"==typeof e[O])return M(e);{const t=l(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function q(e,t,n,r,i=new k(e,n,r)){if(!i.closed)return U(t)(i)}class j extends m{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function B(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new z(e,t))}}class z{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new H(e,this.project,this.thisArg))}}class H extends m{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function G(e,t){return new _(t?n=>{const r=new d;let i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}:x(e))}function W(e,t){if(!t)return e instanceof _?e:new _(U(e));if(null!=e){if(function(e){return e&&"function"==typeof e[y]}(e))return function(e,t){return new _(t?n=>{const r=new d;return r.add(t.schedule(()=>{const i=e[y]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r}:L(e))}(e,t);if(F(e))return function(e,t){return new _(t?n=>{const r=new d;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r}:R(e))}(e,t);if(V(e))return G(e,t);if(function(e){return e&&"function"==typeof e[O]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new _(t?n=>{const r=new d;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[O](),r.add(t.schedule((function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())})))})),r}:M(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function K(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(K((n,r)=>W(e(n,r)).pipe(B((e,i)=>t(n,e,r,i))),n)):("number"==typeof t&&(n=t),t=>t.lift(new Q(e,n)))}class Q{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new $(e,this.project,this.concurrent))}}class $ extends j{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const r=new k(this,void 0,void 0);this.destination.add(r),q(this,e,t,n,r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,r,i){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Y(e){return e}function J(e=Number.POSITIVE_INFINITY){return K(Y,e)}function X(){return function(e){return e.lift(new Z(e))}}class Z{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new ee(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class ee extends m{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}const te=class extends _{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new d).add(this.source.subscribe(new re(this.getSubject(),this))),e.closed?(this._connection=null,e=d.EMPTY):this._connection=e),e}refCount(){return X()(this)}}.prototype,ne={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:te._subscribe},_isComplete:{value:te._isComplete,writable:!0},getSubject:{value:te.getSubject},connect:{value:te.connect},refCount:{value:te.refCount}};class re extends I{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function ie(){return new A}function oe(){return e=>X()(function(e,t){return function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,ne);return r.source=t,r.subjectFactory=n,r}}(ie)(e))}const se="__parameters__";function ae(e,t,n){const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(se)?e[se]:Object.defineProperty(e,se,{value:[]})[se];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}const ue=ae("Inject",e=>({token:e})),le=ae("Optional"),ce=ae("Self"),he=ae("SkipSelf");var de=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function fe(e){for(let t in e)if(e[t]===fe)return t;throw Error("Could not find renamed property on target object.")}function pe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function me(e){const t=e[ge];return t&&t.token===e?t:null}const ge=fe({ngInjectableDef:fe});function ye(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(ye).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}const ve=fe({__forward_ref__:fe});function be(e){return e.__forward_ref__=be,e.toString=function(){return ye(this())},e}function we(e){const t=e;return"function"==typeof t&&t.hasOwnProperty(ve)&&t.__forward_ref__===be?t():e}const _e="undefined"!=typeof globalThis&&globalThis,Se="undefined"!=typeof window&&window,Ce="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ee="undefined"!=typeof global&&global,Te=_e||Ee||Se||Ce;class Ie{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.ngInjectableDef=pe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ae=new Ie("INJECTOR",-1),Ne=new Object,De="ngTempTokenPath",ke="ngTokenPath",xe=/\n/gm,Re="\u0275",Pe="__source",Oe=fe({provide:String,useValue:fe});let Me,Le=void 0;function Ve(e){const t=Le;return Le=e,t}function Fe(e,t=de.Default){if(void 0===Le)throw new Error("inject() must be called from an injection context");return null===Le?function(e,t,n){const r=me(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&de.Optional)return null;throw new Error(`Injector: NOT_FOUND [${ye(e)}]`)}(e,0,t):Le.get(e,t&de.Optional?null:void 0,t)}function Ue(e,t=de.Default){return(Me||Fe)(e,t)}class qe{get(e,t=Ne){if(t===Ne){const t=new Error(`NullInjectorError: No provider for ${ye(e)}!`);throw t.name="NullInjectorError",t}return t}}function je(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Re?e.substr(2):e;let i=ye(t);if(t instanceof Array)i=t.map(ye).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):ye(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(xe,"\n  ")}`}class Be{}class ze{}function He(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ge(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const We=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),Ke=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Te))(),Qe="ngDebugContext",$e="ngOriginalError",Ye="ngErrorLogger";function Je(e){return e[Qe]}function Xe(e){return e[$e]}function Ze(e,...t){e.error(...t)}class et{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e[Ye]||Ze}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?Je(e)?Je(e):this._findContext(Xe(e)):null}_findOriginalError(e){let t=Xe(e);for(;t&&Xe(t);)t=Xe(t);return t}}let tt=!0,nt=!1;function rt(){return nt=!0,tt}class it{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(r){return null}const t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);const n=t.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(e){e="<body><remove></remove>"+e+"</body>";try{const t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(t){return null}}getInertBodyElement_InertDocument(e){const t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const ot=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,st=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function at(e){return(e=String(e)).match(ot)||e.match(st)?e:(rt()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),"unsafe:"+e)}function ut(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function lt(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const ct=ut("area,br,col,hr,img,wbr"),ht=ut("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dt=ut("rp,rt"),ft=lt(dt,ht),pt=lt(ct,lt(ht,ut("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lt(dt,ut("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ft),mt=ut("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gt=ut("srcset"),yt=lt(mt,gt,ut("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ut("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vt=ut("script,style,template");class bt{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!pt.hasOwnProperty(t))return this.sanitizedSomething=!0,!vt.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i),t=e.name,o=t.toLowerCase();if(!yt.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=e.value;mt[o]&&(s=at(s)),gt[o]&&(r=s,s=(r=String(r)).split(",").map(e=>at(e.trim())).join(", ")),this.buf.push(" ",t,'="',St(s),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();pt.hasOwnProperty(t)&&!ct.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(St(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const wt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_t=/([^\#-~ |!])/g;function St(e){return e.replace(/&/g,"&amp;").replace(wt,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(_t,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ct;function Et(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}const Tt=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();class It{}const At=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Nt=/^url\(([^)]+)\)$/,Dt=/([A-Z])/g;function kt(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}let xt=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Rt(),e})();const Rt=(...e)=>{},Pt=new Ie("The presence of this token marks an injector as being the root injector."),Ot=function(e,t,n){return new jt(e,t,n)};let Mt=(()=>{class e{static create(e,t){return Array.isArray(e)?Ot(e,t,""):Ot(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=Ne,e.NULL=new qe,e.ngInjectableDef=pe({token:e,providedIn:"any",factory:()=>Ue(Ae)}),e.__NG_ELEMENT_ID__=-1,e})();const Lt=function(e){return e},Vt=[],Ft=Lt,Ut=function(){return Array.prototype.slice.call(arguments)},qt="\u0275";class jt{constructor(e,t=Mt.NULL,n=null){this.parent=t,this.source=n;const r=this._records=new Map;r.set(Mt,{token:Mt,fn:Lt,deps:Vt,value:this,useNew:!1}),r.set(Ae,{token:Ae,fn:Lt,deps:Vt,value:this,useNew:!1}),function e(t,n){if(n)if((n=we(n))instanceof Array)for(let r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw zt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw zt("Unexpected provider",n);{let e=we(n.provide);const r=function(e){const t=function(e){let t=Vt;const n=e.deps;if(n&&n.length){t=[];for(let e=0;e<n.length;e++){let r=6,i=we(n[e]);if(i instanceof Array)for(let e=0,t=i;e<t.length;e++){const n=t[e];n instanceof le||n==le?r|=1:n instanceof he||n==he?r&=-3:n instanceof ce||n==ce?r&=-5:i=n instanceof ue?n.token:we(n)}t.push({token:i,options:r})}}else if(e.useExisting)t=[{token:we(e.useExisting),options:6}];else if(!(n||Oe in e))throw zt("'deps' required",e);return t}(e);let n=Lt,r=Vt,i=!1,o=we(e.provide);if(Oe in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,n=we(e.useClass);else{if("function"!=typeof o)throw zt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,n=o}return{deps:t,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){let r=t.get(e);if(r){if(r.fn!==Ut)throw Bt(e)}else t.set(e,r={token:n.provide,deps:[],useNew:!1,fn:Ut,value:Vt});r.deps.push({token:e=n,options:6})}const i=t.get(e);if(i&&i.fn==Ut)throw Bt(e);t.set(e,r)}}}(r,e)}get(e,t,n=de.Default){const r=this._records.get(e);try{return function e(t,n,r,i,o,s){try{return function(t,n,r,i,o,s){let a;if(!n||s&de.SkipSelf)s&de.Self||(a=i.get(t,o,de.Default));else{if((a=n.value)==Ft)throw Error(qt+"Circular dependency");if(a===Vt){n.value=Ft;let t=void 0,o=n.useNew,s=n.fn,u=n.deps,l=Vt;if(u.length){l=[];for(let t=0;t<u.length;t++){const n=u[t],o=n.options,s=2&o?r.get(n.token):void 0;l.push(e(n.token,s,r,s||4&o?i:Mt.NULL,1&o?null:Mt.THROW_IF_NOT_FOUND,de.Default))}}n.value=a=o?new s(...l):s.apply(t,l)}}return a}(t,n,r,i,o,s)}catch(a){throw a instanceof Error||(a=new Error(a)),(a[De]=a[De]||[]).unshift(t),n&&n.value==Ft&&(n.value=Vt),a}}(e,r,this._records,this.parent,t,n)}catch(i){return function(e,t,n,r){const i=e[De];throw t[Pe]&&i.unshift(t[Pe]),e.message=je("\n"+e.message,i,"StaticInjectorError",r),e[ke]=i,e[De]=null,e}(i,e,0,this.source)}}toString(){const e=[];return this._records.forEach((t,n)=>e.push(ye(n))),`StaticInjector[${e.join(", ")}]`}}function Bt(e){return zt("Cannot mix multi providers and regular providers",e)}function zt(e,t){return new Error(je(e,t,"StaticInjectorError"))}const Ht=new Ie("AnalyzeForEntryComponents");let Gt=null;function Wt(){if(!Gt){const e=Te.Symbol;if(e&&e.iterator)Gt=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Gt=n)}}}return Gt}function Kt(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function Qt(e,t){const n=Yt(e),r=Yt(t);if(n&&r)return function(e,t,n){const r=e[Wt()](),i=t[Wt()]();for(;;){const e=r.next(),t=i.next();if(e.done&&t.done)return!0;if(e.done||t.done)return!1;if(!n(e.value,t.value))return!1}}(e,t,Qt);{const i=e&&("object"==typeof e||"function"==typeof e),o=t&&("object"==typeof t||"function"==typeof t);return!(n||!i||r||!o)||Kt(e,t)}}class $t{constructor(e){this.wrapped=e}static wrap(e){return new $t(e)}static unwrap(e){return $t.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof $t}}function Yt(e){return!!Jt(e)&&(Array.isArray(e)||!(e instanceof Map)&&Wt()in e)}function Jt(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Xt(e){return!!e&&"function"==typeof e.then}function Zt(e){return!!e&&"function"==typeof e.subscribe}class en{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}class tn{}class nn{}function rn(e){const t=Error(`No component factory found for ${ye(e)}. Did you add it to @NgModule.entryComponents?`);return t[on]=e,t}const on="ngComponent";class sn{resolveComponentFactory(e){throw rn(e)}}let an=(()=>{class e{}return e.NULL=new sn,e})();class un{constructor(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(let r=0;r<e.length;r++){const t=e[r];this._factories.set(t.componentType,t)}}resolveComponentFactory(e){let t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw rn(e);return new ln(t,this._ngModule)}}class ln extends nn{constructor(e,t){super(),this.factory=e,this.ngModule=t,this.selector=e.selector,this.componentType=e.componentType,this.ngContentSelectors=e.ngContentSelectors,this.inputs=e.inputs,this.outputs=e.outputs}create(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)}}function cn(...e){}let hn=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>dn(e),e})();const dn=cn;class fn{}class pn{}const mn=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}();let gn=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>yn(),e})();const yn=cn;class vn{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const bn=new vn("8.2.14");class wn{constructor(){}supports(e){return Yt(e)}create(e){return new Sn(e)}}const _n=(e,t)=>t;class Sn{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||_n}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const o=!n||t&&t.currentIndex<In(n,r,i)?t:n,s=In(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);const e=s-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;t<=o&&o<e&&(i[n]=r+1)}i[o.previousIndex]=t-e}}s!==a&&e(o,s,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Yt(e))throw new Error(`Error trying to diff '${ye(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)r=this._trackByFn(t,n=e[t]),null!==i&&Kt(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,t)),Kt(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),o=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Wt()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Kt(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,e,r,t)),Kt(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),o=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Kt(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Kt(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new Cn(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Tn),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Tn),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Cn{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class En{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Kt(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Tn{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new En,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function In(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class An{constructor(){}supports(e){return e instanceof Map||Jt(e)}create(){return new Nn}}class Nn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Jt(e)))throw new Error(`Error trying to diff '${ye(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Dn(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Kt(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Dn{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let kn=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new he,new le]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.ngInjectableDef=pe({token:e,providedIn:"root",factory:()=>new e([new wn])}),e})(),xn=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new he,new le]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.ngInjectableDef=pe({token:e,providedIn:"root",factory:()=>new e([new An])}),e})();const Rn=[new An],Pn=new kn([new wn]),On=new xn(Rn);let Mn=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ln(e,hn),e})();const Ln=cn;let Vn=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Fn(e,hn),e})();const Fn=cn;function Un(e,t,n,r){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${t}'. Current value: '${n}'.`;return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){const n=new Error(e);return qn(n,t),n}(i,e)}function qn(e,t){e[Qe]=t,e[Ye]=t.logError.bind(t)}function jn(e){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${e}`)}function Bn(e,t,n){const r=e.state,i=1792&r;return i===t?(e.state=-1793&r|n,e.initIndex=-1,!0):i===n}function zn(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function Hn(e,t){return e.nodes[t]}function Gn(e,t){return e.nodes[t]}function Wn(e,t){return e.nodes[t]}function Kn(e,t){return e.nodes[t]}function Qn(e,t){return e.nodes[t]}const $n={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Yn=()=>{},Jn=new Map;function Xn(e){let t=Jn.get(e);return t||(t=ye(e)+"_"+Jn.size,Jn.set(e,t)),t}function Zn(e,t,n,r){if($t.isWrapped(r)){r=$t.unwrap(r);const i=e.def.nodes[t].bindingIndex+n,o=$t.unwrap(e.oldValues[i]);e.oldValues[i]=new $t(o)}return r}const er="$$undefined",tr="$$empty";function nr(e){return{id:er,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}let rr=0;function ir(e,t,n,r){return!(!(2&e.state)&&Kt(e.oldValues[t.bindingIndex+n],r))}function or(e,t,n,r){return!!ir(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function sr(e,t,n,r){const i=e.oldValues[t.bindingIndex+n];if(1&e.state||!Qt(i,r)){const o=t.bindings[n].name;throw Un($n.createDebugContext(e,t.nodeIndex),`${o}: ${i}`,`${o}: ${r}`,0!=(1&e.state))}}function ar(e){let t=e;for(;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function ur(e,t){let n=e;for(;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function lr(e,t,n,r){try{return ar(33554432&e.def.nodes[t].flags?Gn(e,t).componentView:e),$n.handleEvent(e,t,n,r)}catch(i){e.root.errorHandler.handleError(i)}}function cr(e){return e.parent?Gn(e.parent,e.parentNodeDef.nodeIndex):null}function hr(e){return e.parent?e.parentNodeDef.parent:null}function dr(e,t){switch(201347067&t.flags){case 1:return Gn(e,t.nodeIndex).renderElement;case 2:return Hn(e,t.nodeIndex).renderText}}function fr(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function pr(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function mr(e){const t={};let n=0;const r={};return e&&e.forEach(([e,i])=>{"number"==typeof e?(t[e]=i,n|=function(e){return 1<<e%32}(e)):r[e]=i}),{matchedQueries:t,references:r,matchedQueryIds:n}}function gr(e,t){return e.map(e=>{let n,r;return Array.isArray(e)?[r,n]=e:(r=0,n=e),n&&("function"==typeof n||"object"==typeof n)&&t&&Object.defineProperty(n,Pe,{value:t,configurable:!0}),{flags:r,token:n,tokenKey:Xn(n)}})}function yr(e,t,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===We.Native?Gn(e,n.renderParent.nodeIndex).renderElement:void 0:t}const vr=new WeakMap;function br(e){let t=vr.get(e);return t||((t=e(()=>Yn)).factory=e,vr.set(e,t)),t}function wr(e,t,n,r,i){3===t&&(n=e.renderer.parentNode(dr(e,e.def.lastRenderRootNode))),_r(e,t,0,e.def.nodes.length-1,n,r,i)}function _r(e,t,n,r,i,o,s){for(let a=n;a<=r;a++){const n=e.def.nodes[a];11&n.flags&&Cr(e,n,t,i,o,s),a+=n.childCount}}function Sr(e,t,n,r,i,o){let s=e;for(;s&&!fr(s);)s=s.parent;const a=s.parent,u=hr(s),l=u.nodeIndex+u.childCount;for(let c=u.nodeIndex+1;c<=l;c++){const e=a.def.nodes[c];e.ngContentIndex===t&&Cr(a,e,n,r,i,o),c+=e.childCount}if(!a.parent){const s=e.root.projectableNodes[t];if(s)for(let t=0;t<s.length;t++)Er(e,s[t],n,r,i,o)}}function Cr(e,t,n,r,i,o){if(8&t.flags)Sr(e,t.ngContent.index,n,r,i,o);else{const s=dr(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&Er(e,s,n,r,i,o),32&t.bindingFlags&&Er(Gn(e,t.nodeIndex).componentView,s,n,r,i,o)):Er(e,s,n,r,i,o),16777216&t.flags){const s=Gn(e,t.nodeIndex).viewContainer._embeddedViews;for(let e=0;e<s.length;e++)wr(s[e],n,r,i,o)}1&t.flags&&!t.element.name&&_r(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,i,o)}}function Er(e,t,n,r,i,o){const s=e.renderer;switch(n){case 1:s.appendChild(r,t);break;case 2:s.insertBefore(r,t,i);break;case 3:s.removeChild(r,t);break;case 0:o.push(t)}}const Tr=/^:([^:]+):(.+)$/;function Ir(e){if(":"===e[0]){const t=e.match(Tr);return[t[1],t[2]]}return["",e]}function Ar(e){let t=0;for(let n=0;n<e.length;n++)t|=e[n].flags;return t}function Nr(e,t,n,r,i,o,s,a,u,l,c,h,d,f,p,m,g,y,v,b){switch(e){case 1:return t+Dr(n)+r;case 2:return t+Dr(n)+r+Dr(i)+o;case 3:return t+Dr(n)+r+Dr(i)+o+Dr(s)+a;case 4:return t+Dr(n)+r+Dr(i)+o+Dr(s)+a+Dr(u)+l;case 5:return t+Dr(n)+r+Dr(i)+o+Dr(s)+a+Dr(u)+l+Dr(c)+h;case 6:return t+Dr(n)+r+Dr(i)+o+Dr(s)+a+Dr(u)+l+Dr(c)+h+Dr(d)+f;case 7:return t+Dr(n)+r+Dr(i)+o+Dr(s)+a+Dr(u)+l+Dr(c)+h+Dr(d)+f+Dr(p)+m;case 8:return t+Dr(n)+r+Dr(i)+o+Dr(s)+a+Dr(u)+l+Dr(c)+h+Dr(d)+f+Dr(p)+m+Dr(g)+y;case 9:return t+Dr(n)+r+Dr(i)+o+Dr(s)+a+Dr(u)+l+Dr(c)+h+Dr(d)+f+Dr(p)+m+Dr(g)+y+Dr(v)+b;default:throw new Error("Does not support more than 9 expressions")}}function Dr(e){return null!=e?e.toString():""}const kr=new Object,xr=Xn(Mt),Rr=Xn(Ae),Pr=Xn(Be);function Or(e,t,n,r){return n=we(n),{index:-1,deps:gr(r,ye(t)),flags:e,token:t,value:n}}function Mr(e,t,n=Mt.THROW_IF_NOT_FOUND){const r=Ve(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);const s=t.tokenKey;switch(s){case xr:case Rr:case Pr:return e}const a=e._def.providersByKey[s];let u;if(a){let t=e._providers[a.index];return void 0===t&&(t=e._providers[a.index]=Lr(e,a)),t===kr?void 0:t}if((u=me(t.token))&&(i=e,null!=(o=u).providedIn&&(function(e,t){return e._def.modules.indexOf(t)>-1}(i,o.providedIn)||"root"===o.providedIn&&i._def.isRoot))){const n=e._providers.length;return e._def.providers[n]=e._def.providersByKey[t.tokenKey]={flags:5120,value:u.factory,deps:[],index:n,token:t.token},e._providers[n]=kr,e._providers[n]=Lr(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{Ve(r)}var i,o}function Lr(e,t){let n;switch(201347067&t.flags){case 512:n=function(e,t,n){const r=n.length;switch(r){case 0:return new t;case 1:return new t(Mr(e,n[0]));case 2:return new t(Mr(e,n[0]),Mr(e,n[1]));case 3:return new t(Mr(e,n[0]),Mr(e,n[1]),Mr(e,n[2]));default:const i=new Array(r);for(let t=0;t<r;t++)i[t]=Mr(e,n[t]);return new t(...i)}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){const r=n.length;switch(r){case 0:return t();case 1:return t(Mr(e,n[0]));case 2:return t(Mr(e,n[0]),Mr(e,n[1]));case 3:return t(Mr(e,n[0]),Mr(e,n[1]),Mr(e,n[2]));default:const i=Array(r);for(let t=0;t<r;t++)i[t]=Mr(e,n[t]);return t(...i)}}(e,t.value,t.deps);break;case 2048:n=Mr(e,t.deps[0]);break;case 256:n=t.value}return n===kr||null===n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?kr:n}function Vr(e,t){const n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;const r=n[t];return r.viewContainerParent=null,Ge(n,t),$n.dirtyParentQueries(r),Ur(r),r}function Fr(e,t,n){const r=t?dr(t,t.def.lastRenderRootNode):e.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);wr(n,2,i,o,void 0)}function Ur(e){wr(e,3,null,null,void 0)}const qr=new Object;function jr(e,t,n,r,i,o){return new Br(e,t,n,r,i,o)}class Br extends nn{constructor(e,t,n,r,i,o){super(),this.selector=e,this.componentType=t,this._inputs=r,this._outputs=i,this.ngContentSelectors=o,this.viewDefFactory=n}get inputs(){const e=[],t=this._inputs;for(let n in t)e.push({propName:n,templateName:t[n]});return e}get outputs(){const e=[];for(let t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e}create(e,t,n,r){if(!r)throw new Error("ngModule should be provided");const i=br(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,s=$n.createRootView(e,t||[],n,i,r,qr),a=Wn(s,o).instance;return n&&s.renderer.setAttribute(Gn(s,0).renderElement,"ng-version",bn.full),new zr(s,new Kr(s),a)}}class zr extends tn{constructor(e,t,n){super(),this._view=e,this._viewRef=t,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=t,this.changeDetectorRef=t,this.instance=n}get location(){return new hn(Gn(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Jr(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(e){this._viewRef.onDestroy(e)}}function Hr(e,t,n){return new Gr(e,t,n)}class Gr{constructor(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}get element(){return new hn(this._data.renderElement)}get injector(){return new Jr(this._view,this._elDef)}get parentInjector(){let e=this._view,t=this._elDef.parent;for(;!t&&e;)t=hr(e),e=e.parent;return e?new Jr(e,t):new Jr(this._view,null)}clear(){for(let e=this._embeddedViews.length-1;e>=0;e--){const t=Vr(this._data,e);$n.destroyView(t)}}get(e){const t=this._embeddedViews[e];if(t){const e=new Kr(t);return e.attachToViewContainerRef(this),e}return null}get length(){return this._embeddedViews.length}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const o=n||this.parentInjector;i||e instanceof ln||(i=o.get(Be));const s=e.create(o,r,void 0,i);return this.insert(s.hostView,t),s}insert(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=e;return function(e,t,n,r){let i=t.viewContainer._embeddedViews;null==n&&(n=i.length),r.viewContainerParent=e,He(i,n,r),function(e,t){const n=cr(t);if(!n||n===e||16&t.state)return;t.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,t){if(4&t.flags)return;e.nodeFlags|=4,t.flags|=4;let n=t.parent;for(;n;)n.childFlags|=4,n=n.parent}(t.parent.def,t.parentNodeDef)}(t,r),$n.dirtyParentQueries(r),Fr(t,n>0?i[n-1]:null,r)}(this._view,this._data,t,n._view),n.attachToViewContainerRef(this),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(e._view);return function(e,t,n){const r=e.viewContainer._embeddedViews,i=r[t];Ge(r,t),null==n&&(n=r.length),He(r,n,i),$n.dirtyParentQueries(i),Ur(i),Fr(e,n>0?r[n-1]:null,i)}(this._data,n,t),e}indexOf(e){return this._embeddedViews.indexOf(e._view)}remove(e){const t=Vr(this._data,e);t&&$n.destroyView(t)}detach(e){const t=Vr(this._data,e);return t?new Kr(t):null}}function Wr(e){return new Kr(e)}class Kr{constructor(e){this._view=e,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(e){const t=[];return wr(e,0,void 0,void 0,t),t}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){ar(this._view)}detach(){this._view.state&=-5}detectChanges(){const e=this._view.root.rendererFactory;e.begin&&e.begin();try{$n.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}checkNoChanges(){$n.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),$n.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Ur(this._view),$n.dirtyParentQueries(this._view)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}}function Qr(e,t){return new $r(e,t)}class $r extends Mn{constructor(e,t){super(),this._parentView=e,this._def=t}createEmbeddedView(e){return new Kr($n.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}get elementRef(){return new hn(Gn(this._parentView,this._def.nodeIndex).renderElement)}}function Yr(e,t){return new Jr(e,t)}class Jr{constructor(e,t){this.view=e,this.elDef=t}get(e,t=Mt.THROW_IF_NOT_FOUND){return $n.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Xn(e)},t)}}function Xr(e,t){const n=e.def.nodes[t];if(1&n.flags){const t=Gn(e,n.nodeIndex);return n.element.template?t.template:t.renderElement}if(2&n.flags)return Hn(e,n.nodeIndex).renderText;if(20240&n.flags)return Wn(e,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${t}`)}function Zr(e){return new ei(e.renderer)}class ei{constructor(e){this.delegate=e}selectRootElement(e){return this.delegate.selectRootElement(e)}createElement(e,t){const[n,r]=Ir(t),i=this.delegate.createElement(r,n);return e&&this.delegate.appendChild(e,i),i}createViewRoot(e){return e}createTemplateAnchor(e){const t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t}createText(e,t){const n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n}projectNodes(e,t){for(let n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])}attachViewAfter(e,t){const n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e);for(let i=0;i<t.length;i++)this.delegate.insertBefore(n,t[i],r)}detachView(e){for(let t=0;t<e.length;t++){const n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(e,t){for(let n=0;n<t.length;n++)this.delegate.destroyNode(t[n])}listen(e,t,n){return this.delegate.listen(e,t,n)}listenGlobal(e,t,n){return this.delegate.listen(e,t,n)}setElementProperty(e,t,n){this.delegate.setProperty(e,t,n)}setElementAttribute(e,t,n){const[r,i]=Ir(t);null!=n?this.delegate.setAttribute(e,i,n,r):this.delegate.removeAttribute(e,i,r)}setBindingDebugInfo(e,t,n){}setElementClass(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)}setElementStyle(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)}invokeElementMethod(e,t,n){e[t].apply(e,n)}setText(e,t){this.delegate.setValue(e,t)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function ti(e,t,n,r){return new ni(e,t,n,r)}class ni{constructor(e,t,n,r){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){const t=e._def,n=e._providers=new Array(t.providers.length);for(let r=0;r<t.providers.length;r++){const i=t.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Lr(e,i))}}(this)}get(e,t=Mt.THROW_IF_NOT_FOUND,n=de.Default){let r=0;return n&de.SkipSelf?r|=1:n&de.Self&&(r|=4),Mr(this,{token:e,tokenKey:Xn(e),flags:r},t)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(an)}destroy(){if(this._destroyed)throw new Error(`The ng module ${ye(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(e,t){const n=e._def,r=new Set;for(let i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){const t=e._providers[i];if(t&&t!==kr){const e=t.ngOnDestroy;"function"!=typeof e||r.has(t)||(e.apply(t),r.add(t))}}}(this),this._destroyListeners.forEach(e=>e())}onDestroy(e){this._destroyListeners.push(e)}}const ri=Xn(fn),ii=Xn(gn),oi=Xn(hn),si=Xn(Vn),ai=Xn(Mn),ui=Xn(xt),li=Xn(Mt),ci=Xn(Ae);function hi(e,t,n,r,i,o,s,a){const u=[];if(s)for(let c in s){const[e,t]=s[c];u[e]={flags:8,name:c,nonMinifiedName:t,ns:null,securityContext:null,suffix:null}}const l=[];if(a)for(let c in a)l.push({type:1,propName:c,target:null,eventName:a[c]});return pi(e,t|=16384,n,r,i,i,o,u,l)}function di(e,t,n){return pi(-1,e|=16,null,0,t,t,n)}function fi(e,t,n,r,i){return pi(-1,e,t,0,n,r,i)}function pi(e,t,n,r,i,o,s,a,u){const{matchedQueries:l,references:c,matchedQueryIds:h}=mr(n);u||(u=[]),a||(a=[]),o=we(o);const d=gr(s,ye(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:h,references:c,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:Ar(a),outputs:u,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function mi(e,t){return bi(e,t)}function gi(e,t){let n=e;for(;n.parent&&!fr(n);)n=n.parent;return wi(n.parent,hr(n),!0,t.provider.value,t.provider.deps)}function yi(e,t){const n=wi(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(let r=0;r<t.outputs.length;r++){const i=t.outputs[r],o=n[i.propName];if(!Zt(o))throw new Error(`@Output ${i.propName} not initialized in '${n.constructor.name}'.`);{const n=o.subscribe(vi(e,t.parent.nodeIndex,i.eventName));e.disposables[t.outputIndex+r]=n.unsubscribe.bind(n)}}return n}function vi(e,t,n){return r=>lr(e,t,n,r)}function bi(e,t){const n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return wi(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,i){const o=i.length;switch(o){case 0:return r();case 1:return r(Si(e,t,n,i[0]));case 2:return r(Si(e,t,n,i[0]),Si(e,t,n,i[1]));case 3:return r(Si(e,t,n,i[0]),Si(e,t,n,i[1]),Si(e,t,n,i[2]));default:const s=Array(o);for(let r=0;r<o;r++)s[r]=Si(e,t,n,i[r]);return r(...s)}}(e,t.parent,n,r.value,r.deps);case 2048:return Si(e,t.parent,n,r.deps[0]);case 256:return r.value}}function wi(e,t,n,r,i){const o=i.length;switch(o){case 0:return new r;case 1:return new r(Si(e,t,n,i[0]));case 2:return new r(Si(e,t,n,i[0]),Si(e,t,n,i[1]));case 3:return new r(Si(e,t,n,i[0]),Si(e,t,n,i[1]),Si(e,t,n,i[2]));default:const s=new Array(o);for(let r=0;r<o;r++)s[r]=Si(e,t,n,i[r]);return new r(...s)}}const _i={};function Si(e,t,n,r,i=Mt.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const o=e;2&r.flags&&(i=null);const s=r.tokenKey;s===ui&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);let a=e;for(;a;){if(t)switch(s){case ri:return Zr(Ci(a,t,n));case ii:return Ci(a,t,n).renderer;case oi:return new hn(Gn(a,t.nodeIndex).renderElement);case si:return Gn(a,t.nodeIndex).viewContainer;case ai:if(t.element.template)return Gn(a,t.nodeIndex).template;break;case ui:return Wr(Ci(a,t,n));case li:case ci:return Yr(a,t);default:const e=(n?t.element.allProviders:t.element.publicProviders)[s];if(e){let t=Wn(a,e.nodeIndex);return t||(t={instance:bi(a,e)},a.nodes[e.nodeIndex]=t),t.instance}}n=fr(a),t=hr(a),a=a.parent,4&r.flags&&(a=null)}const u=o.root.injector.get(r.token,_i);return u!==_i||i===_i?u:o.root.ngModule.injector.get(r.token,i)}function Ci(e,t,n){let r;if(n)r=Gn(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!fr(r);)r=r.parent;return r}function Ei(e,t,n,r,i,o){if(32768&n.flags){const t=Gn(e,n.parent.nodeIndex).componentView;2&t.def.flags&&(t.state|=8)}if(t.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};const t=$t.unwrap(e.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new en(t,i,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=i,o}function Ti(e,t){if(!(e.def.nodeFlags&t))return;const n=e.def.nodes;let r=0;for(let i=0;i<n.length;i++){const o=n[i];let s=o.parent;for(!s&&o.flags&t&&Ai(e,i,o.flags&t,r++),0==(o.childFlags&t)&&(i+=o.childCount);s&&1&s.flags&&i===s.nodeIndex+s.childCount;)s.directChildFlags&t&&(r=Ii(e,s,t,r)),s=s.parent}}function Ii(e,t,n,r){for(let i=t.nodeIndex+1;i<=t.nodeIndex+t.childCount;i++){const t=e.def.nodes[i];t.flags&n&&Ai(e,i,t.flags&n,r++),i+=t.childCount}return r}function Ai(e,t,n,r){const i=Wn(e,t);if(!i)return;const o=i.instance;o&&($n.setCurrentNode(e,t),1048576&n&&zn(e,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&zn(e,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}const Ni=new Ie("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ke}),Di={},ki=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}(),xi=void 0;var Ri=["en",[["a","p"],["AM","PM"],xi],[["AM","PM"],xi,xi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xi,"{1} 'at' {0}",xi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];const Pi="en-US";let Oi=Pi;function Mi(e){var t;t="Expected localeId to be defined",null==e&&function(e){throw new Error(`ASSERTION ERROR: ${e}`)}(t),"string"==typeof e&&(Oi=e.toLowerCase().replace(/_/g,"-"))}class Li extends A{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r,i=e=>null,o=()=>null;e&&"object"==typeof e?(r=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(i=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(o=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,o);return e instanceof d&&e.add(s),s}}function Vi(){return this._results[Wt()]()}class Fi{constructor(){this.dirty=!0,this._results=[],this.changes=new Li,this.length=0;const e=Wt(),t=Fi.prototype;t[e]||(t[e]=Vi)}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e){this._results=function e(t,n){void 0===n&&(n=t);for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?(n===t&&(n=t.slice(0,r)),e(i,n)):n!==t&&n.push(i)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Ui=new Ie("Application Initializer");class qi{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();Xt(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}const ji=new Ie("AppId");function Bi(){return`${zi()}${zi()}${zi()}`}function zi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Hi=new Ie("Platform Initializer"),Gi=new Ie("Platform ID"),Wi=new Ie("appBootstrapListener");class Ki{log(e){console.log(e)}warn(e){console.warn(e)}}const Qi=new Ie("LocaleId"),$i=!1;function Yi(){throw new Error("Runtime compiler is not loaded")}const Ji=Yi,Xi=Yi,Zi=Yi,eo=Yi;class to{constructor(){this.compileModuleSync=Ji,this.compileModuleAsync=Xi,this.compileModuleAndAllComponentsSync=Zi,this.compileModuleAndAllComponentsAsync=eo}clearCache(){}clearCacheFor(e){}getModuleId(e){}}class no{}let ro,io;function oo(){const e=Te.wtf;return!(!e||!(ro=e.trace)||(io=ro.events,0))}const so=oo();function ao(e,t){return null}const uo=so?function(e,t=null){return io.createScope(e,t)}:(e,t)=>ao,lo=so?function(e,t){return ro.leaveScope(e,t),t}:(e,t)=>t,co=(()=>Promise.resolve(0))();function ho(e){"undefined"==typeof Zone?co.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class fo{constructor({enableLongStackTrace:e=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Li(!1),this.onMicrotaskEmpty=new Li(!1),this.onStable=new Li(!1),this.onError=new Li(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var t;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,i,o,s)=>{try{return yo(t),e.invokeTask(r,i,o,s)}finally{vo(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return yo(t),e.invoke(r,i,o,s,a)}finally{vo(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t.hasPendingMicrotasks=i.microTask,go(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(fo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,mo,po,po);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function po(){}const mo={};function go(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function yo(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function vo(e){e._nesting--,go(e)}class bo{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Li,this.onMicrotaskEmpty=new Li,this.onStable=new Li,this.onError=new Li}run(e){return e()}runGuarded(e){return e()}runOutsideAngular(e){return e()}runTask(e){return e()}}class wo{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fo.assertNotInAngularZone(),ho(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ho(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}class _o{constructor(){this._applications=new Map,Eo.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Eo.findTestabilityInTree(this,e,t)}}class So{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let Co,Eo=new So,To=function(e,t,n){return e.get(no).createCompiler([t]).compileModuleAsync(n)},Io=function(e){return e instanceof ln};const Ao=new Ie("AllowMultipleToken");class No{constructor(e,t){this.name=e,this.token=t}}function Do(e,t,n=[]){const r=`Platform: ${t}`,i=new Ie(r);return(t=[])=>{let o=ko();if(!o||o.injector.get(Ao,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0});!function(e){if(Co&&!Co.destroyed&&!Co.injector.get(Ao,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Co=e.get(xo);const t=e.get(Hi,null);t&&t.forEach(e=>e())}(Mt.create({providers:e,name:r}))}return function(e){const t=ko();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function ko(){return Co&&!Co.destroyed?Co:null}class xo{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n="noop"===(i=t?t.ngZone:void 0)?new bo:("zone.js"===i?void 0:i)||new fo({enableLongStackTrace:rt()}),r=[{provide:fo,useValue:n}];var i;return n.run(()=>{const t=Mt.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),o=i.injector.get(et,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return $i&&Mi(i.injector.get(Qi,Pi)||Pi),i.onDestroy(()=>Oo(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{o.handleError(e)}})),function(e,t,n){try{const r=n();return Xt(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,n,()=>{const e=i.injector.get(qi);return e.runInitializers(),e.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=Ro({},t);return To(this.injector,n,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Po);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${ye(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}function Ro(e,t){return Array.isArray(t)?t.reduce(Ro,e):Object.assign({},e,t)}let Po=(()=>{class e{constructor(e,t,n,r,i,o){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=rt(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new _(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new _(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{fo.assertNotInAngularZone(),ho(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{fo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];return D(r)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof _?e[0]:J(t)(G(e,n))}(s,a.pipe(oe()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof nn?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=Io(n)?null:this._injector.get(Be),i=n.create(Mt.NULL,[],t||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(wo,null);return o&&i.injector.get(_o).registerApplication(i.location.nativeElement,o),this._loadComponent(i),rt()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const t=e._tickScope();try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,lo(t)}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Oo(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Wi,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),Oo(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e._tickScope=uo("ApplicationRef#tick()"),e})();function Oo(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Mo{}const Lo="#",Vo="NgFactory";class Fo{}const Uo={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};class qo{constructor(e,t){this._compiler=e,this._config=t||Uo}load(e){return!$i&&this._compiler instanceof to?this.loadFactory(e):this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split(Lo);return void 0===r&&(r="default"),n("zn8P")(t).then(e=>e[r]).then(e=>jo(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split(Lo),i=Vo;return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>jo(e,t,r))}}function jo(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}class Bo{constructor(e,t){this.name=e,this.callback=t}}class zo{constructor(e,t,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=e,t&&t instanceof Ho&&t.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class Ho extends zo{constructor(e,t,n){super(e,t,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=e}addChild(e){e&&(this.childNodes.push(e),e.parent=this)}removeChild(e){const t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))}insertChildrenAfter(e,t){const n=this.childNodes.indexOf(e);-1!==n&&(this.childNodes.splice(n+1,0,...t),t.forEach(t=>{t.parent&&t.parent.removeChild(t),e.parent=this}))}insertBefore(e,t){const n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))}query(e){return this.queryAll(e)[0]||null}queryAll(e){const t=[];return function e(t,n,r){t.childNodes.forEach(t=>{t instanceof Ho&&(n(t)&&r.push(t),e(t,n,r))})}(this,e,t),t}queryAllNodes(e){const t=[];return function e(t,n,r){t instanceof Ho&&t.childNodes.forEach(t=>{n(t)&&r.push(t),t instanceof Ho&&e(t,n,r)})}(this,e,t),t}get children(){return this.childNodes.filter(e=>e instanceof Ho)}triggerEventHandler(e,t){this.listeners.forEach(n=>{n.name==e&&n.callback(t)})}}const Go=new Map,Wo=function(e){return Go.get(e)||null};function Ko(e){Go.set(e.nativeNode,e)}const Qo=Do(null,"core",[{provide:Gi,useValue:"unknown"},{provide:xo,deps:[Mt]},{provide:_o,deps:[]},{provide:Ki,deps:[]}]);function $o(){return Pn}function Yo(){return On}function Jo(e){return e?($i&&Mi(e),e):Pi}function Xo(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}class Zo{constructor(e){}}function es(e,t,n,r,i,o){e|=1;const{matchedQueries:s,references:a,matchedQueryIds:u}=mr(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:u,references:a,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?br(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Yn},provider:null,text:null,query:null,ngContent:null}}function ts(e,t,n,r,i,o,s=[],a,u,l,c,h){l||(l=Yn);const{matchedQueries:d,references:f,matchedQueryIds:p}=mr(n);let m=null,g=null;o&&([m,g]=Ir(o)),a=a||[];const y=new Array(a.length);for(let w=0;w<a.length;w++){const[e,t,n]=a[w],[r,i]=Ir(t);let o=void 0,s=void 0;switch(15&e){case 4:s=n;break;case 1:case 8:o=n}y[w]={flags:e,ns:r,name:i,nonMinifiedName:i,securityContext:o,suffix:s}}u=u||[];const v=new Array(u.length);for(let w=0;w<u.length;w++){const[e,t]=u[w];v[w]={type:0,target:e,eventName:t,propName:null}}const b=(s=s||[]).map(([e,t])=>{const[n,r]=Ir(e);return[n,r,t]});return h=function(e){if(e&&e.id===er){const t=null!=e.encapsulation&&e.encapsulation!==We.None||e.styles.length||Object.keys(e.data).length;e.id=t?`c${rr++}`:tr}return e&&e.id===tr&&(e=null),e||null}(h),c&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:p,references:f,ngContentIndex:r,childCount:i,bindings:y,bindingFlags:Ar(y),outputs:v,element:{ns:m,name:g,attrs:b,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:l||Yn},provider:null,text:null,query:null,ngContent:null}}function ns(e,t,n){const r=n.element,i=e.root.selectorOrNode,o=e.renderer;let s;if(e.parent||!i){s=r.name?o.createElement(r.name,r.ns):o.createComment("");const i=yr(e,t,n);i&&o.appendChild(i,s)}else s=o.selectRootElement(i,!!r.componentRendererType&&r.componentRendererType.encapsulation===We.ShadowDom);if(r.attrs)for(let a=0;a<r.attrs.length;a++){const[e,t,n]=r.attrs[a];o.setAttribute(s,t,n,e)}return s}function rs(e,t,n,r){for(let s=0;s<n.outputs.length;s++){const a=n.outputs[s],u=is(e,n.nodeIndex,(o=a.eventName,(i=a.target)?`${i}:${o}`:o));let l=a.target,c=e;"component"===a.target&&(l=null,c=t);const h=c.renderer.listen(l||r,a.eventName,u);e.disposables[n.outputIndex+s]=h}var i,o}function is(e,t,n){return r=>lr(e,t,n,r)}function os(e,t,n,r){if(!or(e,t,n,r))return!1;const i=t.bindings[n],o=Gn(e,t.nodeIndex),s=o.renderElement,a=i.name;switch(15&i.flags){case 1:!function(e,t,n,r,i,o){const s=t.securityContext;let a=s?e.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;const u=e.renderer;null!=o?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(e,i,s,i.ns,a,r);break;case 2:!function(e,t,n,r){const i=e.renderer;r?i.addClass(t,n):i.removeClass(t,n)}(e,s,a,r);break;case 4:!function(e,t,n,r,i){let o=e.root.sanitizer.sanitize(Tt.STYLE,i);if(null!=o){o=o.toString();const e=t.suffix;null!=e&&(o+=e)}else o=null;const s=e.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(e,i,s,a,r);break;case 8:!function(e,t,n,r,i){const o=t.securityContext;let s=o?e.root.sanitizer.sanitize(o,i):i;e.renderer.setProperty(n,r,s)}(33554432&t.flags&&32&i.flags?o.componentView:e,i,s,a,r)}return!0}function ss(e){const t=e.def.nodeMatchedQueries;for(;e.parent&&pr(e);){let n=e.parentNodeDef;e=e.parent;const r=n.nodeIndex+n.childCount;for(let i=0;i<=r;i++){const r=e.def.nodes[i];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&t)===r.query.filterId&&Qn(e,i).setDirty(),!(1&r.flags&&i+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(i+=r.childCount)}}if(134217728&e.def.nodeFlags)for(let n=0;n<e.def.nodes.length;n++){const t=e.def.nodes[n];134217728&t.flags&&536870912&t.flags&&Qn(e,n).setDirty(),n+=t.childCount}}function as(e,t){const n=Qn(e,t.nodeIndex);if(!n.dirty)return;let r,i=void 0;if(67108864&t.flags){const n=t.parent.parent;i=us(e,n.nodeIndex,n.nodeIndex+n.childCount,t.query,[]),r=Wn(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(i=us(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(i);const o=t.query.bindings;let s=!1;for(let a=0;a<o.length;a++){const e=o[a];let t;switch(e.bindingType){case 0:t=n.first;break;case 1:t=n,s=!0}r[e.propName]=t}s&&n.notifyOnChanges()}function us(e,t,n,r,i){for(let o=t;o<=n;o++){const t=e.def.nodes[o],n=t.matchedQueries[r.id];if(null!=n&&i.push(ls(e,t,n)),1&t.flags&&t.element.template&&(t.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=Gn(e,o);if((t.childMatchedQueries&r.filterId)===r.filterId&&(us(e,o+1,o+t.childCount,r,i),o+=t.childCount),16777216&t.flags){const e=n.viewContainer._embeddedViews;for(let t=0;t<e.length;t++){const o=e[t],s=cr(o);s&&s===n&&us(o,0,o.def.nodes.length-1,r,i)}}const s=n.template._projectedViews;if(s)for(let e=0;e<s.length;e++){const t=s[e];us(t,0,t.def.nodes.length-1,r,i)}}(t.childMatchedQueries&r.filterId)!==r.filterId&&(o+=t.childCount)}return i}function ls(e,t,n){if(null!=n)switch(n){case 1:return Gn(e,t.nodeIndex).renderElement;case 0:return new hn(Gn(e,t.nodeIndex).renderElement);case 2:return Gn(e,t.nodeIndex).template;case 3:return Gn(e,t.nodeIndex).viewContainer;case 4:return Wn(e,t.nodeIndex).instance}}function cs(e,t,n){const r=yr(e,t,n);r&&Sr(e,n.ngContent.index,1,r,null,void 0)}function hs(e,t){return fs(128,e,new Array(t+1))}function ds(e,t){return fs(32,e,new Array(t))}function fs(e,t,n){const r=new Array(n.length);for(let i=0;i<n.length;i++){const e=n[i];r[i]={flags:8,name:e,ns:null,nonMinifiedName:e,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:Ar(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function ps(e,t,n){const r=new Array(n.length-1);for(let i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function ms(e,t,n){let r;const i=e.renderer;r=i.createText(n.text.prefix);const o=yr(e,t,n);return o&&i.appendChild(o,r),{renderText:r}}function gs(e,t){return(null!=e?e.toString():"")+t.suffix}function ys(e,t,n,r){let i=0,o=0,s=0,a=0,u=0,l=null,c=null,h=!1,d=!1,f=null;for(let p=0;p<t.length;p++){const e=t[p];if(e.nodeIndex=p,e.parent=l,e.bindingIndex=i,e.outputIndex=o,e.renderParent=c,s|=e.flags,u|=e.matchedQueryIds,e.element){const t=e.element;t.publicProviders=l?l.element.publicProviders:Object.create(null),t.allProviders=t.publicProviders,h=!1,d=!1,e.element.template&&(u|=e.element.template.nodeMatchedQueries)}if(bs(l,e,t.length),i+=e.bindings.length,o+=e.outputs.length,!c&&3&e.flags&&(f=e),20224&e.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);const t=0!=(32768&e.flags);0==(8192&e.flags)||t?l.element.publicProviders[Xn(e.provider.token)]=e:(d||(d=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Xn(e.provider.token)]=e),t&&(l.element.componentProvider=e)}if(l?(l.childFlags|=e.flags,l.directChildFlags|=e.flags,l.childMatchedQueries|=e.matchedQueryIds,e.element&&e.element.template&&(l.childMatchedQueries|=e.element.template.nodeMatchedQueries)):a|=e.flags,e.childCount>0)l=e,vs(e)||(c=e);else for(;l&&p===l.nodeIndex+l.childCount;){const e=l.parent;e&&(e.childFlags|=l.childFlags,e.childMatchedQueries|=l.childMatchedQueries),c=(l=e)&&vs(l)?l.renderParent:l}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:u,flags:e,nodes:t,updateDirectives:n||Yn,updateRenderer:r||Yn,handleEvent:(e,n,r,i)=>t[n].element.handleEvent(e,r,i),bindingCount:i,outputCount:o,lastRenderRootNode:f}}function vs(e){return 0!=(1&e.flags)&&null===e.element.name}function bs(e,t,n){const r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${t.nodeIndex}!`)}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${t.nodeIndex}!`);if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${t.nodeIndex}!`);if(134217728&t.flags&&e)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${t.nodeIndex}!`)}if(t.childCount){const r=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=r&&t.nodeIndex+t.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${t.nodeIndex}!`)}}function ws(e,t,n,r){const i=Cs(e.root,e.renderer,e,t,n);return Es(i,e.component,r),Ts(i),i}function _s(e,t,n){const r=Cs(e,e.renderer,null,null,t);return Es(r,n,n),Ts(r),r}function Ss(e,t,n,r){const i=t.element.componentRendererType;let o;return o=i?e.root.rendererFactory.createRenderer(r,i):e.root.renderer,Cs(e.root,o,e,t.element.componentProvider,n)}function Cs(e,t,n,r,i){const o=new Array(i.nodes.length),s=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:e,renderer:t,oldValues:new Array(i.bindingCount),disposables:s,initIndex:-1}}function Es(e,t,n){e.component=t,e.context=n}function Ts(e){let t;fr(e)&&(t=Gn(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);const n=e.def,r=e.nodes;for(let i=0;i<n.nodes.length;i++){const o=n.nodes[i];let s;switch($n.setCurrentNode(e,i),201347067&o.flags){case 1:const n=ns(e,t,o);let a=void 0;if(33554432&o.flags){const t=br(o.element.componentView);a=$n.createComponentView(e,o,t,n)}rs(e,a,o,n),s={renderElement:n,componentView:a,viewContainer:null,template:o.element.template?Qr(e,o):void 0},16777216&o.flags&&(s.viewContainer=Hr(e,o,s));break;case 2:s=ms(e,t,o);break;case 512:case 1024:case 2048:case 256:(s=r[i])||4096&o.flags||(s={instance:mi(e,o)});break;case 16:s={instance:gi(e,o)};break;case 16384:(s=r[i])||(s={instance:yi(e,o)}),32768&o.flags&&Es(Gn(e,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new Fi;break;case 8:cs(e,t,o),s=void 0}r[i]=s}Os(e,Ps.CreateViewNodes),Fs(e,201326592,268435456,0)}function Is(e){Ds(e),$n.updateDirectives(e,1),Ms(e,Ps.CheckNoChanges),$n.updateRenderer(e,1),Os(e,Ps.CheckNoChanges),e.state&=-97}function As(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Bn(e,0,256),Ds(e),$n.updateDirectives(e,0),Ms(e,Ps.CheckAndUpdate),Fs(e,67108864,536870912,0);let t=Bn(e,256,512);Ti(e,2097152|(t?1048576:0)),$n.updateRenderer(e,0),Os(e,Ps.CheckAndUpdate),Fs(e,134217728,536870912,0),Ti(e,8388608|((t=Bn(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Bn(e,768,1024)}function Ns(e,t,n,r,i,o,s,a,u,l,c,h,d){return 0===n?function(e,t,n,r,i,o,s,a,u,l,c,h){switch(201347067&t.flags){case 1:return function(e,t,n,r,i,o,s,a,u,l,c,h){const d=t.bindings.length;let f=!1;return d>0&&os(e,t,0,n)&&(f=!0),d>1&&os(e,t,1,r)&&(f=!0),d>2&&os(e,t,2,i)&&(f=!0),d>3&&os(e,t,3,o)&&(f=!0),d>4&&os(e,t,4,s)&&(f=!0),d>5&&os(e,t,5,a)&&(f=!0),d>6&&os(e,t,6,u)&&(f=!0),d>7&&os(e,t,7,l)&&(f=!0),d>8&&os(e,t,8,c)&&(f=!0),d>9&&os(e,t,9,h)&&(f=!0),f}(e,t,n,r,i,o,s,a,u,l,c,h);case 2:return function(e,t,n,r,i,o,s,a,u,l,c,h){let d=!1;const f=t.bindings,p=f.length;if(p>0&&or(e,t,0,n)&&(d=!0),p>1&&or(e,t,1,r)&&(d=!0),p>2&&or(e,t,2,i)&&(d=!0),p>3&&or(e,t,3,o)&&(d=!0),p>4&&or(e,t,4,s)&&(d=!0),p>5&&or(e,t,5,a)&&(d=!0),p>6&&or(e,t,6,u)&&(d=!0),p>7&&or(e,t,7,l)&&(d=!0),p>8&&or(e,t,8,c)&&(d=!0),p>9&&or(e,t,9,h)&&(d=!0),d){let d=t.text.prefix;p>0&&(d+=gs(n,f[0])),p>1&&(d+=gs(r,f[1])),p>2&&(d+=gs(i,f[2])),p>3&&(d+=gs(o,f[3])),p>4&&(d+=gs(s,f[4])),p>5&&(d+=gs(a,f[5])),p>6&&(d+=gs(u,f[6])),p>7&&(d+=gs(l,f[7])),p>8&&(d+=gs(c,f[8])),p>9&&(d+=gs(h,f[9]));const m=Hn(e,t.nodeIndex).renderText;e.renderer.setValue(m,d)}return d}(e,t,n,r,i,o,s,a,u,l,c,h);case 16384:return function(e,t,n,r,i,o,s,a,u,l,c,h){const d=Wn(e,t.nodeIndex),f=d.instance;let p=!1,m=void 0;const g=t.bindings.length;return g>0&&ir(e,t,0,n)&&(p=!0,m=Ei(e,d,t,0,n,m)),g>1&&ir(e,t,1,r)&&(p=!0,m=Ei(e,d,t,1,r,m)),g>2&&ir(e,t,2,i)&&(p=!0,m=Ei(e,d,t,2,i,m)),g>3&&ir(e,t,3,o)&&(p=!0,m=Ei(e,d,t,3,o,m)),g>4&&ir(e,t,4,s)&&(p=!0,m=Ei(e,d,t,4,s,m)),g>5&&ir(e,t,5,a)&&(p=!0,m=Ei(e,d,t,5,a,m)),g>6&&ir(e,t,6,u)&&(p=!0,m=Ei(e,d,t,6,u,m)),g>7&&ir(e,t,7,l)&&(p=!0,m=Ei(e,d,t,7,l,m)),g>8&&ir(e,t,8,c)&&(p=!0,m=Ei(e,d,t,8,c,m)),g>9&&ir(e,t,9,h)&&(p=!0,m=Ei(e,d,t,9,h,m)),m&&f.ngOnChanges(m),65536&t.flags&&zn(e,256,t.nodeIndex)&&f.ngOnInit(),262144&t.flags&&f.ngDoCheck(),p}(e,t,n,r,i,o,s,a,u,l,c,h);case 32:case 64:case 128:return function(e,t,n,r,i,o,s,a,u,l,c,h){const d=t.bindings;let f=!1;const p=d.length;if(p>0&&or(e,t,0,n)&&(f=!0),p>1&&or(e,t,1,r)&&(f=!0),p>2&&or(e,t,2,i)&&(f=!0),p>3&&or(e,t,3,o)&&(f=!0),p>4&&or(e,t,4,s)&&(f=!0),p>5&&or(e,t,5,a)&&(f=!0),p>6&&or(e,t,6,u)&&(f=!0),p>7&&or(e,t,7,l)&&(f=!0),p>8&&or(e,t,8,c)&&(f=!0),p>9&&or(e,t,9,h)&&(f=!0),f){const f=Kn(e,t.nodeIndex);let m;switch(201347067&t.flags){case 32:m=new Array(d.length),p>0&&(m[0]=n),p>1&&(m[1]=r),p>2&&(m[2]=i),p>3&&(m[3]=o),p>4&&(m[4]=s),p>5&&(m[5]=a),p>6&&(m[6]=u),p>7&&(m[7]=l),p>8&&(m[8]=c),p>9&&(m[9]=h);break;case 64:m={},p>0&&(m[d[0].name]=n),p>1&&(m[d[1].name]=r),p>2&&(m[d[2].name]=i),p>3&&(m[d[3].name]=o),p>4&&(m[d[4].name]=s),p>5&&(m[d[5].name]=a),p>6&&(m[d[6].name]=u),p>7&&(m[d[7].name]=l),p>8&&(m[d[8].name]=c),p>9&&(m[d[9].name]=h);break;case 128:const e=n;switch(p){case 1:m=e.transform(n);break;case 2:m=e.transform(r);break;case 3:m=e.transform(r,i);break;case 4:m=e.transform(r,i,o);break;case 5:m=e.transform(r,i,o,s);break;case 6:m=e.transform(r,i,o,s,a);break;case 7:m=e.transform(r,i,o,s,a,u);break;case 8:m=e.transform(r,i,o,s,a,u,l);break;case 9:m=e.transform(r,i,o,s,a,u,l,c);break;case 10:m=e.transform(r,i,o,s,a,u,l,c,h)}}f.value=m}return f}(e,t,n,r,i,o,s,a,u,l,c,h);default:throw"unreachable"}}(e,t,r,i,o,s,a,u,l,c,h,d):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){let r=!1;for(let i=0;i<n.length;i++)os(e,t,i,n[i])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){const r=t.bindings;let i=!1;for(let o=0;o<n.length;o++)or(e,t,o,n[o])&&(i=!0);if(i){let i="";for(let e=0;e<n.length;e++)i+=gs(n[e],r[e]);i=t.text.prefix+i;const o=Hn(e,t.nodeIndex).renderText;e.renderer.setValue(o,i)}return i}(e,t,n);case 16384:return function(e,t,n){const r=Wn(e,t.nodeIndex),i=r.instance;let o=!1,s=void 0;for(let a=0;a<n.length;a++)ir(e,t,a,n[a])&&(o=!0,s=Ei(e,r,t,a,n[a],s));return s&&i.ngOnChanges(s),65536&t.flags&&zn(e,256,t.nodeIndex)&&i.ngOnInit(),262144&t.flags&&i.ngDoCheck(),o}(e,t,n);case 32:case 64:case 128:return function(e,t,n){const r=t.bindings;let i=!1;for(let o=0;o<n.length;o++)or(e,t,o,n[o])&&(i=!0);if(i){const i=Kn(e,t.nodeIndex);let o;switch(201347067&t.flags){case 32:o=n;break;case 64:o={};for(let i=0;i<n.length;i++)o[r[i].name]=n[i];break;case 128:const e=n[0],t=n.slice(1);o=e.transform(...t)}i.value=o}return i}(e,t,n);default:throw"unreachable"}}(e,t,r)}function Ds(e){const t=e.def;if(4&t.nodeFlags)for(let n=0;n<t.nodes.length;n++){const r=t.nodes[n];if(4&r.flags){const t=Gn(e,n).template._projectedViews;if(t)for(let n=0;n<t.length;n++){const r=t[n];r.state|=32,ur(r,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function ks(e,t,n,r,i,o,s,a,u,l,c,h,d){return 0===n?function(e,t,n,r,i,o,s,a,u,l,c,h){const d=t.bindings.length;d>0&&sr(e,t,0,n),d>1&&sr(e,t,1,r),d>2&&sr(e,t,2,i),d>3&&sr(e,t,3,o),d>4&&sr(e,t,4,s),d>5&&sr(e,t,5,a),d>6&&sr(e,t,6,u),d>7&&sr(e,t,7,l),d>8&&sr(e,t,8,c),d>9&&sr(e,t,9,h)}(e,t,r,i,o,s,a,u,l,c,h,d):function(e,t,n){for(let r=0;r<n.length;r++)sr(e,t,r,n[r])}(e,t,r),!1}function xs(e,t){if(Qn(e,t.nodeIndex).dirty)throw Un($n.createDebugContext(e,t.nodeIndex),`Query ${t.query.id} not dirty`,`Query ${t.query.id} dirty`,0!=(1&e.state))}function Rs(e){if(!(128&e.state)){if(Ms(e,Ps.Destroy),Os(e,Ps.Destroy),Ti(e,131072),e.disposables)for(let t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(!(16&e.state))return;const t=cr(e);if(t){const n=t.template._projectedViews;n&&(Ge(n,n.indexOf(e)),$n.dirtyParentQueries(e))}}(e),e.renderer.destroyNode&&function(e){const t=e.def.nodes.length;for(let n=0;n<t;n++){const t=e.def.nodes[n];1&t.flags?e.renderer.destroyNode(Gn(e,n).renderElement):2&t.flags?e.renderer.destroyNode(Hn(e,n).renderText):(67108864&t.flags||134217728&t.flags)&&Qn(e,n).destroy()}}(e),fr(e)&&e.renderer.destroy(),e.state|=128}}const Ps=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function Os(e,t){const n=e.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];33554432&i.flags?Ls(Gn(e,r).componentView,t):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Ms(e,t){const n=e.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];if(16777216&i.flags){const n=Gn(e,r).viewContainer._embeddedViews;for(let e=0;e<n.length;e++)Ls(n[e],t)}else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Ls(e,t){const n=e.state;switch(t){case Ps.CheckNoChanges:0==(128&n)&&(12==(12&n)?Is(e):64&n&&Vs(e,Ps.CheckNoChangesProjectedViews));break;case Ps.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Is(e):64&n&&Vs(e,t));break;case Ps.CheckAndUpdate:0==(128&n)&&(12==(12&n)?As(e):64&n&&Vs(e,Ps.CheckAndUpdateProjectedViews));break;case Ps.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?As(e):64&n&&Vs(e,t));break;case Ps.Destroy:Rs(e);break;case Ps.CreateViewNodes:Ts(e)}}function Vs(e,t){Ms(e,t),Os(e,t)}function Fs(e,t,n,r){if(!(e.def.nodeFlags&t&&e.def.nodeFlags&n))return;const i=e.def.nodes.length;for(let o=0;o<i;o++){const i=e.def.nodes[o];if(i.flags&t&&i.flags&n)switch($n.setCurrentNode(e,i.nodeIndex),r){case 0:as(e,i);break;case 1:xs(e,i)}i.childFlags&t&&i.childFlags&n||(o+=i.childCount)}}let Us=!1;function qs(e,t,n,r,i,o){const s=i.injector.get(pn);return _s(Bs(e,i,s,t,n),r,o)}function js(e,t,n,r,i,o){const s=i.injector.get(pn),a=Bs(e,i,new wa(s),t,n),u=Xs(r);return va(ia.create,_s,null,[a,u,o])}function Bs(e,t,n,r,i){const o=t.injector.get(It),s=t.injector.get(et),a=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:a,errorHandler:s}}function zs(e,t,n,r){const i=Xs(n);return va(ia.create,ws,null,[e,t,i,r])}function Hs(e,t,n,r){return n=Qs.get(t.element.componentProvider.provider.token)||Xs(n),va(ia.create,Ss,null,[e,t,n,r])}function Gs(e,t,n,r){return ti(e,t,n,function(e){const{hasOverrides:t,hasDeprecatedOverrides:n}=function(e){let t=!1,n=!1;return 0===Ws.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(e=>{const r=Ws.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)}),e.modules.forEach(e=>{Ks.forEach((r,i)=>{me(i).providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e);return t?(function(e){for(let t=0;t<e.providers.length;t++){const r=e.providers[t];n&&(r.flags|=4096);const i=Ws.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=gr(i.deps),r.value=i.value)}if(Ks.size>0){let t=new Set(e.modules);Ks.forEach((r,i)=>{if(t.has(me(i).providedIn)){let t={token:i,flags:r.flags|(n?4096:0),deps:gr(r.deps),value:r.value,index:e.providers.length};e.providers.push(t),e.providersByKey[Xn(i)]=t}})}}(e=e.factory(()=>Yn)),e):e}(r))}const Ws=new Map,Ks=new Map,Qs=new Map;function $s(e){let t;Ws.set(e.token,e),"function"==typeof e.token&&(t=me(e.token))&&"function"==typeof t.providedIn&&Ks.set(e.token,e)}function Ys(e,t){const n=br(t.viewDefFactory),r=br(n.nodes[0].element.componentView);Qs.set(e,r)}function Js(){Ws.clear(),Ks.clear(),Qs.clear()}function Xs(e){if(0===Ws.size)return e;const t=function(e){const t=[];let n=null;for(let r=0;r<e.nodes.length;r++){const i=e.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Ws.has(i.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(()=>Yn);for(let r=0;r<t.length;r++)n(e,t[r]);return e;function n(e,t){for(let n=t+1;n<e.nodes.length;n++){const t=e.nodes[n];if(1&t.flags)return;if(3840&t.flags){const e=t.provider,n=Ws.get(e.token);n&&(t.flags=-3841&t.flags|n.flags,e.deps=gr(n.deps),e.value=n.value)}}}}function Zs(e,t,n,r,i,o,s,a,u,l,c,h,d){const f=e.def.nodes[t];return Ns(e,f,n,r,i,o,s,a,u,l,c,h,d),224&f.flags?Kn(e,t).value:void 0}function ea(e,t,n,r,i,o,s,a,u,l,c,h,d){const f=e.def.nodes[t];return ks(e,f,n,r,i,o,s,a,u,l,c,h,d),224&f.flags?Kn(e,t).value:void 0}function ta(e){return va(ia.detectChanges,As,null,[e])}function na(e){return va(ia.checkNoChanges,Is,null,[e])}function ra(e){return va(ia.destroy,Rs,null,[e])}const ia=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();let oa,sa,aa;function ua(e,t){sa=e,aa=t}function la(e,t,n,r){return ua(e,t),va(ia.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function ca(e,t){if(128&e.state)throw jn(ia[oa]);return ua(e,pa(e,0)),e.def.updateDirectives((function(e,n,r,...i){const o=e.def.nodes[n];return 0===t?da(e,o,r,i):fa(e,o,r,i),16384&o.flags&&ua(e,pa(e,n)),224&o.flags?Kn(e,o.nodeIndex).value:void 0}),e)}function ha(e,t){if(128&e.state)throw jn(ia[oa]);return ua(e,ma(e,0)),e.def.updateRenderer((function(e,n,r,...i){const o=e.def.nodes[n];return 0===t?da(e,o,r,i):fa(e,o,r,i),3&o.flags&&ua(e,ma(e,n)),224&o.flags?Kn(e,o.nodeIndex).value:void 0}),e)}function da(e,t,n,r){if(Ns(e,t,n,...r)){const s=1===n?r[0]:r;if(16384&t.flags){const n={};for(let e=0;e<t.bindings.length;e++){const r=t.bindings[e],a=s[e];8&r.flags&&(n[(i=r.nonMinifiedName,o=void 0,o=i.replace(/[$@]/g,"_"),`ng-reflect-${i=o.replace(Dt,(...e)=>"-"+e[1].toLowerCase())}`)]=kt(a))}const r=t.parent,a=Gn(e,r.nodeIndex).renderElement;if(r.element.name)for(let t in n){const r=n[t];null!=r?e.renderer.setAttribute(a,t,r):e.renderer.removeAttribute(a,t)}else e.renderer.setValue(a,`bindings=${JSON.stringify(n,null,2)}`)}}var i,o}function fa(e,t,n,r){ks(e,t,n,...r)}function pa(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(16384&t.flags&&t.bindings&&t.bindings.length)return n}return null}function ma(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(3&t.flags&&t.bindings&&t.bindings.length)return n}return null}class ga{constructor(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];let n=this.nodeDef,r=e;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=hr(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return Gn(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Yr(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const e=[];if(this.elDef)for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e}get references(){const e={};if(this.elDef){ya(this.elView,this.elDef,e);for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&ya(this.elView,n,e),t+=n.childCount}}return e}get componentRenderElement(){const e=function(e){for(;e&&!fr(e);)e=e.parent;return e.parent?Gn(e.parent,hr(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?dr(this.view,this.nodeDef):dr(this.elView,this.elDef)}logError(e,...t){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const i=function(e,t){let n=-1;for(let r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}(n,r);let o=-1;n.factory(()=>++o===i?e.error.bind(e,...t):Yn),o<i&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error(...t))}}function ya(e,t,n){for(let r in t.references)n[r]=ls(e,t,t.references[r])}function va(e,t,n,r){const i=oa,o=sa,s=aa;try{oa=e;const a=t.apply(n,r);return sa=o,aa=s,oa=i,a}catch(l){if(Je(l)||!sa)throw l;throw a=l,u=ba(),a instanceof Error||(a=new Error(a.toString())),qn(a,u),a}var a,u}function ba(){return sa?new ga(sa,aa):null}class wa{constructor(e){this.delegate=e}createRenderer(e,t){return new _a(this.delegate.createRenderer(e,t))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class _a{constructor(e){this.delegate=e,this.debugContextFactory=ba,this.data=this.delegate.data}createDebugContext(e){return this.debugContextFactory(e)}destroyNode(e){const t=Wo(e);!function(e){Go.delete(e.nativeNode)}(t),t instanceof zo&&(t.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(e)}destroy(){this.delegate.destroy()}createElement(e,t){const n=this.delegate.createElement(e,t),r=this.createDebugContext(n);if(r){const t=new Ho(n,null,r);t.name=e,Ko(t)}return n}createComment(e){const t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&Ko(new zo(t,null,n)),t}createText(e){const t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&Ko(new zo(t,null,n)),t}appendChild(e,t){const n=Wo(e),r=Wo(t);n&&r&&n instanceof Ho&&n.addChild(r),this.delegate.appendChild(e,t)}insertBefore(e,t,n){const r=Wo(e),i=Wo(t),o=Wo(n);r&&i&&r instanceof Ho&&r.insertBefore(o,i),this.delegate.insertBefore(e,t,n)}removeChild(e,t){const n=Wo(e),r=Wo(t);n&&r&&n instanceof Ho&&n.removeChild(r),this.delegate.removeChild(e,t)}selectRootElement(e,t){const n=this.delegate.selectRootElement(e,t),r=ba();return r&&Ko(new Ho(n,null,r)),n}setAttribute(e,t,n,r){const i=Wo(e);i&&i instanceof Ho&&(i.attributes[r?r+":"+t:t]=n),this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){const r=Wo(e);r&&r instanceof Ho&&(r.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)}addClass(e,t){const n=Wo(e);n&&n instanceof Ho&&(n.classes[t]=!0),this.delegate.addClass(e,t)}removeClass(e,t){const n=Wo(e);n&&n instanceof Ho&&(n.classes[t]=!1),this.delegate.removeClass(e,t)}setStyle(e,t,n,r){const i=Wo(e);i&&i instanceof Ho&&(i.styles[t]=n),this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){const r=Wo(e);r&&r instanceof Ho&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){const r=Wo(e);r&&r instanceof Ho&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)}listen(e,t,n){if("string"!=typeof e){const r=Wo(e);r&&r.listeners.push(new Bo(t,n))}return this.delegate.listen(e,t,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setValue(e,t){return this.delegate.setValue(e,t)}}function Sa(e,t,n){return new Ca(e,t,n)}class Ca extends ze{constructor(e,t,n){super(),this.moduleType=e,this._bootstrapComponents=t,this._ngModuleDefFactory=n}create(e){!function(){if(Us)return;Us=!0;const e=rt()?{setCurrentNode:ua,createRootView:js,createEmbeddedView:zs,createComponentView:Hs,createNgModuleRef:Gs,overrideProvider:$s,overrideComponentView:Ys,clearOverrides:Js,checkAndUpdateView:ta,checkNoChangesView:na,destroyView:ra,createDebugContext:(e,t)=>new ga(e,t),handleEvent:la,updateDirectives:ca,updateRenderer:ha}:{setCurrentNode:()=>{},createRootView:qs,createEmbeddedView:ws,createComponentView:Ss,createNgModuleRef:ti,overrideProvider:Yn,overrideComponentView:Yn,clearOverrides:Yn,checkAndUpdateView:As,checkNoChangesView:Is,destroyView:Rs,createDebugContext:(e,t)=>new ga(e,t),handleEvent:(e,t,n,r)=>e.def.handleEvent(e,t,n,r),updateDirectives:(e,t)=>e.def.updateDirectives(0===t?Zs:ea,e),updateRenderer:(e,t)=>e.def.updateRenderer(0===t?Zs:ea,e)};$n.setCurrentNode=e.setCurrentNode,$n.createRootView=e.createRootView,$n.createEmbeddedView=e.createEmbeddedView,$n.createComponentView=e.createComponentView,$n.createNgModuleRef=e.createNgModuleRef,$n.overrideProvider=e.overrideProvider,$n.overrideComponentView=e.overrideComponentView,$n.clearOverrides=e.clearOverrides,$n.checkAndUpdateView=e.checkAndUpdateView,$n.checkNoChangesView=e.checkNoChangesView,$n.destroyView=e.destroyView,$n.resolveDep=Si,$n.createDebugContext=e.createDebugContext,$n.handleEvent=e.handleEvent,$n.updateDirectives=e.updateDirectives,$n.updateRenderer=e.updateRenderer,$n.dirtyParentQueries=ss}();const t=function(e){const t=Array.from(e.providers),n=Array.from(e.modules),r={};for(const i in e.providersByKey)r[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(br(this._ngModuleDefFactory));return $n.createNgModuleRef(this.moduleType,e||Mt.NULL,this._bootstrapComponents,t)}}class Ea{constructor(){this.search=null,this.semester=[],this.minRate=null,this.maxRate=null,this.minECTS=null,this.maxECTS=null}}class Ta{constructor(e){this.courseService=e,this.courseFilters=new Ea}ngOnInit(){this.courseService.getCourses().subscribe(e=>this.courses=e),console.log(this.courses)}addCourse(e){e.id=Math.max.apply(Math,this.courses.map(e=>e.id))+1,this.courses.push(e)}applyCourseFilters(e){this.courseFilters=e}}class Ia{static typeLabel(e){switch(e){case Aa.Lecture:return"Wyk\u0142ad";case Aa.Auditory:return"\u0106wiczenia audytoryjne";case Aa.Laboratory:return"Laboratoria";case Aa.Project:return"Projekt";default:return""}}}var Aa=function(e){return e[e.Lecture=0]="Lecture",e[e.Auditory=1]="Auditory",e[e.Laboratory=2]="Laboratory",e[e.Project=3]="Project",e}({});class Na{constructor(e,t,n,r){this.courseService=e,this.enrollmentAndRRatingService=t,this.route=n,this.authService=r,this.enoughSeats=!0,this.enrollmentPossibleMessage=""}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");this.courseService.getCourse(e).subscribe(t=>{this.course=t,this.course.id=e,this.courseTypeLabel=Ia.typeLabel(this.course.type),this.availableSeats=this.course.seats-this.takenSeats,this.availableSeats<=0?(this.enoughSeats=!1,this.enrollmentPossibleMessage="Brak dost\u0119pnych miejsc na ten kurs."):(this.enoughSeats=!0,this.enrollmentPossibleMessage="")});var t=this.authService.getUser().email;this.enrollmentAndRRatingService.getEnrollments().subscribe(n=>{const r=n.some(n=>n.courseId===e&&n.email===t),i=n.some(n=>n.courseId===e&&n.email===t&&null!=n.rate);i&&(this.userRate=n.find(n=>n.courseId===e&&n.email===t).rate),this.notEnrolled=Promise.resolve(!r),this.enrolledAndNotRated=Promise.resolve(r&&!i),this.enrolledAndRated=Promise.resolve(r&&i),this.rate=this.enrollmentAndRRatingService.averageCourseRating(n.filter(t=>t.courseId===e)).toString(),this.participants=n.filter(t=>t.courseId===e).map(e=>e.email),this.takenSeats=n.filter(t=>t.courseId===e).length,this.availableSeats=this.course.seats-this.takenSeats,this.availableSeats<=0?(this.enoughSeats=!1,this.enrollmentPossibleMessage="Brak dost\u0119pnych miejsc na ten kurs."):(this.enoughSeats=!0,this.enrollmentPossibleMessage="")})}enroll(){this.enrollmentAndRRatingService.enrollCurrentUserFor(this.course.id)&&(console.log("ZMNIEJSZAM ILO\u015a\u0106 MIEJSC"),this.availableSeats=this.availableSeats-1)}rateCourse(e){console.log("Oceniono kurs na: "+e),this.enrollmentAndRRatingService.rateCourse(this.course.id,e),this.enrollmentAndRRatingService.getEnrollments().subscribe(e=>{this.rate=this.enrollmentAndRRatingService.averageCourseRating(e.filter(e=>e.courseId===this.course.id)).toString()})}updateAvailableSeats(){this.availableSeats=this.course.seats-this.takenSeats,this.availableSeats<=0?(this.enoughSeats=!1,this.enrollmentPossibleMessage="Brak dost\u0119pnych miejsc na ten kurs."):(this.enoughSeats=!0,this.enrollmentPossibleMessage="")}}class Da{}const ka=new Ie("Location Initialized");class xa{}const Ra=new Ie("appBaseHref");class Pa{constructor(e,t){this._subject=new Li,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=Pa.stripTrailingSlash(Oa(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+Pa.normalizeQueryParams(t))}normalize(e){return Pa.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Oa(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Pa.normalizeQueryParams(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Pa.normalizeQueryParams(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)})}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}static normalizeQueryParams(e){return e&&"?"!==e[0]?"?"+e:e}static joinWithSlash(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}static stripTrailingSlash(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}}function Oa(e){return e.replace(/\/index.html$/,"")}class Ma extends xa{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=Pa.joinWithSlash(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+Pa.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+Pa.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}class La extends xa{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Pa.joinWithSlash(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+Pa.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+Pa.normalizeQueryParams(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+Pa.normalizeQueryParams(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}const Va=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),Fa=function(e){return function(e){const t=e.toLowerCase().replace(/_/g,"-");let n=Di[t];if(n)return n;const r=t.split("-")[0];if(n=Di[r])return n;if("en"===r)return Ri;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[ki.PluralCase]},Ua=new Ie("UseV4Plurals");class qa{}class ja extends qa{constructor(e,t){super(),this.locale=e,this.deprecatedPluralFn=t}getPluralCategory(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):Fa(t||this.locale)(e)){case Va.Zero:return"zero";case Va.One:return"one";case Va.Two:return"two";case Va.Few:return"few";case Va.Many:return"many";default:return"other"}}}class Ba{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class za{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){rt()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Ba(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Ha(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new Ha(e,i);t.push(o)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}class Ha{constructor(e,t){this.record=e,this.view=t}}class Ga{constructor(e,t){this._viewContainer=e,this._context=new Wa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Ka("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Ka("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}class Wa{constructor(){this.$implicit=null,this.ngIf=null}}function Ka(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ye(t)}'.`)}class Qa{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class $a{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const Ya=new $a,Ja=new Qa;class Xa{constructor(e){this._ref=e,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):Kt(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,$t.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(e){if(Xt(e))return Ya;if(Zt(e))return Ja;throw Error(`InvalidPipeArgument: '${e}' for pipe '${ye(Xa)}'`)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}class Za{}const eu=new Ie("DocumentToken"),tu="server";function nu(e){return e===tu}let ru=(()=>{class e{}return e.ngInjectableDef=pe({token:e,providedIn:"root",factory:()=>new iu(Ue(eu),window,Ue(et))}),e})();class iu{constructor(e,t,n){this.document=e,this.window=t,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const t=this.document.querySelector(`#${e}`);if(t)return void this.scrollToElement(t);const n=this.document.querySelector(`[name='${e}']`);if(n)return void this.scrollToElement(n)}catch(t){this.errorHandler.handleError(t)}}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}let ou=null;function su(){return ou}class au{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(e){this._attrToPropMap=e}}class uu extends au{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const e=this.createElement("div",document);if(null!=this.getStyle(e,"animationName"))this._animationPrefix="";else{const t=["Webkit","Moz","O","ms"];for(let n=0;n<t.length;n++)if(null!=this.getStyle(e,t[n]+"AnimationName")){this._animationPrefix="-"+t[n].toLowerCase()+"-";break}}const t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(t).forEach(n=>{null!=this.getStyle(e,n)&&(this._transitionEnd=t[n])})}catch(e){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(e){return e.getDistributedNodes()}resolveAndSetHref(e,t,n){e.href=null==n?t:t+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const lu={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},cu=3,hu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},du={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fu=(()=>{if(Te.Node)return Te.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}})();class pu extends uu{parse(e){throw new Error("parse not implemented")}static makeCurrent(){var e;e=new pu,ou||(ou=e)}hasProperty(e,t){return t in e}setProperty(e,t,n){e[t]=n}getProperty(e,t){return e[t]}invoke(e,t,n){e[t](...n)}logError(e){window.console&&(console.error?console.error(e):console.log(e))}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return lu}contains(e,t){return fu.call(e,t)}querySelector(e,t){return e.querySelector(t)}querySelectorAll(e,t){return e.querySelectorAll(t)}on(e,t,n){e.addEventListener(t,n,!1)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}createMouseEvent(e){const t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t}createEvent(e){const t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t}preventDefault(e){e.preventDefault(),e.returnValue=!1}isPrevented(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}getInnerHTML(e){return e.innerHTML}getTemplateContent(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}getOuterHTML(e){return e.outerHTML}nodeName(e){return e.nodeName}nodeValue(e){return e.nodeValue}type(e){return e.type}content(e){return this.hasProperty(e,"content")?e.content:e}firstChild(e){return e.firstChild}nextSibling(e){return e.nextSibling}parentElement(e){return e.parentNode}childNodes(e){return e.childNodes}childNodesAsList(e){const t=e.childNodes,n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r];return n}clearNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}appendChild(e,t){e.appendChild(t)}removeChild(e,t){e.removeChild(t)}replaceChild(e,t,n){e.replaceChild(t,n)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}insertBefore(e,t,n){e.insertBefore(n,t)}insertAllBefore(e,t,n){n.forEach(n=>e.insertBefore(n,t))}insertAfter(e,t,n){e.insertBefore(n,t.nextSibling)}setInnerHTML(e,t){e.innerHTML=t}getText(e){return e.textContent}setText(e,t){e.textContent=t}getValue(e){return e.value}setValue(e,t){e.value=t}getChecked(e){return e.checked}setChecked(e,t){e.checked=t}createComment(e){return this.getDefaultDocument().createComment(e)}createTemplate(e){const t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createElementNS(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)}createTextNode(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)}createScriptTag(e,t,n){const r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r}createStyleElement(e,t){const n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n}createShadowRoot(e){return e.createShadowRoot()}getShadowRoot(e){return e.shadowRoot}getHost(e){return e.host}clone(e){return e.cloneNode(!0)}getElementsByClassName(e,t){return e.getElementsByClassName(t)}getElementsByTagName(e,t){return e.getElementsByTagName(t)}classList(e){return Array.prototype.slice.call(e.classList,0)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}hasClass(e,t){return e.classList.contains(t)}setStyle(e,t,n){e.style[t]=n}removeStyle(e,t){e.style[t]=""}getStyle(e,t){return e.style[t]}hasStyle(e,t,n){const r=this.getStyle(e,t)||"";return n?r==n:r.length>0}tagName(e){return e.tagName}attributeMap(e){const t=new Map,n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r);t.set(e.name,e.value)}return t}hasAttribute(e,t){return e.hasAttribute(t)}hasAttributeNS(e,t,n){return e.hasAttributeNS(t,n)}getAttribute(e,t){return e.getAttribute(t)}getAttributeNS(e,t,n){return e.getAttributeNS(t,n)}setAttribute(e,t,n){e.setAttribute(t,n)}setAttributeNS(e,t,n,r){e.setAttributeNS(t,n,r)}removeAttribute(e,t){e.removeAttribute(t)}removeAttributeNS(e,t,n){e.removeAttributeNS(t,n)}templateAwareRoot(e){return this.isTemplateElement(e)?this.content(e):e}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(e){return e.title}setTitle(e,t){e.title=t||""}elementMatches(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))}isTemplateElement(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}isTextNode(e){return e.nodeType===Node.TEXT_NODE}isCommentNode(e){return e.nodeType===Node.COMMENT_NODE}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}hasShadowRoot(e){return null!=e.shadowRoot&&e instanceof HTMLElement}isShadowRoot(e){return e instanceof DocumentFragment}importIntoDoc(e){return document.importNode(this.templateAwareRoot(e),!0)}adoptNode(e){return document.adoptNode(e)}getHref(e){return e.getAttribute("href")}getEventKey(e){let t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),e.location===cu&&du.hasOwnProperty(t)&&(t=du[t]))}return hu[t]||t}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=gu||(gu=document.querySelector("base"))?gu.getAttribute("href"):null;return null==t?null:(n=t,mu||(mu=document.createElement("a")),mu.setAttribute("href",n),"/"===mu.pathname.charAt(0)?mu.pathname:"/"+mu.pathname);var n}resetBaseElement(){gu=null}getUserAgent(){return window.navigator.userAgent}setData(e,t,n){this.setAttribute(e,"data-"+t,n)}getData(e,t){return this.getAttribute(e,"data-"+t)}getComputedStyle(e){return getComputedStyle(e)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}(document.cookie,e)}setCookie(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)}}let mu,gu=null;function yu(){return!!window.history.pushState}const vu=new Ie("TRANSITION_ID"),bu=[{provide:Ui,useFactory:function(e,t,n){return()=>{n.get(qi).donePromise.then(()=>{const n=su();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(t=>n.getAttribute(t,"ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[vu,eu,Mt],multi:!0}];class wu{static init(){var e;e=new wu,Eo=e}addToWindow(e){Te.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Te.getAllAngularTestabilities=()=>e.getAllTestabilities(),Te.getAllAngularRootElements=()=>e.getAllRootElements(),Te.frameworkStabilizers||(Te.frameworkStabilizers=[]),Te.frameworkStabilizers.push(e=>{const t=Te.getAllAngularTestabilities();let n=t.length,r=!1;const i=function(t){r=r||t,0==--n&&e(r)};t.forEach((function(e){e.whenStable(i)}))})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?su().isShadowRoot(t)?this.findTestabilityInTree(e,su().getHost(t),!0):this.findTestabilityInTree(e,su().parentElement(t),!0):null}}function _u(e,t){"undefined"!=typeof COMPILED&&COMPILED||((Te.ng=Te.ng||{})[e]=t)}const Su=(()=>({ApplicationRef:Po,NgZone:fo}))();function Cu(e){return Wo(e)}const Eu=new Ie("EventManagerPlugins");class Tu{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}class Iu{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=su().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}class Au{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}class Nu extends Au{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>su().remove(e))}}const Du={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ku=/%COMP%/g,xu="_nghost-%COMP%",Ru="_ngcontent-%COMP%";function Pu(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?Pu(e,i,n):(i=i.replace(ku,e),n.push(i))}return n}function Ou(e){return t=>{!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}class Mu{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Lu(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case We.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new Uu(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case We.Native:case We.ShadowDom:return new qu(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Pu(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class Lu{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Du[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=Du[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=Du[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&mn.DashCase?e.style.setProperty(t,n,r&mn.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&mn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){Fu(t,"property"),e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return Fu(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ou(n)):this.eventManager.addEventListener(e,t,Ou(n))}}const Vu=(()=>"@".charCodeAt(0))();function Fu(e,t){if(e.charCodeAt(0)===Vu)throw new Error(`Found the synthetic ${t} ${e}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class Uu extends Lu{constructor(e,t,n,r){super(e),this.component=n;const i=Pu(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr=Ru.replace(ku,r+"-"+n.id),this.hostAttr=xu.replace(ku,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class qu extends Lu{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===We.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=Pu(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const e=document.createElement("style");e.textContent=i[o],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const ju=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e})(),Bu=ju("addEventListener"),zu=ju("removeEventListener"),Hu={},Gu="FALSE",Wu="ANGULAR",Ku="addEventListener",Qu="removeEventListener",$u="__zone_symbol__propagationStopped",Yu="__zone_symbol__stopImmediatePropagation",Ju=(()=>{const e="undefined"!=typeof Zone&&Zone[ju("BLACK_LISTED_EVENTS")];if(e){const t={};return e.forEach(e=>{t[e]=e}),t}})(),Xu=function(e){return!!Ju&&Ju.hasOwnProperty(e)},Zu=function(e){const t=Hu[e.type];if(!t)return;const n=this[t];if(!n)return;const r=[e];if(1===n.length){const e=n[0];return e.zone!==Zone.current?e.zone.run(e.handler,this,r):e.handler.apply(this,r)}{const t=n.slice();for(let n=0;n<t.length&&!0!==e[$u];n++){const e=t[n];e.zone!==Zone.current?e.zone.run(e.handler,this,r):e.handler.apply(this,r)}}};class el extends Iu{constructor(e,t,n){super(e),this.ngZone=t,n&&nu(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype[Yu])return;const e=Event.prototype[Yu]=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[$u]=!0),e&&e.apply(this,arguments)}}supports(e){return!0}addEventListener(e,t,n){let r=n;if(!e[Bu]||fo.isInAngularZone()&&!Xu(t))e[Ku](t,r,!1);else{let n=Hu[t];n||(n=Hu[t]=ju(Wu+t+Gu));let i=e[n];const o=i&&i.length>0;i||(i=e[n]=[]);const s=Xu(t)?Zone.root:Zone.current;if(0===i.length)i.push({zone:s,handler:r});else{let e=!1;for(let t=0;t<i.length;t++)if(i[t].handler===r){e=!0;break}e||i.push({zone:s,handler:r})}o||e[Bu](t,Zu,!1)}return()=>this.removeEventListener(e,t,r)}removeEventListener(e,t,n){let r=e[zu];if(!r)return e[Qu].apply(e,[t,n,!1]);let i=Hu[t],o=i&&e[i];if(!o)return e[Qu].apply(e,[t,n,!1]);let s=!1;for(let a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(e,[t,Zu,!1]):e[Qu].apply(e,[t,n,!1])}}const tl={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},nl=new Ie("HammerGestureConfig"),rl=new Ie("HammerLoader");class il{constructor(){this.events=[],this.overrides={}}buildHammer(e){const t=new Hammer(e,this.options);t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0});for(const n in this.overrides)t.get(n).set(this.overrides[n]);return t}}class ol extends Iu{constructor(e,t,n,r){super(e),this._config=t,this.console=n,this.loader=r}supports(e){return!(!tl.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${e}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(e,t,n){const r=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){let r=!1,i=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});r||(i=this.addEventListener(e,t,n))}).catch(()=>{this.console.warn(`The "${t}" event cannot be bound because the custom `+"Hammer.JS loader failed."),i=()=>{}}),()=>{i()}}return r.runOutsideAngular(()=>{const i=this._config.buildHammer(e),o=function(e){r.runGuarded((function(){n(e)}))};return i.on(t,o),()=>{i.off(t,o),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}const sl=["alt","control","meta","shift"],al={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};class ul extends Iu{constructor(e){super(e)}supports(e){return null!=ul.parseEventName(e)}addEventListener(e,t,n){const r=ul.parseEventName(t),i=ul.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>su().onAndCancel(e,r.domEventName,i))}static parseEventName(e){const t=e.toLowerCase().split("."),n=t.shift();if(0===t.length||"keydown"!==n&&"keyup"!==n)return null;const r=ul._normalizeKey(t.pop());let i="";if(sl.forEach(e=>{const n=t.indexOf(e);n>-1&&(t.splice(n,1),i+=e+".")}),i+=r,0!=t.length||0===r.length)return null;const o={};return o.domEventName=n,o.fullKey=i,o}static getEventFullKey(e){let t="",n=su().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),sl.forEach(r=>{r!=n&&(0,al[r])(e)&&(t+=r+".")}),t+=n}static eventCallback(e,t,n){return r=>{ul.getEventFullKey(r)===e&&n.runGuarded(()=>t(r))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}class ll{}class cl extends ll{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case Tt.NONE:return t;case Tt.HTML:return t instanceof dl?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){let n=null;try{Ct=Ct||new it(e);let r=t?String(t):"";n=Ct.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Ct.getInertBodyElement(r)}while(r!==o);const s=new bt,a=s.sanitizeChildren(Et(n)||n);return rt()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const e=Et(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}(this._doc,String(t)));case Tt.STYLE:return t instanceof fl?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";const t=e.match(Nt);return t&&at(t[1])===t[1]||e.match(At)&&function(e){let t=!0,n=!0;for(let r=0;r<e.length;r++){const i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(rt()&&console.warn(`WARNING: sanitizing unsafe style value ${e} (see http://g.co/ng/security#xss).`),"unsafe")}(t));case Tt.SCRIPT:if(t instanceof pl)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case Tt.URL:return t instanceof gl||t instanceof ml?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),at(String(t)));case Tt.RESOURCE_URL:if(t instanceof gl)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(e,t){if(e instanceof hl)throw new Error(`Required a safe ${t}, got a ${e.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(e){return new dl(e)}bypassSecurityTrustStyle(e){return new fl(e)}bypassSecurityTrustScript(e){return new pl(e)}bypassSecurityTrustUrl(e){return new ml(e)}bypassSecurityTrustResourceUrl(e){return new gl(e)}}class hl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class dl extends hl{getTypeName(){return"HTML"}}class fl extends hl{getTypeName(){return"Style"}}class pl extends hl{getTypeName(){return"Script"}}class ml extends hl{getTypeName(){return"URL"}}class gl extends hl{getTypeName(){return"ResourceURL"}}const yl=Do(Qo,"browser",[{provide:Gi,useValue:"browser"},{provide:Hi,useValue:function(){pu.makeCurrent(),wu.init()},multi:!0},{provide:Da,useClass:class extends Da{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=su().getLocation(),this._history=su().getHistory()}getBaseHrefFromDOM(){return su().getBaseHref(this._doc)}onPopState(e){su().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){su().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){yu()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){yu()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}},deps:[eu]},{provide:eu,useFactory:function(){return document},deps:[]}]);function vl(){return new et}class bl{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:bl,providers:[{provide:ji,useValue:e.appId},{provide:vu,useExisting:ji},bu]}}}"undefined"!=typeof window&&window;const wl=new _(e=>e.complete());function _l(e){return e?function(e){return new _(t=>e.schedule(()=>t.complete()))}(e):wl}class Sl extends j{constructor(e,t){super(e),this.sources=t,this.completed=0,this.haveValues=0;const n=t.length;this.values=new Array(n);for(let r=0;r<n;r++){const e=q(this,t[r],null,r);e&&this.add(e)}}notifyNext(e,t,n,r,i){this.values[n]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)}notifyComplete(e){const{destination:t,haveValues:n,values:r}=this,i=r.length;e._hasValue?(this.completed++,this.completed===i&&(n===i&&t.next(r),t.complete())):t.complete()}}const Cl=new Ie("NgValueAccessor");class El{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}const Tl=new Ie("CompositionEventMode");class Il{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=su()?su().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}class Al{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Nl extends Al{get formDirective(){return null}get path(){return null}}function Dl(){throw new Error("unimplemented")}class kl extends Al{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Dl()}get asyncValidator(){return Dl()}}class xl{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}class Rl extends xl{constructor(e){super(e)}}class Pl extends xl{constructor(e){super(e)}}function Ol(e){return null==e||0===e.length}const Ml=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ll{static min(e){return t=>{if(Ol(t.value)||Ol(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(Ol(t.value)||Ol(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}static required(e){return Ol(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return Ol(e.value)?null:Ml.test(e.value)?null:{email:!0}}static minLength(e){return t=>{if(Ol(t.value))return null;const n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}static maxLength(e){return t=>{const n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}static pattern(e){if(!e)return Ll.nullValidator;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(Ol(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(Vl);return 0==t.length?null:function(e){return Ul(function(e,t){return t.map(t=>t(e))}(e,t))}}static composeAsync(e){if(!e)return null;const t=e.filter(Vl);return 0==t.length?null:function(e){return function e(...t){let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),0===t.length?wl:n?e(t).pipe(B(e=>n(...e))):new _(e=>new Sl(e,t))}(function(e,t){return t.map(t=>t(e))}(e,t).map(Fl)).pipe(B(Ul))}}}function Vl(e){return null!=e}function Fl(e){const t=Xt(e)?W(e):e;if(!Zt(t))throw new Error("Expected validator to return Promise or Observable.");return t}function Ul(e){const t=e.reduce((e,t)=>null!=t?Object.assign({},e,t):e,{});return 0===Object.keys(t).length?null:t}function ql(e){return e.validate?t=>e.validate(t):e}function jl(e){return e.validate?t=>e.validate(t):e}class Bl{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}class zl{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}const Hl={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class Gl{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Hl.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${Hl.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${Hl.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${Hl.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Hl.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${Hl.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(e){console.warn(`\n    It looks like you're using ngModel on the same form field as ${e}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===e?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}function Wl(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}class Kl{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Kt}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=Wl(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}class Ql{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Wl(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function $l(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}class Yl{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue($l(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue($l(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}function Jl(e,t){return[...t.path,e]}function Xl(e,t){e||nc(t,"Cannot find control with"),t.valueAccessor||nc(t,"No value accessor for form control with"),e.validator=Ll.compose([e.validator,t.validator]),e.asyncValidator=Ll.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Zl(e,t)})}(e,t),function(e,t){e.registerOnChange((e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Zl(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())}),t._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function Zl(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function ec(e,t){null==e&&nc(t,"Cannot find control with"),e.validator=Ll.compose([e.validator,t.validator]),e.asyncValidator=Ll.composeAsync([e.asyncValidator,t.asyncValidator])}function tc(e){return nc(e,"There is no FormControl instance attached to form control element with")}function nc(e,t){let n;throw n=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${t} ${n}`)}function rc(e){return null!=e?Ll.compose(e.map(ql)):null}function ic(e){return null!=e?Ll.composeAsync(e.map(jl)):null}const oc=[El,class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},Bl,Kl,class{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Kt}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(t.hasOwnProperty("selectedOptions")){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),i=this._getOptionValue(r.value);n.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}},class{constructor(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(kl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}],sc="VALID",ac="INVALID",uc="PENDING",lc="DISABLED";function cc(e){const t=dc(e)?e.validators:e;return Array.isArray(t)?rc(t):t||null}function hc(e,t){const n=dc(t)?t.asyncValidators:e;return Array.isArray(n)?ic(n):n||null}function dc(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class fc{constructor(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===sc}get invalid(){return this.status===ac}get pending(){return this.status==uc}get disabled(){return this.status===lc}get enabled(){return this.status!==lc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=cc(e)}setAsyncValidators(e){this.asyncValidator=hc(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=uc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lc,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=sc,this._forEachChild(t=>{t.enable(Object.assign({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==sc&&this.status!==uc||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lc:sc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=uc;const t=Fl(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>this.setErrors(t,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce((e,t)=>e instanceof mc?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof gc&&e.at(t)||null,e))}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Li,this.statusChanges=new Li}_calculateStatus(){return this._allControlsDisabled()?lc:this.errors?ac:this._anyControlsHaveStatus(uc)?uc:this._anyControlsHaveStatus(ac)?ac:sc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){dc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class pc extends fc{constructor(e=null,t,n){super(cc(t),hc(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class mc extends fc{constructor(e,t,n){super(cc(t),hc(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof pc?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let t=!1;return this._forEachChild((n,r)=>{t=t||this.contains(r)&&e(n)}),t}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class gc extends fc{constructor(e,t,n){super(cc(t),hc(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof pc?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}class yc extends Nl{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Jl(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return rc(this._validators)}get asyncValidator(){return ic(this._asyncValidators)}_checkParentType(){}}class vc{}const bc=new Ie("NgModelWithFormControlWarning");class wc extends Nl{constructor(e,t){super(),this._validators=e,this._asyncValidators=t,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Li}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return Xl(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){!function(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}(this.directives,e)}addFormGroup(e){const t=this.form.get(e.path);ec(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormGroup(e){}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){const t=this.form.get(e.path);ec(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormArray(e){}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,t=this.directives,this.form._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=this.form.get(e.path);e.control!==t&&(function(e,t){t.valueAccessor.registerOnChange(()=>tc(t)),t.valueAccessor.registerOnTouched(()=>tc(t)),t._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),e&&e._clearChangeFns()}(e.control,e),t&&Xl(t,e),e.control=t)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const e=rc(this._validators);this.form.validator=Ll.compose([this.form.validator,e]);const t=ic(this._asyncValidators);this.form.asyncValidator=Ll.composeAsync([this.form.asyncValidator,t])}_checkFormPresent(){this.form||Gl.missingFormException()}}class _c extends yc{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){Cc(this._parent)&&Gl.groupParentException()}}class Sc extends Nl{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Jl(this.name,this._parent)}get validator(){return rc(this._validators)}get asyncValidator(){return ic(this._asyncValidators)}_checkParentType(){Cc(this._parent)&&Gl.arrayParentException()}}function Cc(e){return!(e instanceof _c||e instanceof wc||e instanceof Sc)}let Ec=(()=>{class e extends kl{constructor(e,t,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new Li,this._ngModelWarningSent=!1,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||nc(e,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return t.forEach(t=>{t.constructor===Il?n=t:function(e){return oc.some(t=>e.constructor===t)}(t)?(r&&nc(e,"More than one built-in value accessor matches form control with"),r=t):(i&&nc(e,"More than one custom value accessor matches form control with"),i=t)}),i||r||n||(nc(e,"No valid value accessor for form control with"),null)}(this,r)}set isDisabled(e){Gl.disabledAttrWarning()}ngOnChanges(t){var n,r;this._added||this._setUpControl(),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Kt(t,n.currentValue)}(t,this.viewModel)&&("formControlName",n=e,this,r=this._ngModelWarningConfig,rt()&&"never"!==r&&((null!==r&&"once"!==r||n._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(Gl.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Jl(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return rc(this._rawValidators)}get asyncValidator(){return ic(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof _c)&&this._parent instanceof yc?Gl.ngModelGroupException():this._parent instanceof _c||this._parent instanceof wc||this._parent instanceof Sc||Gl.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e._ngModelWarningSentOnce=!1,e})();class Tc{}class Ic{group(e,t=null){const n=this._reduceControls(e);let r=null,i=null,o=void 0;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(r=null!=t.validators?t.validators:null,i=null!=t.asyncValidators?t.asyncValidators:null,o=null!=t.updateOn?t.updateOn:void 0):(r=null!=t.validator?t.validator:null,i=null!=t.asyncValidator?t.asyncValidator:null)),new mc(n,{asyncValidators:i,updateOn:o,validators:r})}control(e,t,n){return new pc(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new gc(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof pc||e instanceof mc||e instanceof gc?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}class Ac{static withConfig(e){return{ngModule:Ac,providers:[{provide:bc,useValue:e.warnOnNgModelWithFormControl}]}}}class Nc{constructor(e,t,n){this.formBuilder=e,this.router=t,this.authService=n,this.firebaseError=""}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[Ll.required,Ll.email]],password:["",Ll.required]})}onSubmit(){console.log(this.loginForm.value),this.authService.signInUser(this.loginForm.value.email,this.loginForm.value.password).then(()=>{this.router.navigate(["/courses"]),this.loginForm.reset()}).catch(e=>{console.log(e.message),this.firebaseError=e.message})}}class Dc{constructor(e,t,n){this.formBuilder=e,this.router=t,this.authService=n,this.firebaseError=""}ngOnInit(){this.registerForm=this.formBuilder.group({email:["",[Ll.required,Ll.email]],password:["",[Ll.required,Ll.minLength(6)]]})}onSubmit(){console.log(this.registerForm.value.email),console.log(this.registerForm.value.password),this.authService.signUpUser(this.registerForm.value.email,this.registerForm.value.password).then(()=>{this.router.navigate(["/login"]),this.registerForm.reset()}).catch(e=>{console.log(e.message),this.firebaseError=e.message})}}class kc{constructor(e){this.courseService=e}ngOnInit(){this.courseService.getCourses().subscribe(e=>this.courses=e)}deleteCourse(e,t){t.preventDefault(),this.courseService.deleteCourse(e)}}class xc{constructor(e,t){this.courseService=e,this.router=t}ngOnInit(){}addCourse(e){this.courseService.addCourse(e),this.router.navigate(["/admin"])}}class Rc{constructor(e,t,n){this.courseService=e,this.route=t,this.router=n}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");this.courseService.getCourse(e).subscribe(t=>{this.courseToBeEdited=t,this.courseToBeEdited.id=e,console.log(this.courseToBeEdited.toString()),this.courseLoaded=Promise.resolve(!0)})}editCourse(e){e.id=this.route.snapshot.paramMap.get("id"),this.courseService.updateCourse(e),this.router.navigate(["/admin"])}}function Pc(e){const t=new _(t=>{t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}function Oc(...e){let t=e[e.length-1];switch(D(t)?e.pop():t=void 0,e.length){case 0:return _l(t);case 1:return t?G(e,t):Pc(e[0]);default:return G(e,t)}}function Mc(e,t){return"function"==typeof t?n=>n.pipe(Mc((n,r)=>W(e(n,r)).pipe(B((e,i)=>t(n,e,r,i))))):t=>t.lift(new Lc(e))}n("mrSG");class Lc{constructor(e){this.project=e}call(e,t){return t.subscribe(new Vc(e,this.project))}}class Vc extends j{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}_innerSub(e,t,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new k(this,void 0,void 0);this.destination.add(i),this.innerSubscription=q(this,e,t,n,i)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,n,r,i){this.destination.next(t)}}class Fc extends d{constructor(e,t){super()}schedule(e,t=0){return this}}class Uc extends Fc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}class qc extends Uc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}let jc=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class Bc extends jc{constructor(e,t=jc.now){super(e,()=>Bc.delegate&&Bc.delegate!==this?Bc.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return Bc.delegate&&Bc.delegate!==this?Bc.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}class zc extends Bc{}const Hc=new zc(qc);class Gc{constructor(e,t){this.zone=e,this.platformId=t}schedule(...e){return this.zone.runGuarded((function(){return Hc.schedule.apply(Hc,e)}))}keepUnstableUntilFirst(e){return nu(this.platformId)?new _(t=>{const n=()=>{},r=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);e.subscribe(e=>{"scheduled"===r.state&&r.invoke(),t.next(e)},e=>{"scheduled"===r.state&&r.invoke(),t.error(e)},()=>{"scheduled"===r.state&&r.invoke(),t.complete()})}):e}runOutsideAngular(e){return new _(t=>this.zone.runOutsideAngular(()=>e.subscribe(e=>this.zone.run(()=>t.next(e)),e=>this.zone.run(()=>t.error(e)),()=>this.zone.run(()=>t.complete()))))}}const Wc=e=>t=>new _(n=>t.subscribe(t=>e.run(()=>n.next(t)),t=>e.run(()=>n.error(t)),()=>e.run(()=>n.complete())));var Kc,Qc=n("Wcq6"),$c=n.n(Qc);const Yc=new Ie("angularfire2.app.options"),Jc=new Ie("angularfire2.app.nameOrConfig");class Xc{}function Zc(e,t,n){const r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",$c.a.apps.filter(e=>e&&e.name===r.name)[0]||t.runOutsideAngular(()=>$c.a.initializeApp(e,r))}let eh=Kc=class{static initializeApp(e,t){return{ngModule:Kc,providers:[{provide:Yc,useValue:e},{provide:Jc,useValue:t}]}}},th=class{constructor(e,t,n,r){this.zone=r;const i=new Gc(r,n);this.auth=r.runOutsideAngular(()=>Zc(e,r,t).auth()),this.authState=i.keepUnstableUntilFirst(i.runOutsideAngular(new _(e=>({unsubscribe:this.auth.onAuthStateChanged(e)})))),this.user=i.keepUnstableUntilFirst(i.runOutsideAngular(new _(e=>({unsubscribe:this.auth.onIdTokenChanged(e)})))),this.idToken=this.user.pipe(Mc(e=>e?W(e.getIdToken()):Oc(null))),this.idTokenResult=this.user.pipe(Mc(e=>e?W(e.getIdTokenResult()):Oc(null)))}},nh=(()=>{class e{constructor(e){this.fireAuth=e,this.authState$=this.fireAuth.authState}getUser(){return this.fireAuth.auth.currentUser}signInUser(e,t){return this.fireAuth.auth.signInWithEmailAndPassword(e,t).then(()=>console.log(this.getUser()))}signUpUser(e,t){return this.fireAuth.auth.createUserWithEmailAndPassword(e,t)}signOutUser(){return this.fireAuth.auth.signOut()}}return e.ngInjectableDef=pe({factory:function(){return new e(Ue(th))},token:e,providedIn:"root"}),e})();class rh extends A{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new E;return this._value}next(e){super.next(this._value=e)}}function ih(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}ih.prototype=Object.create(Error.prototype);const oh=ih,sh={};class ah{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new uh(e,this.resultSelector))}}class uh extends j{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(sh),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++){const t=e[n];this.add(q(this,t,t,n))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n,r,i){const o=this.values,s=this.toRespond?o[n]===sh?--this.toRespond:this.toRespond:0;o[n]=t,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function lh(e){return new _(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?W(n):_l()).subscribe(t)})}function ch(){return J(1)}function hh(e,t){return function(n){return n.lift(new dh(e,t))}}class dh{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new fh(e,this.predicate,this.thisArg))}}class fh extends m{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}function ph(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}ph.prototype=Object.create(Error.prototype);const mh=ph;function gh(e){return function(t){return 0===e?_l():t.lift(new yh(e))}}class yh{constructor(e){if(this.total=e,this.total<0)throw new mh}call(e,t){return t.subscribe(new vh(e,this.total))}}class vh extends m{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function bh(e,t,n){return function(r){return r.lift(new wh(e,t,n))}}class wh{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new _h(e,this.nextOrObserver,this.error,this.complete))}}class _h extends m{constructor(e,t,n,i){super(e),this._tapNext=v,this._tapError=v,this._tapComplete=v,this._tapError=n||v,this._tapComplete=i||v,r(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||v,this._tapError=t.error||v,this._tapComplete=t.complete||v)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}const Sh=(e=Ch)=>bh({hasValue:!1,next(){this.hasValue=!0},complete(){if(!this.hasValue)throw e()}});function Ch(){return new oh}function Eh(e=null){return t=>t.lift(new Th(e))}class Th{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Ih(e,this.defaultValue))}}class Ih extends m{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Ah(e,t){const n=arguments.length>=2;return r=>r.pipe(e?hh((t,n)=>e(t,n,r)):Y,gh(1),n?Eh(t):Sh(()=>new oh))}function Nh(e){return function(t){const n=new Dh(e),r=t.lift(n);return n.caught=r}}class Dh{constructor(e){this.selector=e}call(e,t){return t.subscribe(new kh(e,this.selector,this.caught))}}class kh extends j{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new k(this,void 0,void 0);this.add(r),q(this,n,void 0,void 0,r)}}}function xh(e){return t=>0===e?_l():t.lift(new Rh(e))}class Rh{constructor(e){if(this.total=e,this.total<0)throw new mh}call(e,t){return t.subscribe(new Ph(e,this.total))}}class Ph extends m{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function Oh(e,t){const n=arguments.length>=2;return r=>r.pipe(e?hh((t,n)=>e(t,n,r)):Y,xh(1),n?Eh(t):Sh(()=>new oh))}class Mh{constructor(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}call(e,t){return t.subscribe(new Lh(e,this.predicate,this.thisArg,this.source))}}class Lh extends m{constructor(e,t,n,r){super(e),this.predicate=t,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Vh(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Fh(e,t,n))}}class Fh{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new Uh(e,this.accumulator,this.seed,this.hasSeed))}}class Uh extends m{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function qh(e,t){return K(e,t,1)}class jh{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Bh(e,this.callback))}}class Bh extends m{constructor(e,t){super(e),this.add(new d(t))}}class zh{constructor(e,t){this.id=e,this.url=t}}class Hh extends zh{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Gh extends zh{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wh extends zh{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Kh extends zh{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qh extends zh{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $h extends zh{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yh extends zh{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jh extends zh{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xh extends zh{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zh{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ed{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class td{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nd{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rd{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class id{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class od{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class sd{}const ad="primary";class ud{constructor(e){this.params=e||{}}has(e){return this.params.hasOwnProperty(e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ld(e){return new ud(e)}const cd="ngNavigationCancelingError";function hd(e){const t=Error("NavigationCancelingError: "+e);return t[cd]=!0,t}function dd(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const t=r[o],n=e[o];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}class fd{constructor(e,t){this.routes=e,this.module=t}}function pd(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];md(r,gd(t,r))}}function md(e,t){if(!e)throw new Error(`\n      Invalid configuration of route '${t}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&e.outlet!==ad)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${t}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&pd(e.children,t)}function gd(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function yd(e){const t=e.children&&e.children.map(yd),n=t?Object.assign({},e,{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ad&&(n.component=sd),n}function vd(e,t){const n=Object.keys(e),r=Object.keys(t);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(e[i=n[o]]!==t[i])return!1;return!0}function bd(e){return Array.prototype.concat.apply([],e)}function wd(e){return e.length>0?e[e.length-1]:null}function _d(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Sd(e){return Zt(e)?e:Xt(e)?W(Promise.resolve(e)):Oc(e)}function Cd(e,t,n){return n?function(e,t){return vd(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!Ad(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>t[n]===e[n])}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length)return!!Ad(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Ad(n.segments,i))return!1;for(const t in r.children){if(!n.children[t])return!1;if(!e(n.children[t],r.children[t]))return!1}return!0}{const e=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!Ad(n.segments,e)&&!!n.children[ad]&&t(n.children[ad],r,o)}}(t,n,n.segments)}(e.root,t.root)}class Ed{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ld(this.queryParams)),this._queryParamMap}toString(){return xd.serialize(this)}}class Td{constructor(e,t){this.segments=e,this.children=t,this.parent=null,_d(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rd(this)}}class Id{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ld(this.parameters)),this._parameterMap}toString(){return Fd(this)}}function Ad(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}function Nd(e,t){let n=[];return _d(e.children,(e,r)=>{r===ad&&(n=n.concat(t(e,r)))}),_d(e.children,(e,r)=>{r!==ad&&(n=n.concat(t(e,r)))}),n}class Dd{}class kd{parse(e){const t=new zd(e);return new Ed(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`${`/${function e(t,n){if(!t.hasChildren())return Rd(t);if(n){const n=t.children[ad]?e(t.children[ad],!1):"",r=[];return _d(t.children,(t,n)=>{n!==ad&&r.push(`${n}:${e(t,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Nd(t,(n,r)=>r===ad?[e(t.children[ad],!1)]:[`${r}:${e(n,!1)}`]);return`${Rd(t)}/(${n.join("//")})`}}(e.root,!0)}`}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${Od(t)}=${Od(e)}`).join("&"):`${Od(t)}=${Od(n)}`});return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const xd=new kd;function Rd(e){return e.segments.map(e=>Fd(e)).join("/")}function Pd(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Od(e){return Pd(e).replace(/%3B/gi,";")}function Md(e){return Pd(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ld(e){return decodeURIComponent(e)}function Vd(e){return Ld(e.replace(/\+/g,"%20"))}function Fd(e){return`${Md(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${Md(e)}=${Md(t[e])}`).join("")}`;var t}const Ud=/^[^\/()?;=#]+/;function qd(e){const t=e.match(Ud);return t?t[0]:""}const jd=/^[^=?&#]+/,Bd=/^[^?&#]+/;class zd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Td([],{}):new Td([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[ad]=new Td(e,t)),n}parseSegment(){const e=qd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Id(Ld(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=qd(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=qd(this.remaining);e&&this.capture(n=e)}e[Ld(t)]=Ld(n)}parseQueryParam(e){const t=function(e){const t=e.match(jd);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Bd);return t?t[0]:""}(this.remaining);e&&this.capture(n=e)}const r=Vd(t),i=Vd(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(e[r]=t=[t]),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=qd(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=ad);const o=this.parseChildren();t[i]=1===Object.keys(o).length?o[ad]:new Td([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Hd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Gd(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Gd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Wd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Wd(e,this._root).map(e=>e.value)}}function Gd(e,t){if(e===t.value)return t;for(const n of t.children){const t=Gd(e,n);if(t)return t}return null}function Wd(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Wd(e,n);if(r.length)return r.unshift(t),r}return[]}class Kd{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Qd(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class $d extends Hd{constructor(e,t){super(e),this.snapshot=t,tf(this,e)}toString(){return this.snapshot.toString()}}function Yd(e,t){const n=function(e,t){const n=new Zd([],{},{},"",{},ad,t,null,e.root,-1,{});return new ef("",new Kd(n,[]))}(e,t),r=new rh([new Id("",{})]),i=new rh({}),o=new rh({}),s=new rh({}),a=new rh(""),u=new Jd(r,i,s,a,o,ad,t,n.root);return u.snapshot=n.root,new $d(new Kd(u,[]),n)}class Jd{constructor(e,t,n,r,i,o,s,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(B(e=>ld(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(B(e=>ld(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xd(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign({},e.params,t.params),data:Object.assign({},e.data,t.data),resolve:Object.assign({},e.resolve,t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Zd{constructor(e,t,n,r,i,o,s,a,u,l,c){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ld(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ld(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ef extends Hd{constructor(e,t){super(t),this.url=e,tf(this,t)}toString(){return nf(this._root)}}function tf(e,t){t.value._routerState=e,t.children.forEach(t=>tf(e,t))}function nf(e){const t=e.children.length>0?` { ${e.children.map(nf).join(", ")} } `:"";return`${e.value}${t}`}function rf(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,vd(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),vd(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!vd(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),vd(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function of(e,t){var n,r;return vd(e.params,t.params)&&Ad(n=e.url,r=t.url)&&n.every((e,t)=>vd(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||of(e.parent,t.parent))}function sf(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function af(e,t,n,r,i){let o={};return r&&_d(r,(e,t)=>{o[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new Ed(n.root===e?t:function e(t,n,r){const i={};return _d(t.children,(t,o)=>{i[o]=t===n?r:e(t,n,r)}),new Td(t.segments,i)}(n.root,e,t),o,i)}class uf{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&sf(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(r&&r!==wd(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lf{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function cf(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets[ad]:`${e}`}function hf(e,t,n){if(e||(e=new Td([],{})),0===e.segments.length&&e.hasChildren())return df(e,t,n);const r=function(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const t=e.segments[i],s=cf(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!gf(s,a,t))return o;r+=2}else{if(!gf(s,{},t))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new Td(e.segments.slice(0,r.pathIndex),{});return t.children[ad]=new Td(e.segments.slice(r.pathIndex),e.children),df(t,0,i)}return r.match&&0===i.length?new Td(e.segments,{}):r.match&&!e.hasChildren()?ff(e,t,n):r.match?df(e,0,i):ff(e,t,n)}function df(e,t,n){if(0===n.length)return new Td(e.segments,{});{const r=function(e){return"object"!=typeof e[0]?{[ad]:e}:void 0===e[0].outlets?{[ad]:e}:e[0].outlets}(n),i={};return _d(r,(n,r)=>{null!==n&&(i[r]=hf(e.children[r],t,n))}),_d(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new Td(e.segments,i)}}function ff(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const e=pf(n[i].outlets);return new Td(r,e)}if(0===i&&sf(n[0])){r.push(new Id(e.segments[t].path,n[0])),i++;continue}const o=cf(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&sf(s)?(r.push(new Id(o,mf(s))),i+=2):(r.push(new Id(o,{})),i++)}return new Td(r,{})}function pf(e){const t={};return _d(e,(e,n)=>{null!==e&&(t[n]=ff(new Td([],{}),0,e))}),t}function mf(e){const t={};return _d(e,(e,n)=>t[n]=`${e}`),t}function gf(e,t,n){return e==n.path&&vd(t,n.parameters)}const yf=(e,t,n)=>B(r=>(new vf(t,r.targetRouterState,r.currentRouterState,n).activate(e),r));class vf{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),rf(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Qd(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),_d(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet);if(n){const r=Qd(e),i=e.value.component?n.children:t;_d(r,(e,t)=>this.deactivateRouteAndItsChildren(e,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(e,t,n){const r=Qd(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new id(e.value.snapshot))}),e.children.length&&this.forwardEvent(new nd(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(rf(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),bf(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function bf(e){rf(e.value),e.children.forEach(bf)}function wf(e){return"function"==typeof e}function _f(e){return e instanceof Ed}class Sf{constructor(e){this.segmentGroup=e||null}}class Cf{constructor(e){this.urlTree=e}}function Ef(e){return new _(t=>t.error(new Sf(e)))}function Tf(e){return new _(t=>t.error(new Cf(e)))}function If(e){return new _(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Af{constructor(e,t,n,r,i){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(Be)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,ad).pipe(B(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Nh(e=>{if(e instanceof Cf)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof Sf)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ad).pipe(B(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(Nh(e=>{if(e instanceof Sf)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new Td([],{[ad]:e}):e;return new Ed(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(B(e=>new Td([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){return function(e,t){if(0===Object.keys(e).length)return Oc({});const n=[],r=[],i={};return _d(e,(e,o)=>{const s=t(o,e).pipe(B(e=>i[o]=e));o===ad?n.push(s):r.push(s)}),Oc.apply(null,n.concat(r)).pipe(ch(),Ah(),B(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(e,t,r,n))}expandSegment(e,t,n,r,i,o){return Oc(...n).pipe(B(s=>this.expandSegmentAgainstRoute(e,t,n,s,r,i,o).pipe(Nh(e=>{if(e instanceof Sf)return Oc(null);throw e}))),ch(),Oh(e=>!!e),Nh((e,n)=>{if(e instanceof oh||"EmptyError"===e.name){if(this.noLeftoversInUrl(t,r,i))return Oc(new Td([],{}));throw new Sf(t)}throw e}))}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}expandSegmentAgainstRoute(e,t,n,r,i,o,s){return xf(r)!==o?Ef(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o):Ef(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Tf(i):this.lineralizeSegments(n,i).pipe(K(n=>{const i=new Td(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:l}=Nf(t,r,i);if(!s)return Ef(t);const c=this.applyRedirectCommands(a,r.redirectTo,l);return r.redirectTo.startsWith("/")?Tf(c):this.lineralizeSegments(r,c).pipe(K(r=>this.expandSegment(e,t,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(e,t,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(B(e=>(n._loadedConfig=e,new Td(r,{})))):Oc(new Td(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=Nf(t,n,r);if(!i)return Ef(t);const a=r.slice(s);return this.getChildConfig(e,n,r).pipe(K(e=>{const n=e.module,r=e.routes,{segmentGroup:i,slicedSegments:s}=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some(n=>kf(e,t,n)&&xf(n)!==ad)}(e,n,r)?{segmentGroup:Df(new Td(t,function(e,t){const n={};n[ad]=t;for(const r of e)""===r.path&&xf(r)!==ad&&(n[xf(r)]=new Td([],{}));return n}(r,new Td(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some(n=>kf(e,t,n))}(e,n,r)?{segmentGroup:Df(new Td(e.segments,function(e,t,n,r){const i={};for(const o of n)kf(e,t,o)&&!r[xf(o)]&&(i[xf(o)]=new Td([],{}));return Object.assign({},r,i)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(B(e=>new Td(o,e))):0===r.length&&0===s.length?Oc(new Td(o,{})):this.expandSegment(n,i,r,s,ad,!0).pipe(B(e=>new Td(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?Oc(new fd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Oc(t._loadedConfig):function(e,t,n){const r=t.canLoad;return r&&0!==r.length?W(r).pipe(B(r=>{const i=e.get(r);let o;if(function(e){return e&&wf(e.canLoad)}(i))o=i.canLoad(t,n);else{if(!wf(i))throw new Error("Invalid CanLoad guard");o=i(t,n)}return Sd(o)})).pipe(ch(),(i=e=>!0===e,e=>e.lift(new Mh(i,void 0,e)))):Oc(!0);var i}(e.injector,t,n).pipe(K(n=>n?this.configLoader.load(e.injector,t).pipe(B(e=>(t._loadedConfig=e,e))):function(e){return new _(t=>t.error(hd(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):Oc(new fd([],e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Oc(n);if(r.numberOfChildren>1||!r.children[ad])return If(e.redirectTo);r=r.children[ad]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new Ed(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return _d(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let o={};return _d(t.children,(t,i)=>{o[i]=this.createSegmentGroup(e,t,n,r)}),new Td(i,o)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function Nf(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(t.matcher||dd)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Df(e){if(1===e.numberOfChildren&&e.children[ad]){const t=e.children[ad];return new Td(e.segments.concat(t.segments),t.children)}return e}function kf(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function xf(e){return e.outlet||ad}class Rf{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Pf{constructor(e,t){this.component=e,this.route=t}}function Of(e,t,n){const r=e._root;return function e(t,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Qd(n);return t.children.forEach(t=>{!function(t,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,a=n?n.value:null,u=r?r.getContext(t.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Ad(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Ad(e.url,t.url)||!vd(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!of(e,t)||!vd(e.queryParams,t.queryParams);case"paramsChange":default:return!of(e,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new Rf(i)):(s.data=a.data,s._resolvedData=a._resolvedData),e(t,n,s.component?u?u.children:null:r,i,o),l&&o.canDeactivateChecks.push(new Pf(u&&u.outlet&&u.outlet.component||null,a))}else a&&Lf(n,u,o),o.canActivateChecks.push(new Rf(i)),e(t,null,s.component?u?u.children:null:r,i,o)}(t,s[t.value.outlet],r,i.concat([t.value]),o),delete s[t.value.outlet]}),_d(s,(e,t)=>Lf(e,r.getContext(t),o)),o}(r,t?t._root:null,n,[r.value])}function Mf(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function Lf(e,t,n){const r=Qd(e),i=e.value;_d(r,(e,r)=>{Lf(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Pf(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}const Vf=Symbol("INITIAL_VALUE");function Ff(){return Mc(e=>(function(...e){let t=null,n=null;return D(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&u(e[0])&&(e=e[0]),G(e,n).lift(new ah(t))})(...e.map(e=>e.pipe(xh(1),function(...e){return t=>{let n=e[e.length-1];D(n)?e.pop():n=null;const r=e.length;return function(...e){return ch()(Oc(...e))}(1!==r||n?r>0?G(e,n):_l(n):Pc(e[0]),t)}}(Vf)))).pipe(Vh((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==Vf)return e;if(r===Vf&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||_f(r))return r}return e},e)},Vf),hh(e=>e!==Vf),B(e=>_f(e)?e:!0===e),xh(1)))}function Uf(e,t){return null!==e&&t&&t(new rd(e)),Oc(!0)}function qf(e,t){return null!==e&&t&&t(new td(e)),Oc(!0)}function jf(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?Oc(r.map(r=>lh(()=>{const i=Mf(r,t,n);let o;if(function(e){return e&&wf(e.canActivate)}(i))o=Sd(i.canActivate(t,e));else{if(!wf(i))throw new Error("Invalid CanActivate guard");o=Sd(i(t,e))}return o.pipe(Oh())}))).pipe(Ff()):Oc(!0)}function Bf(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>(function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null})(e)).filter(e=>null!==e).map(t=>lh(()=>Oc(t.guards.map(i=>{const o=Mf(i,t.node,n);let s;if(function(e){return e&&wf(e.canActivateChild)}(o))s=Sd(o.canActivateChild(r,e));else{if(!wf(o))throw new Error("Invalid CanActivateChild guard");s=Sd(o(r,e))}return s.pipe(Oh())})).pipe(Ff())));return Oc(i).pipe(Ff())}class zf{}class Hf{constructor(e,t,n,r,i,o){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const e=Kf(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ad),n=new Zd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ad,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Kd(n,t),i=new ef(this.url,r);return this.inheritParamsAndData(i._root),Oc(i)}catch(e){return new _(t=>t.error(e))}}inheritParamsAndData(e){const t=e.value,n=Xd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=Nd(t,(t,n)=>this.processSegmentGroup(e,t,n));return function(e){const t={};e.forEach(e=>{const n=t[e.value.outlet];if(n){const t=n.url.map(e=>e.toString()).join("/"),r=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${r}'.`)}t[e.value.outlet]=e.value})}(n),n.sort((e,t)=>e.value.outlet===ad?-1:t.value.outlet===ad?1:e.value.outlet.localeCompare(t.value.outlet)),n}processSegment(e,t,n,r){for(const o of e)try{return this.processSegmentAgainstRoute(o,t,n,r)}catch(i){if(!(i instanceof zf))throw i}if(this.noLeftoversInUrl(t,n,r))return[];throw new zf}noLeftoversInUrl(e,t,n){return 0===t.length&&!e.children[n]}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo)throw new zf;if((e.outlet||ad)!==r)throw new zf;let i,o=[],s=[];if("**"===e.path){const o=n.length>0?wd(n).parameters:{};i=new Zd(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Yf(e),r,e.component,e,Gf(t),Wf(t)+n.length,Jf(e))}else{const a=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new zf;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(t.matcher||dd)(n,e,t);if(!r)throw new zf;const i={};_d(r.posParams,(e,t)=>{i[t]=e.path});const o=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(t,e,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new Zd(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Yf(e),r,e.component,e,Gf(t),Wf(t)+o.length,Jf(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:u,slicedSegments:l}=Kf(t,o,s,a,this.relativeLinkResolution);if(0===l.length&&u.hasChildren()){const e=this.processChildren(a,u);return[new Kd(i,e)]}if(0===a.length&&0===l.length)return[new Kd(i,[])];const c=this.processSegment(a,u,l,ad);return[new Kd(i,c)]}}function Gf(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Wf(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Kf(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some(n=>Qf(e,t,n)&&$f(n)!==ad)}(e,n,r)){const i=new Td(t,function(e,t,n,r){const i={};i[ad]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&$f(o)!==ad){const n=new Td([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[$f(o)]=n}return i}(e,t,r,new Td(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>Qf(e,t,n))}(e,n,r)){const o=new Td(e.segments,function(e,t,n,r,i,o){const s={};for(const a of r)if(Qf(e,n,a)&&!i[$f(a)]){const n=new Td([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[$f(a)]=n}return Object.assign({},i,s)}(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}const o=new Td(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function Qf(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function $f(e){return e.outlet||ad}function Yf(e){return e.data||{}}function Jf(e){return e.resolve||{}}function Xf(e,t,n,r){const i=Mf(e,t,r);return Sd(i.resolve?i.resolve(t,n):i(t,n))}function Zf(e){return function(t){return t.pipe(Mc(t=>{const n=e(t);return n?W(n).pipe(B(()=>t)):W([t])}))}}class ep{}class tp{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}const np=new Ie("ROUTES");class rp{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(B(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new fd(bd(r.injector.get(np)).map(yd),r)}))}loadModuleFactory(e){return"string"==typeof e?W(this.loader.load(e)):Sd(e()).pipe(K(e=>e instanceof ze?Oc(e):W(this.compiler.compileModuleAsync(e))))}}class ip{}class op{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function sp(e){throw e}function ap(e,t,n){return t.parse("/")}function up(e,t){return Oc(null)}class lp{constructor(e,t,n,r,i,o,s,a){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new A,this.errorHandler=sp,this.malformedUriErrorHandler=ap,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:up,afterPreactivation:up},this.urlHandlingStrategy=new op,this.routeReuseStrategy=new tp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Be),this.console=i.get(Ki);const u=i.get(fo);this.isNgZoneEnabled=u instanceof fo,this.resetConfig(a),this.currentUrlTree=new Ed(new Td([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new rp(o,s,e=>this.triggerEvent(new Zh(e)),e=>this.triggerEvent(new ed(e))),this.routerState=Yd(this.currentUrlTree,this.rootComponentType),this.transitions=new rh({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(hh(e=>0!==e.id),B(e=>Object.assign({},e,{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Mc(e=>{let n=!1,r=!1;return Oc(e).pipe(bh(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),Mc(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Oc(e).pipe(Mc(e=>{const n=this.transitions.getValue();return t.next(new Hh(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?wl:[e]}),Mc(e=>Promise.resolve(e)),function(e,t,n,r){return function(i){return i.pipe(Mc(i=>(function(e,t,n,r,i){return new Af(e,t,n,r,i).apply()})(e,t,n,i.extractedUrl,r).pipe(B(e=>Object.assign({},i,{urlAfterRedirects:e})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),bh(e=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return function(o){return o.pipe(K(o=>(function(e,t,n,r,i="emptyOnly",o="legacy"){return new Hf(e,t,n,r,i,o).recognize()})(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(B(e=>Object.assign({},o,{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),bh(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),bh(e=>{const n=new Qh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=e,a=new Hh(n,this.serializeUrl(r),i,o);t.next(a);const u=Yd(r,this.rootComponentType).snapshot;return Oc(Object.assign({},e,{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign({},s,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),wl}),Zf(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),bh(e=>{const t=new $h(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),B(e=>Object.assign({},e,{guards:Of(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return function(n){return n.pipe(K(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Oc(Object.assign({},n,{guardsResult:!0})):function(e,t,n,r){return W(e).pipe(K(e=>(function(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Oc(o.map(o=>{const s=Mf(o,t,i);let a;if(function(e){return e&&wf(e.canDeactivate)}(s))a=Sd(s.canDeactivate(e,t,n,r));else{if(!wf(s))throw new Error("Invalid CanDeactivate guard");a=Sd(s(e,t,n,r))}return a.pipe(Oh())})).pipe(Ff()):Oc(!0)})(e.component,e.route,n,t,r)),Oh(e=>!0!==e,!0))}(s,r,i,e).pipe(K(n=>n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return W(t).pipe(qh(t=>W([qf(t.route.parent,r),Uf(t.route,r),Bf(e,t.path,n),jf(e,t.route,n)]).pipe(ch(),Oh(e=>!0!==e,!0))),Oh(e=>!0!==e,!0))}(r,o,e,t):Oc(n)),B(e=>Object.assign({},n,{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),bh(e=>{if(_f(e.guardsResult)){const t=hd(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}}),bh(e=>{const t=new Yh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),hh(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Wh(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(n),e.resolve(!1),!1}return!0}),Zf(e=>{if(e.guards.canActivateChecks.length)return Oc(e).pipe(bh(e=>{const t=new Jh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),function(e,t){return function(n){return n.pipe(K(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;return i.length?W(i).pipe(qh(n=>(function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return Oc({});if(1===i.length){const o=i[0];return Xf(e[o],t,n,r).pipe(B(e=>({[o]:e})))}const o={};return W(i).pipe(K(i=>Xf(e[i],t,n,r).pipe(B(e=>(o[i]=e,e))))).pipe(Ah(),B(()=>o))}(e._resolve,e,t,r).pipe(B(t=>(e._resolvedData=t,e.data=Object.assign({},e.data,Xd(e,n).resolve),null)))})(n.route,r,e,t)),function(e,t){return arguments.length>=2?function(n){return b(Vh(e,t),gh(1),Eh(t))(n)}:function(t){return b(Vh((t,n,r)=>e(t,n,r+1)),gh(1))(t)}}((e,t)=>e),B(e=>n)):Oc(n)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),bh(e=>{const t=new Xh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),Zf(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),B(e=>{const t=function(e,t,n){const r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(t,n,r){return n.children.map(n=>{for(const i of r.children)if(t.shouldReuseRoute(i.value.snapshot,n.value))return e(t,n,i);return e(t,n)})}(t,n,r);return new Kd(i,o)}{const r=t.retrieve(n.value);if(r){const e=r.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(let r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,e),e}{const r=new Jd(new rh((i=n.value).url),new rh(i.params),new rh(i.queryParams),new rh(i.fragment),new rh(i.data),i.outlet,i.component,i),o=n.children.map(n=>e(t,n));return new Kd(r,o)}}var i}(e,t._root,n?n._root:void 0);return new $d(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign({},e,{targetRouterState:t})}),bh(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),yf(this.rootContexts,this.routeReuseStrategy,e=>this.triggerEvent(e)),bh({next(){n=!0},complete(){n=!0}}),function(e){return t=>t.lift(new jh(e))}(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Wh(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(n),e.resolve(!1)}this.currentNavigation=null}),Nh(n=>{if(r=!0,function(e){return e&&e[cd]}(n)){const r=_f(n.url);r||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new Wh(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),e.resolve(!1),r&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new Kh(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(i){e.reject(i)}}return wl}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign({},this.getTransition(),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let t=this.parseUrl(e.url);const n="popstate"===e.type?"popstate":"hashchange",r=e.state&&e.state.navigationId?e.state:null;setTimeout(()=>{this.scheduleNavigation(t,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){pd(e),this.config=e.map(yd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:o,queryParamsHandling:s,preserveFragment:a}=t;rt()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,l=a?this.currentUrlTree.fragment:i;let c=null;if(s)switch(s){case"merge":c=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}else c=o?this.currentUrlTree.queryParams:r||null;return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,r,i){if(0===n.length)return af(t.root,t.root,t,r,i);const o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new uf(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return _d(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new uf(n,t,r)}(n);if(o.toRoot())return af(t.root,new Td([],{}),t,r,i);const s=function(e,t,n){if(e.isAbsolute)return new lf(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new lf(n.snapshot._urlSegment,!0,0);const r=sf(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new lf(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(o,t,e),a=s.processChildren?df(s.segmentGroup,s.index,o.commands):hf(s.segmentGroup,s.index,o.commands);return af(s.segmentGroup,a,t,r,i)}(u,this.currentUrlTree,e,c,l)}navigateByUrl(e,t={skipLocationChange:!1}){rt()&&this.isNgZoneEnabled&&!fo.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=_f(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){if(_f(e))return Cd(this.currentUrlTree,e,t);const n=this.parseUrl(e);return Cd(this.currentUrlTree,n,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new Gh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r){const i=this.getTransition();if(i&&"imperative"!==t&&"imperative"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"hashchange"==t&&"popstate"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"popstate"==t&&"hashchange"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);let o=null,s=null;const a=new Promise((e,t)=>{o=e,s=t}),u=++this.navigationId;return this.setTransition({id:u,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:o,reject:s,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,n,r){const i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign({},r,{navigationId:n})):this.location.go(i,"",Object.assign({},r,{navigationId:n}))}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class cp{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.subscription=e.events.subscribe(e=>{e instanceof Gh&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}set preserveQueryParams(e){rt()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}ngOnChanges(e){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r){if(0!==e||t||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:hp(this.skipLocationChange),replaceUrl:hp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:hp(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:hp(this.preserveFragment)})}}function hp(e){return""===e||!!e}class dp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fp,this.attachRef=null}}class fp{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new dp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class pp{constructor(e,t,n,r,i){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Li,this.deactivateEvents=new Li,this.name=r||ad,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new mp(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}class mp{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Jd?this.route:e===fp?this.childContexts:this.parent.get(e,t)}}class gp{}class yp{preload(e,t){return t().pipe(Nh(()=>Oc(null)))}}class vp{preload(e,t){return Oc(null)}}class bp{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new rp(t,n,t=>e.triggerEvent(new Zh(t)),t=>e.triggerEvent(new ed(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(hh(e=>e instanceof Gh),qh(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Be);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return W(n).pipe(J(),B(e=>void 0))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>this.loader.load(e.injector,t).pipe(K(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}class wp{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Hh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Gh&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof od&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new od(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const _p=new Ie("ROUTER_CONFIGURATION"),Sp=new Ie("ROUTER_FORROOT_GUARD"),Cp=[Pa,{provide:Dd,useClass:kd},{provide:lp,useFactory:kp,deps:[Po,Dd,fp,Pa,Mt,Mo,to,np,_p,[ip,new le],[ep,new le]]},fp,{provide:Jd,useFactory:xp,deps:[lp]},{provide:Mo,useClass:qo},bp,vp,yp,{provide:_p,useValue:{enableTracing:!1}}];function Ep(){return new No("Router",lp)}class Tp{constructor(e,t){}static forRoot(e,t){return{ngModule:Tp,providers:[Cp,Dp(e),{provide:Sp,useFactory:Np,deps:[[lp,new le,new he]]},{provide:_p,useValue:t||{}},{provide:xa,useFactory:Ap,deps:[Da,[new ue(Ra),new le],_p]},{provide:wp,useFactory:Ip,deps:[lp,ru,_p]},{provide:gp,useExisting:t&&t.preloadingStrategy?t.preloadingStrategy:vp},{provide:No,multi:!0,useFactory:Ep},[Rp,{provide:Ui,multi:!0,useFactory:Pp,deps:[Rp]},{provide:Mp,useFactory:Op,deps:[Rp]},{provide:Wi,multi:!0,useExisting:Mp}]]}}static forChild(e){return{ngModule:Tp,providers:[Dp(e)]}}}function Ip(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new wp(e,t,n)}function Ap(e,t,n={}){return n.useHash?new Ma(e,t):new La(e,t)}function Np(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Dp(e){return[{provide:Ht,multi:!0,useValue:e},{provide:np,multi:!0,useValue:e}]}function kp(e,t,n,r,i,o,s,a,u={},l,c){const h=new lp(null,t,n,r,i,o,s,bd(a));if(l&&(h.urlHandlingStrategy=l),c&&(h.routeReuseStrategy=c),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const e=su();h.events.subscribe(t=>{e.logGroup(`Router Event: ${t.constructor.name}`),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h}function xp(e){return e.routerState.root}class Rp{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new A}appInitializer(){return this.injector.get(ka,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(lp),r=this.injector.get(_p);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))e(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),e(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Oc(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(_p),n=this.injector.get(bp),r=this.injector.get(wp),i=this.injector.get(lp),o=this.injector.get(Po);e===o.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}function Pp(e){return e.appInitializer.bind(e)}function Op(e){return e.bootstrapListener.bind(e)}const Mp=new Ie("Router Initializer");let Lp=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return this.authService.authState$.pipe(B(e=>(console.log("SPRAWDZAM"),null!==e||(this.router.navigate(["/login"]),!1))))}}return e.ngInjectableDef=pe({factory:function(){return new e(Ue(nh),Ue(lp))},token:e,providedIn:"root"}),e})(),Vp=(()=>{class e{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return this.authService.authState$.pipe(B(e=>(console.log("SPRAWDZAM"),null!==e&&"admin@admin.com"===e.email||(this.router.navigate(["/login"]),!1))))}}return e.ngInjectableDef=pe({factory:function(){return new e(Ue(nh),Ue(lp))},token:e,providedIn:"root"}),e})();class Fp{}class Up{constructor(e,t){this.authService=e,this.router=t,this.title="Programistyczna pupa"}signOut(e){e.preventDefault(),this.authService.signOutUser(),this.router.navigate([""])}}var qp=nr({encapsulation:2,styles:[],data:{}});function jp(e){return ys(0,[(e()(),ts(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),hi(1,212992,null,0,pp,[fp,Vn,an,[8,null],xt],null,null)],(function(e,t){e(t,1,0)}),null)}function Bp(e){return ys(0,[(e()(),ts(0,0,null,null,1,"ng-component",[],null,null,null,jp,qp)),hi(1,49152,null,0,sd,[],null,null)],null,null)}var zp=jr("ng-component",sd,Bp,{},{},[]);class Hp{constructor(){this.maxRating=5,this.rated=!1,this.courseRated=new Li,this.starNumbers=Array(this.maxRating).fill(0).map((e,t)=>t),this.starFilled=Array(this.maxRating).fill(!1)}ngOnInit(){}starHovered(e){this.rated||(this.starFilled=this.starFilled.map((t,n)=>n<=e))}setRate(e){this.rate=e+1,this.rated||this.courseRated.emit(this.rate),this.rated=!0}clearRating(){this.rated||this.starFilled.fill(!1)}}var Gp=nr({encapsulation:0,styles:[["i[_ngcontent-%COMP%]{font-size:1.2rem;color:gold}"]],data:{}});function Wp(e){return ys(0,[(e()(),ts(0,0,null,null,0,"i",[["class","far fa-star ml-1"]],null,null,null,null,null))],null,null)}function Kp(e){return ys(0,[(e()(),ts(0,0,null,null,0,"i",[["class","fas fa-star ml-1"]],null,null,null,null,null))],null,null)}function Qp(e){return ys(0,[(e()(),ts(0,0,null,null,4,"span",[],null,[[null,"mouseover"],[null,"click"]],(function(e,t,n){var r=!0,i=e.component;return"mouseover"===t&&(r=!1!==i.starHovered(e.context.$implicit)&&r),"click"===t&&(r=!1!==i.setRate(e.context.$implicit)&&r),r}),null,null)),(e()(),es(16777216,null,null,1,null,Wp)),hi(2,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),es(16777216,null,null,1,null,Kp)),hi(4,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,!n.starFilled[t.context.$implicit]),e(t,4,0,n.starFilled[t.context.$implicit])}),null)}function $p(e){return ys(0,[(e()(),ts(0,0,null,null,4,"div",[["class","pb-2"]],null,[[null,"mouseout"]],(function(e,t,n){var r=!0;return"mouseout"===t&&(r=!1!==e.component.clearRating()&&r),r}),null,null)),(e()(),ps(-1,null,[" Oce\u0144 kurs: "])),(e()(),ts(2,0,null,null,0,"br",[["class","d-sm-none"]],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,Qp)),hi(4,278528,null,0,za,[Vn,Mn,kn],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,4,0,t.component.starNumbers)}),null)}var Yp=n("o76x");function Jp(e){return function(e){return new _(t=>({unsubscribe:e.onSnapshot(t)}))}(e).pipe(oe())}function Xp(e){return Jp(e).pipe(B(e=>({payload:e,type:"query"})))}function Zp(e){return Xp(e).pipe(B(e=>e.payload.docChanges().map(e=>({type:e.type,payload:e}))))}function em(e,t){return Xp(e).pipe(B(e=>e.payload.docChanges()),Vh((e,n)=>(function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":e[t.newIndex]&&e[t.newIndex].doc.ref.isEqual(t.doc.ref)||e.splice(t.newIndex,0,t);break;case"modified":(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref))&&(t.oldIndex!==t.newIndex?(e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t)):e.splice(t.newIndex,1,t));break;case"removed":e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref)&&e.splice(t.oldIndex,1)}return e}(e,t))}),e})(e,n,t),[]),B(e=>e.map(e=>({type:e.type,payload:e}))))}function tm(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class nm{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){return e&&0!==e.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Zp(this.query))).pipe(B(t=>t.filter(t=>e.indexOf(t.type)>-1)),hh(e=>e.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Zp(this.query)))}auditTrail(e){return this.stateChanges(e).pipe(Vh((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=tm(e),n=em(this.query,t),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)}valueChanges(e={}){const t=Xp(this.query),n=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(n).pipe(B(t=>t.payload.docs.map(t=>e.idField?Object.assign({},t.data(),{[e.idField]:t.id}):t.data())))}get(e){return W(this.query.get(e)).pipe(Wc(this.afs.scheduler.zone))}add(e){return this.ref.add(e)}doc(e){return new rm(this.ref.doc(e),this.afs)}}class rm{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=cm(n,t);return new nm(r,i,this.afs)}snapshotChanges(){const e=Jp(this.ref).pipe(B(e=>({payload:e,type:"value"}))),t=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(t)}valueChanges(){return this.snapshotChanges().pipe(B(e=>e.payload.data()))}get(e){return W(this.ref.get(e)).pipe(Wc(this.afs.scheduler.zone))}}class im{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Zp(this.query))).pipe(B(t=>t.filter(t=>e.indexOf(t.type)>-1)),hh(e=>e.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(Zp(this.query)))}auditTrail(e){return this.stateChanges(e).pipe(Vh((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=tm(e),n=em(this.query,t),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)}valueChanges(){const e=Xp(this.query),t=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(t).pipe(B(e=>e.payload.docs.map(e=>e.data())))}get(e){return W(this.query.get(e)).pipe(Wc(this.afs.scheduler.zone))}}const om=new Ie("angularfire2.enableFirestorePersistence"),sm=new Ie("angularfire2.firestore.persistenceSettings"),am=new Ie("angularfire2.firestore.settings"),um=parseInt($c.a.SDK_VERSION.split(".")[0]),lm=um<5||5==um&&parseInt($c.a.SDK_VERSION.split(".")[1])<8?{timestampsInSnapshots:!0}:{};function cm(e,t=(e=>e)){return{query:t(e),ref:e}}let hm=class{constructor(e,t,n,r,i,o,s){this.scheduler=new Gc(o,i),this.firestore=o.runOutsideAngular(()=>{const n=Zc(e,o,t).firestore();return n.settings(r||lm),n}),this.persistenceEnabled$=n&&!nu(i)?o.runOutsideAngular(()=>{try{return W(this.firestore.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(e){return Oc(!1)}}):Oc(!1)}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=cm(n,t);return new nm(r,i,this)}collectionGroup(e,t){if(um<6)throw"collection group queries require Firebase JS SDK >= 6.0";const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new im(n(r),this)}doc(e){let t;return t="string"==typeof e?this.firestore.doc(e):e,new rm(t,this)}createId(){return this.firestore.collection("_").doc().id}},dm=(()=>{class e{constructor(e){this.db=e}getCourses(){return this.db.collection("/courses").valueChanges({idField:"id"})}getCourse(e){return console.log("Szukam ziomka o id: "+e),this.db.collection("/courses").doc(e).valueChanges()}initializeDb(){Yp.forEach(e=>this.db.collection("/courses").add({ECTS:e.ECTS,description:e.description,imgPath:e.imgPath,name:e.name,seats:e.seats,semester:e.semester,type:e.type}))}addCourse(e){this.db.collection("/courses").add({ECTS:e.ECTS,description:e.description,imgPath:e.imgPath,name:e.name,seats:e.seats,semester:e.semester,type:e.type})}updateCourse(e){console.log("Course edited."),console.log(JSON.stringify(e)),this.db.collection("/courses").doc(e.id).set({ECTS:e.ECTS,description:e.description,imgPath:e.imgPath,name:e.name,seats:e.seats,semester:e.semester,type:e.type})}deleteCourse(e){return console.log("usuwam kurs o id: "+e),this.db.collection("/courses").doc(e).delete()}}return e.ngInjectableDef=pe({factory:function(){return new e(Ue(hm))},token:e,providedIn:"root"}),e})(),fm=(()=>{class e{constructor(e,t){this.db=e,this.authService=t,this.db.collection("/enrollmentsAndRates").valueChanges().subscribe(e=>{this.courseEnrollments=e})}getEnrollments(){return this.db.collection("/enrollmentsAndRates").valueChanges({idField:"id"})}enrollCurrentUserFor(e){return null==this.authService.authState$?(console.log("You have to be signed in to enroll in the course."),!1):(console.log("Zapisuj\u0119 ziomka na: "+e),this.db.collection("/enrollmentsAndRates").add({email:this.authService.getUser().email,courseId:e}),!0)}rateCourse(e,t){if(null==this.authService.authState$)return console.log("You have to be signed in to rate courses."),!1;this.db.collection("/enrollmentsAndRates").valueChanges({idField:"id"}).subscribe(n=>{var r=n.find(t=>t.courseId===e&&t.email===this.authService.getUser().email);this.db.collection("/enrollmentsAndRates").doc(r.id).set({email:r.email,courseId:r.courseId,rate:t})})}averageCourseRating(e){if(!e)return"Ten kurs nie ma jeszcze ocen";for(var t=0,n=0,r=0;r<e.length;r++)e[r].rate&&(t+=e[r].rate,n++);return 0==n?"Ten kurs nie ma jeszcze ocen":Math.round(t/n*100)/100}}return e.ngInjectableDef=pe({factory:function(){return new e(Ue(hm),Ue(nh))},token:e,providedIn:"root"}),e})();var pm=nr({encapsulation:0,styles:[[""]],data:{}});function mm(e){return ys(0,[(e()(),ts(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,1,"button",[["class","btn btn-lg btn-outline-primary my-3"],["id","enrollButton"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.enroll()&&r),r}),null,null)),(e()(),ps(-1,null,["Zapisz si\u0119!"])),(e()(),ts(3,0,null,null,1,"p",[["class","text-danger"]],null,null,null,null,null)),(e()(),ps(4,null,[""," "]))],null,(function(e,t){var n=t.component;e(t,1,0,!n.enoughSeats),e(t,4,0,n.enrollmentPossibleMessage)}))}function gm(e){return ys(0,[(e()(),ts(0,0,null,null,1,"app-star-rating",[],null,[[null,"courseRated"]],(function(e,t,n){var r=!0;return"courseRated"===t&&(r=!1!==e.component.rateCourse(n)&&r),r}),$p,Gp)),hi(1,114688,null,0,Hp,[],null,{courseRated:"courseRated"})],(function(e,t){e(t,1,0)}),null)}function ym(e){return ys(0,[(e()(),ts(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ps(2,null,["Oceni\u0142e\u015b ten kurs na: ",""]))],null,(function(e,t){e(t,2,0,t.component.userRate)}))}function vm(e){return ys(0,[(e()(),ts(0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),ps(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.context.$implicit)}))}function bm(e){return ys(0,[(e()(),ts(0,0,null,null,5,"div",[["class","mt-3"]],null,null,null,null,null)),(e()(),ts(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),ps(-1,null,["Uczestnicy"])),(e()(),ts(3,0,null,null,2,"ol",[],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,vm)),hi(5,278528,null,0,za,[Vn,Mn,kn],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,5,0,t.component.participants)}),null)}function wm(e){return ys(0,[(e()(),ts(0,0,null,null,45,"div",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,37,"div",[["class","row"]],null,null,null,null,null)),(e()(),ts(2,0,null,null,1,"div",[["class","col-md-3"]],null,null,null,null,null)),(e()(),ts(3,0,null,null,0,"img",[["width","95%"]],[[8,"src",4]],null,null,null,null)),(e()(),ts(4,0,null,null,34,"div",[["class","col-md-9"]],null,null,null,null,null)),(e()(),ts(5,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),ps(6,null,["",""])),(e()(),ts(7,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),ts(8,0,null,null,20,"dl",[["class","row"]],null,null,null,null,null)),(e()(),ts(9,0,null,null,1,"dt",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),ps(-1,null,["Semestr: "])),(e()(),ts(11,0,null,null,1,"dd",[["class","col-sm-9"]],null,null,null,null,null)),(e()(),ps(12,null,["",""])),(e()(),ts(13,0,null,null,1,"dt",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),ps(-1,null,["Rodzaj kursu: "])),(e()(),ts(15,0,null,null,1,"dd",[["class","col-sm-9"]],null,null,null,null,null)),(e()(),ps(16,null,["",""])),(e()(),ts(17,0,null,null,1,"dt",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),ps(-1,null,["ECTS:"])),(e()(),ts(19,0,null,null,1,"dd",[["class","col-sm-9"]],null,null,null,null,null)),(e()(),ps(20,null,["",""])),(e()(),ts(21,0,null,null,1,"dt",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),ps(-1,null,["Wolne miejsca:"])),(e()(),ts(23,0,null,null,1,"dd",[["class","col-sm-9"]],null,null,null,null,null)),(e()(),ps(24,null,["",""])),(e()(),ts(25,0,null,null,1,"dt",[["class","col-sm-3"]],null,null,null,null,null)),(e()(),ps(-1,null,["\u015arednia ocen:"])),(e()(),ts(27,0,null,null,1,"dd",[["class","col-sm-9"]],null,null,null,null,null)),(e()(),ps(28,null,["",""])),(e()(),ts(29,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),es(16777216,null,null,2,null,mm)),hi(31,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),di(131072,Xa,[xt]),(e()(),es(16777216,null,null,2,null,gm)),hi(34,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),di(131072,Xa,[xt]),(e()(),es(16777216,null,null,2,null,ym)),hi(37,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),di(131072,Xa,[xt]),(e()(),ts(39,0,null,null,4,"div",[["class","mt-3"]],null,null,null,null,null)),(e()(),ts(40,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),ps(-1,null,["Opis"])),(e()(),ts(42,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ps(43,null,["",""])),(e()(),es(16777216,null,null,1,null,bm)),hi(45,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,31,0,Zn(t,31,0,Xr(t,32).transform(n.notEnrolled))),e(t,34,0,Zn(t,34,0,Xr(t,35).transform(n.enrolledAndNotRated))),e(t,37,0,Zn(t,37,0,Xr(t,38).transform(n.enrolledAndRated))),e(t,45,0,n.participants.length>0)}),(function(e,t){var n=t.component;e(t,3,0,Nr(1,"",n.course.imgPath,"")),e(t,6,0,n.course.name),e(t,12,0,n.course.semester),e(t,16,0,n.courseTypeLabel),e(t,20,0,n.course.ECTS),e(t,24,0,n.availableSeats),e(t,28,0,n.rate),e(t,43,0,n.course.description)}))}function _m(e){return ys(0,[(e()(),ts(0,0,null,null,1,"app-course-details",[],null,null,null,wm,pm)),hi(1,114688,null,0,Na,[dm,fm,Jd,nh],null,null)],(function(e,t){e(t,1,0)}),null)}var Sm=jr("app-course-details",Na,_m,{},{},[]);class Cm{constructor(e,t){this.router=e,this.enrollmentAndRRatingService=t,this.shortDescriptionLength=220,this.deleteCourse=new Li}ngOnInit(){this.enrollmentAndRRatingService.getEnrollments().subscribe(e=>{this.rate=this.enrollmentAndRRatingService.averageCourseRating(e.filter(e=>e.courseId===this.course.id)).toString()})}getShortDescription(){return this.course.description.length<this.shortDescriptionLength?this.course.description:`${this.course.description.substring(0,this.shortDescriptionLength)}... `}delete(e){e.preventDefault(),this.deleteCourse.emit(this.course)}routeToDetails(){this.router.navigate(["/course",this.course.id])}}var Em=nr({encapsulation:0,styles:[[""]],data:{}});function Tm(e){return ys(0,[(e()(),ts(0,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==Xr(e,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),hi(1,671744,null,0,cp,[lp,Jd,xa],{routerLink:[0,"routerLink"]},null),ds(2,2),(e()(),ps(-1,null,["Wi\u0119cej"]))],(function(e,t){var n=e(t,2,0,"/course",t.component.course.id);e(t,1,0,n)}),(function(e,t){e(t,0,0,Xr(t,1).target,Xr(t,1).href)}))}function Im(e){return ys(0,[(e()(),ts(0,0,null,null,19,"div",[["class","list-group-item list-group-item-action"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.routeToDetails()&&r),r}),null,null)),(e()(),ts(1,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(e()(),ts(2,0,null,null,1,"div",[["class","col-sm-2 mb-3 mb-sm-1"]],null,null,null,null,null)),(e()(),ts(3,0,null,null,0,"img",[["style","width: 100%"]],[[8,"src",4]],null,null,null,null)),(e()(),ts(4,0,null,null,7,"div",[["class","col-sm-10"]],null,null,null,null,null)),(e()(),ts(5,0,null,null,2,"div",[["class","d-flex w-100 justify-content-between"]],null,null,null,null,null)),(e()(),ts(6,0,null,null,1,"h5",[["class","mb-1"]],null,null,null,null,null)),(e()(),ps(7,null,["",""])),(e()(),ts(8,0,null,null,3,"p",[["class","mb-1"]],null,null,null,null,null)),(e()(),ps(9,null,["",""])),(e()(),es(16777216,null,null,1,null,Tm)),hi(11,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),ts(12,0,null,null,7,"div",[["class","d-flex w-100 justify-content-between mt-3"]],null,null,null,null,null)),(e()(),ts(13,0,null,null,1,"div",[["class","text-muted"]],null,null,null,null,null)),(e()(),ps(14,null,["",".\xa0semestr, ","\xa0ECTS"])),(e()(),ts(15,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),ts(16,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),ps(-1,null,["\u015arednia ocen: "])),(e()(),ts(18,0,null,null,1,"b",[],null,null,null,null,null)),(e()(),ps(19,null,["",""]))],(function(e,t){var n=t.component;e(t,11,0,n.course.description.length>=n.shortDescriptionLength)}),(function(e,t){var n=t.component;e(t,3,0,Nr(1,"",n.course.imgPath,"")),e(t,7,0,n.course.name),e(t,9,0,n.getShortDescription()),e(t,14,0,n.course.semester,n.course.ECTS),e(t,19,0,n.rate)}))}class Am{transform(e,t){return e?t?(t=t.toLowerCase(),e.filter(e=>e.name.toLowerCase().includes(t))):e:[]}}class Nm{transform(e,t){return e?t&&0!==t.length?e.filter(e=>t.includes(e.semester)):e:[]}}class Dm{transform(e,t,n){if(!e)return[];if(!t&&!n)return e;const r=null==t?-1/0:t,i=null==n?1/0:n;return e.filter(e=>e.ECTS>=r&&e.ECTS<=i)}}class km{transform(e,t,n){if(!e)return[];if(!t&&!n)return e;const r=null==t?-1/0:t,i=null==n?1/0:n;return e.filter(e=>e.rating>=r&&e.rating<=i)}}class xm{constructor(){this.courseFilters=new Ea}ngOnInit(){}deleteCourse(e){this.courses=this.courses.filter(t=>t.id!==e.id)}}var Rm=nr({encapsulation:0,styles:[[""]],data:{}});function Pm(e){return ys(0,[(e()(),ts(0,0,null,null,1,"app-courses-list-item",[],null,[[null,"deleteCourse"]],(function(e,t,n){var r=!0;return"deleteCourse"===t&&(r=!1!==e.component.deleteCourse(n)&&r),r}),Im,Em)),hi(1,114688,null,0,Cm,[lp,fm],{course:[0,"course"]},{deleteCourse:"deleteCourse"})],(function(e,t){e(t,1,0,t.context.$implicit)}),null)}function Om(e){return ys(0,[di(0,km,[]),di(0,Dm,[]),di(0,Nm,[]),di(0,Am,[]),(e()(),ts(4,0,null,null,6,"div",[],null,null,null,null,null)),(e()(),es(16777216,null,null,5,null,Pm)),hi(6,278528,null,0,za,[Vn,Mn,kn],{ngForOf:[0,"ngForOf"]},null),hs(7,2),hs(8,2),hs(9,3),hs(10,3)],(function(e,t){var n=t.component,r=Zn(t,6,0,e(t,10,0,Xr(t,0),Zn(t,6,0,e(t,9,0,Xr(t,1),Zn(t,6,0,e(t,8,0,Xr(t,2),Zn(t,6,0,e(t,7,0,Xr(t,3),n.courses,n.courseFilters.search)),n.courseFilters.semester)),n.courseFilters.minECTS,n.courseFilters.maxECTS)),n.courseFilters.minRate,n.courseFilters.maxRate));e(t,6,0,r)}),null)}class Mm{constructor(e){this.formBuilder=e,this.courseFilters=new Li,this.semesterNumbers=Array(8).fill(0).map((e,t)=>t)}ngOnInit(){this.filtersForm=this.formBuilder.group({search:"",minECTS:"",maxECTS:"",minRate:"",maxRate:"",semester:new gc([])}),this.addCheckboxes(),this.filtersForm.reset()}addCheckboxes(){this.semesterNumbers.forEach((e,t)=>{this.filtersForm.controls.semester.push(new pc(!1))})}clearFilters(e){e.preventDefault(),this.filtersForm.reset(),this.applyFilters()}applyFilters(){let e=this.filtersForm.value;e.semester=e.semester.map((e,t)=>e?t+1:-1).filter(e=>e>0),this.courseFilters.emit(e)}}var Lm=nr({encapsulation:0,styles:[[""]],data:{}});function Vm(e){return ys(0,[(e()(),ts(0,0,null,null,11,"div",[["class","form-check"],["formArrayName","semester"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),hi(1,212992,null,0,Sc,[[3,Nl],[8,null],[8,null]],{name:[0,"name"]},null),fi(2048,null,Nl,null,[Sc]),hi(3,16384,null,0,Pl,[[4,Nl]],null,null),(e()(),ts(4,0,null,null,5,"input",[["class","form-check-input"],["type","checkbox"],["value",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(e,t,n){var r=!0;return"change"===t&&(r=!1!==Xr(e,5).onChange(n.target.checked)&&r),"blur"===t&&(r=!1!==Xr(e,5).onTouched()&&r),r}),null,null)),hi(5,16384,null,0,El,[gn,hn],null,null),fi(1024,null,Cl,(function(e){return[e]}),[El]),hi(7,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(9,16384,null,0,Rl,[[4,kl]],null,null),(e()(),ts(10,0,null,null,1,"label",[["class","form-check-label"],["for","defaultCheck1"]],null,null,null,null,null)),(e()(),ps(11,null,[" ",". semestr "]))],(function(e,t){e(t,1,0,"semester"),e(t,7,0,t.context.$implicit)}),(function(e,t){e(t,0,0,Xr(t,3).ngClassUntouched,Xr(t,3).ngClassTouched,Xr(t,3).ngClassPristine,Xr(t,3).ngClassDirty,Xr(t,3).ngClassValid,Xr(t,3).ngClassInvalid,Xr(t,3).ngClassPending),e(t,4,0,Xr(t,9).ngClassUntouched,Xr(t,9).ngClassTouched,Xr(t,9).ngClassPristine,Xr(t,9).ngClassDirty,Xr(t,9).ngClassValid,Xr(t,9).ngClassInvalid,Xr(t,9).ngClassPending),e(t,11,0,t.context.$implicit+1)}))}function Fm(e){return ys(0,[(e()(),ts(0,0,null,null,48,"div",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),ps(-1,null,["Filtry"])),(e()(),ts(3,0,null,null,1,"a",[["href","#"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.clearFilters(n)&&r),r}),null,null)),(e()(),ps(-1,null,["Wyczy\u015b\u0107"])),(e()(),ts(5,0,null,null,43,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(e,t,n){var r=!0,i=e.component;return"submit"===t&&(r=!1!==Xr(e,7).onSubmit(n)&&r),"reset"===t&&(r=!1!==Xr(e,7).onReset()&&r),"ngSubmit"===t&&(r=!1!==i.applyFilters()&&r),r}),null,null)),hi(6,16384,null,0,vc,[],null,null),hi(7,540672,null,0,wc,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),fi(2048,null,Nl,null,[wc]),hi(9,16384,null,0,Pl,[[4,Nl]],null,null),(e()(),ts(10,0,null,null,1,"h5",[["class","mt-3"]],null,null,null,null,null)),(e()(),ps(-1,null,["Nazwa"])),(e()(),ts(12,0,null,null,5,"input",[["class","form-control"],["formControlName","search"],["placeholder","Wyszukaj"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,13)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,13).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,13)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,13)._compositionEnd(n.target.value)&&r),r}),null,null)),hi(13,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),fi(1024,null,Cl,(function(e){return[e]}),[Il]),hi(15,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(17,16384,null,0,Rl,[[4,kl]],null,null),(e()(),ts(18,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),ts(19,0,null,null,1,"h5",[["class","mt-3"]],null,null,null,null,null)),(e()(),ps(-1,null,["Semestr"])),(e()(),es(16777216,null,null,1,null,Vm)),hi(22,278528,null,0,za,[Vn,Mn,kn],{ngForOf:[0,"ngForOf"]},null),(e()(),ts(23,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),ts(24,0,null,null,1,"h5",[["class","mt-3"]],null,null,null,null,null)),(e()(),ps(-1,null,["ECTS"])),(e()(),ts(26,0,null,null,20,"div",[["class","row"]],null,null,null,null,null)),(e()(),ts(27,0,null,null,9,"div",[["class","col-6"]],null,null,null,null,null)),(e()(),ts(28,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),ps(-1,null,["Min"])),(e()(),ts(30,0,null,null,6,"input",[["class","form-control"],["formControlName","minECTS"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,31)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,31).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,31)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,31)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==Xr(e,32).onChange(n.target.value)&&r),"input"===t&&(r=!1!==Xr(e,32).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,32).onTouched()&&r),r}),null,null)),hi(31,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),hi(32,16384,null,0,Bl,[gn,hn],null,null),fi(1024,null,Cl,(function(e,t){return[e,t]}),[Il,Bl]),hi(34,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(36,16384,null,0,Rl,[[4,kl]],null,null),(e()(),ts(37,0,null,null,9,"div",[["class","col-6"]],null,null,null,null,null)),(e()(),ts(38,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),ps(-1,null,["Max"])),(e()(),ts(40,0,null,null,6,"input",[["class","form-control"],["formControlName","maxECTS"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,41)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,41).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,41)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,41)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==Xr(e,42).onChange(n.target.value)&&r),"input"===t&&(r=!1!==Xr(e,42).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,42).onTouched()&&r),r}),null,null)),hi(41,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),hi(42,16384,null,0,Bl,[gn,hn],null,null),fi(1024,null,Cl,(function(e,t){return[e,t]}),[Il,Bl]),hi(44,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(46,16384,null,0,Rl,[[4,kl]],null,null),(e()(),ts(47,0,null,null,1,"button",[["class","btn btn-outline-primary mt-3"]],null,null,null,null,null)),(e()(),ps(-1,null,["Zastosuj"]))],(function(e,t){var n=t.component;e(t,7,0,n.filtersForm),e(t,15,0,"search"),e(t,22,0,n.semesterNumbers),e(t,34,0,"minECTS"),e(t,44,0,"maxECTS")}),(function(e,t){e(t,5,0,Xr(t,9).ngClassUntouched,Xr(t,9).ngClassTouched,Xr(t,9).ngClassPristine,Xr(t,9).ngClassDirty,Xr(t,9).ngClassValid,Xr(t,9).ngClassInvalid,Xr(t,9).ngClassPending),e(t,12,0,Xr(t,17).ngClassUntouched,Xr(t,17).ngClassTouched,Xr(t,17).ngClassPristine,Xr(t,17).ngClassDirty,Xr(t,17).ngClassValid,Xr(t,17).ngClassInvalid,Xr(t,17).ngClassPending),e(t,30,0,Xr(t,36).ngClassUntouched,Xr(t,36).ngClassTouched,Xr(t,36).ngClassPristine,Xr(t,36).ngClassDirty,Xr(t,36).ngClassValid,Xr(t,36).ngClassInvalid,Xr(t,36).ngClassPending),e(t,40,0,Xr(t,46).ngClassUntouched,Xr(t,46).ngClassTouched,Xr(t,46).ngClassPristine,Xr(t,46).ngClassDirty,Xr(t,46).ngClassValid,Xr(t,46).ngClassInvalid,Xr(t,46).ngClassPending)}))}var Um=nr({encapsulation:0,styles:[["#addCourseContainer[_ngcontent-%COMP%]{background-color:#f1f4f8}"]],data:{}});function qm(e){return ys(0,[(e()(),ts(0,0,null,null,7,"div",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),ps(-1,null,["Lista kurs\xf3w"])),(e()(),ts(3,0,null,null,4,"div",[["class","row mt-4"]],null,null,null,null,null)),(e()(),ts(4,0,null,null,1,"app-courses-list",[["class","col-md-9"]],null,null,null,Om,Rm)),hi(5,114688,null,0,xm,[],{courses:[0,"courses"],courseFilters:[1,"courseFilters"]},null),(e()(),ts(6,0,null,null,1,"app-course-filters",[["class","col-md-3"]],null,[[null,"courseFilters"]],(function(e,t,n){var r=!0;return"courseFilters"===t&&(r=!1!==e.component.applyCourseFilters(n)&&r),r}),Fm,Lm)),hi(7,114688,null,0,Mm,[Ic],null,{courseFilters:"courseFilters"})],(function(e,t){var n=t.component;e(t,5,0,n.courses,n.courseFilters),e(t,7,0)}),null)}function jm(e){return ys(0,[(e()(),ts(0,0,null,null,1,"app-courses",[],null,null,null,qm,Um)),hi(1,114688,null,0,Ta,[dm],null,null)],(function(e,t){e(t,1,0)}),null)}var Bm=jr("app-courses",Ta,jm,{},{},[]),zm=nr({encapsulation:0,styles:[[""]],data:{}});function Hm(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Pole email jest wymagane "]))],null,null)}function Gm(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Zawarto\u015b\u0107 pola nie jest prawid\u0142owym adresem email "]))],null,null)}function Wm(e){return ys(0,[(e()(),ts(0,0,null,null,4,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,Hm)),hi(2,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),es(16777216,null,null,1,null,Gm)),hi(4,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.loginForm.controls.email.errors.required),e(t,4,0,n.loginForm.controls.email.errors.email)}),null)}function Km(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Pole has\u0142o jest wymagane "]))],null,null)}function Qm(e){return ys(0,[(e()(),ts(0,0,null,null,2,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,Km)),hi(2,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,2,0,t.component.loginForm.controls.password.errors.required)}),null)}function $m(e){return ys(0,[(e()(),ts(0,0,null,null,35,"div",[["class","row"]],null,null,null,null,null)),(e()(),ts(1,0,null,null,34,"div",[["class","col-md-5"]],null,null,null,null,null)),(e()(),ts(2,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),ps(-1,null,["Logowanie"])),(e()(),ts(4,0,null,null,31,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(e,t,n){var r=!0,i=e.component;return"submit"===t&&(r=!1!==Xr(e,6).onSubmit(n)&&r),"reset"===t&&(r=!1!==Xr(e,6).onReset()&&r),"ngSubmit"===t&&(r=!1!==i.onSubmit()&&r),r}),null,null)),hi(5,16384,null,0,vc,[],null,null),hi(6,540672,null,0,wc,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),fi(2048,null,Nl,null,[wc]),hi(8,16384,null,0,Pl,[[4,Nl]],null,null),(e()(),ts(9,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),ts(10,0,null,null,7,"label",[["class","center-block"]],null,null,null,null,null)),(e()(),ps(-1,null,[" Email "])),(e()(),ts(12,0,null,null,5,"input",[["class","form-control"],["formControlName","email"],["type","email"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,13)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,13).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,13)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,13)._compositionEnd(n.target.value)&&r),r}),null,null)),hi(13,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),fi(1024,null,Cl,(function(e){return[e]}),[Il]),hi(15,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(17,16384,null,0,Rl,[[4,kl]],null,null),(e()(),es(16777216,null,null,1,null,Wm)),hi(19,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),ts(20,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),ts(21,0,null,null,7,"label",[["class","center-block"]],null,null,null,null,null)),(e()(),ps(-1,null,[" Has\u0142o "])),(e()(),ts(23,0,null,null,5,"input",[["class","form-control"],["formControlName","password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,24)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,24).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,24)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,24)._compositionEnd(n.target.value)&&r),r}),null,null)),hi(24,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),fi(1024,null,Cl,(function(e){return[e]}),[Il]),hi(26,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(28,16384,null,0,Rl,[[4,kl]],null,null),(e()(),es(16777216,null,null,1,null,Qm)),hi(30,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),ts(31,0,null,null,2,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),ts(32,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ps(33,null,["",""])),(e()(),ts(34,0,null,null,1,"button",[["class","btn btn-outline-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),ps(-1,null,["Zaloguj"]))],(function(e,t){var n=t.component;e(t,6,0,n.loginForm),e(t,15,0,"email"),e(t,19,0,n.loginForm.controls.email.invalid&&(n.loginForm.controls.email.dirty||n.loginForm.controls.email.touched)),e(t,26,0,"password"),e(t,30,0,n.loginForm.controls.password.invalid&&(n.loginForm.controls.password.dirty||n.loginForm.controls.password.touched))}),(function(e,t){var n=t.component;e(t,4,0,Xr(t,8).ngClassUntouched,Xr(t,8).ngClassTouched,Xr(t,8).ngClassPristine,Xr(t,8).ngClassDirty,Xr(t,8).ngClassValid,Xr(t,8).ngClassInvalid,Xr(t,8).ngClassPending),e(t,12,0,Xr(t,17).ngClassUntouched,Xr(t,17).ngClassTouched,Xr(t,17).ngClassPristine,Xr(t,17).ngClassDirty,Xr(t,17).ngClassValid,Xr(t,17).ngClassInvalid,Xr(t,17).ngClassPending),e(t,23,0,Xr(t,28).ngClassUntouched,Xr(t,28).ngClassTouched,Xr(t,28).ngClassPristine,Xr(t,28).ngClassDirty,Xr(t,28).ngClassValid,Xr(t,28).ngClassInvalid,Xr(t,28).ngClassPending),e(t,33,0,n.firebaseError),e(t,34,0,!n.loginForm.valid)}))}function Ym(e){return ys(0,[(e()(),ts(0,0,null,null,1,"app-login",[],null,null,null,$m,zm)),hi(1,114688,null,0,Nc,[Ic,lp,nh],null,null)],(function(e,t){e(t,1,0)}),null)}var Jm=jr("app-login",Nc,Ym,{},{},[]),Xm=nr({encapsulation:0,styles:[[""]],data:{}});function Zm(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Pole email jest wymagane "]))],null,null)}function eg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Zawarto\u015b\u0107 pola nie jest prawid\u0142owym adresem email "]))],null,null)}function tg(e){return ys(0,[(e()(),ts(0,0,null,null,4,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,Zm)),hi(2,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),es(16777216,null,null,1,null,eg)),hi(4,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.registerForm.controls.email.errors.required),e(t,4,0,n.registerForm.controls.email.errors.email)}),null)}function ng(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Pole has\u0142o jest wymagane "]))],null,null)}function rg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Has\u0142o musi mie\u0107 przynajmniej 6 znak\xf3w "]))],null,null)}function ig(e){return ys(0,[(e()(),ts(0,0,null,null,4,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,ng)),hi(2,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),es(16777216,null,null,1,null,rg)),hi(4,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.registerForm.controls.password.errors.required),e(t,4,0,n.registerForm.controls.password.errors.minlength)}),null)}function og(e){return ys(0,[(e()(),ts(0,0,null,null,35,"div",[["class","row"]],null,null,null,null,null)),(e()(),ts(1,0,null,null,34,"div",[["class","col-md-5"]],null,null,null,null,null)),(e()(),ts(2,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),ps(-1,null,["Rejestracja"])),(e()(),ts(4,0,null,null,31,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(e,t,n){var r=!0,i=e.component;return"submit"===t&&(r=!1!==Xr(e,6).onSubmit(n)&&r),"reset"===t&&(r=!1!==Xr(e,6).onReset()&&r),"ngSubmit"===t&&(r=!1!==i.onSubmit()&&r),r}),null,null)),hi(5,16384,null,0,vc,[],null,null),hi(6,540672,null,0,wc,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),fi(2048,null,Nl,null,[wc]),hi(8,16384,null,0,Pl,[[4,Nl]],null,null),(e()(),ts(9,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),ts(10,0,null,null,7,"label",[["class","center-block"]],null,null,null,null,null)),(e()(),ps(-1,null,[" Email "])),(e()(),ts(12,0,null,null,5,"input",[["class","form-control"],["formControlName","email"],["type","email"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,13)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,13).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,13)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,13)._compositionEnd(n.target.value)&&r),r}),null,null)),hi(13,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),fi(1024,null,Cl,(function(e){return[e]}),[Il]),hi(15,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(17,16384,null,0,Rl,[[4,kl]],null,null),(e()(),es(16777216,null,null,1,null,tg)),hi(19,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),ts(20,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),ts(21,0,null,null,7,"label",[["class","center-block"]],null,null,null,null,null)),(e()(),ps(-1,null,[" Has\u0142o "])),(e()(),ts(23,0,null,null,5,"input",[["class","form-control"],["formControlName","password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,24)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,24).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,24)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,24)._compositionEnd(n.target.value)&&r),r}),null,null)),hi(24,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),fi(1024,null,Cl,(function(e){return[e]}),[Il]),hi(26,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(28,16384,null,0,Rl,[[4,kl]],null,null),(e()(),es(16777216,null,null,1,null,ig)),hi(30,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),ts(31,0,null,null,2,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),ts(32,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),ps(33,null,["",""])),(e()(),ts(34,0,null,null,1,"button",[["class","btn btn-outline-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),ps(-1,null,["Zarejestruj"]))],(function(e,t){var n=t.component;e(t,6,0,n.registerForm),e(t,15,0,"email"),e(t,19,0,n.registerForm.controls.email.invalid&&(n.registerForm.controls.email.dirty||n.registerForm.controls.email.touched)),e(t,26,0,"password"),e(t,30,0,n.registerForm.controls.password.invalid&&(n.registerForm.controls.password.dirty||n.registerForm.controls.password.touched))}),(function(e,t){var n=t.component;e(t,4,0,Xr(t,8).ngClassUntouched,Xr(t,8).ngClassTouched,Xr(t,8).ngClassPristine,Xr(t,8).ngClassDirty,Xr(t,8).ngClassValid,Xr(t,8).ngClassInvalid,Xr(t,8).ngClassPending),e(t,12,0,Xr(t,17).ngClassUntouched,Xr(t,17).ngClassTouched,Xr(t,17).ngClassPristine,Xr(t,17).ngClassDirty,Xr(t,17).ngClassValid,Xr(t,17).ngClassInvalid,Xr(t,17).ngClassPending),e(t,23,0,Xr(t,28).ngClassUntouched,Xr(t,28).ngClassTouched,Xr(t,28).ngClassPristine,Xr(t,28).ngClassDirty,Xr(t,28).ngClassValid,Xr(t,28).ngClassInvalid,Xr(t,28).ngClassPending),e(t,33,0,n.firebaseError),e(t,34,0,!n.registerForm.valid)}))}function sg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"app-register",[],null,null,null,og,Xm)),hi(1,114688,null,0,Dc,[Ic,lp,nh],null,null)],(function(e,t){e(t,1,0)}),null)}var ag=jr("app-register",Dc,sg,{},{},[]),ug=nr({encapsulation:0,styles:[[""]],data:{}});function lg(e){return ys(0,[(e()(),ts(0,0,null,null,11,"tr",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,1,"th",[["scope","row"]],null,null,null,null,null)),(e()(),ps(2,null,["",""])),(e()(),ts(3,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),ps(4,null,["",""])),(e()(),ts(5,0,null,null,6,"td",[],null,null,null,null,null)),(e()(),ts(6,0,null,null,3,"a",[["class","text-primary"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==Xr(e,7).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),hi(7,671744,null,0,cp,[lp,Jd,xa],{routerLink:[0,"routerLink"]},null),ds(8,2),(e()(),ps(-1,null,["Edytuj"])),(e()(),ts(10,0,null,null,1,"a",[["class","text-danger ml-3"],["href","#"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.deleteCourse(e.context.$implicit.id,n)&&r),r}),null,null)),(e()(),ps(-1,null,["Usu\u0144"]))],(function(e,t){var n=e(t,8,0,"/editCourse",t.context.$implicit.id);e(t,7,0,n)}),(function(e,t){e(t,2,0,t.context.$implicit.id),e(t,4,0,t.context.$implicit.name),e(t,6,0,Xr(t,7).target,Xr(t,7).href)}))}function cg(e){return ys(0,[(e()(),ts(0,0,null,null,17,"div",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),ps(-1,null,["Panel administratora"])),(e()(),ts(3,0,null,null,3,"a",[["class","btn btn-outline-primary mb-3"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==Xr(e,4).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),hi(4,671744,null,0,cp,[lp,Jd,xa],{routerLink:[0,"routerLink"]},null),ds(5,1),(e()(),ps(-1,null,["Dodaj kurs"])),(e()(),ts(7,0,null,null,10,"table",[["class","table table-striped table-sm border"]],null,null,null,null,null)),(e()(),ts(8,0,null,null,6,"thead",[],null,null,null,null,null)),(e()(),ts(9,0,null,null,5,"tr",[],null,null,null,null,null)),(e()(),ts(10,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(e()(),ps(-1,null,["#"])),(e()(),ts(12,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(e()(),ps(-1,null,["Nazwa kursu"])),(e()(),ts(14,0,null,null,0,"th",[["scope","col"]],null,null,null,null,null)),(e()(),ts(15,0,null,null,2,"tbody",[],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,lg)),hi(17,278528,null,0,za,[Vn,Mn,kn],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component,r=e(t,5,0,"/addCourse");e(t,4,0,r),e(t,17,0,n.courses)}),(function(e,t){e(t,3,0,Xr(t,4).target,Xr(t,4).href)}))}function hg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"app-admin-panel",[],null,null,null,cg,ug)),hi(1,114688,null,0,kc,[dm],null,null)],(function(e,t){e(t,1,0)}),null)}var dg=jr("app-admin-panel",kc,hg,{},{},[]);class fg{constructor(e){this.formBuilder=e,this.courseTypes=Aa,this.addCourse=new Li,this.keys=Object.keys(Aa).filter(e=>!isNaN(Number(e)))}ngOnInit(){null==this.course&&(this.course=new Ia,this.course.type=Aa.Lecture),this.courseForm=this.formBuilder.group({name:[this.course.name,Ll.required],imgPath:[this.course.imgPath,[Ll.required,Ll.pattern(/\.(jpeg|jpg|gif|png|bmp)/)]],semester:[this.course.semester,[Ll.required,Ll.min(1),Ll.max(8)]],ECTS:[this.course.ECTS,[Ll.required,Ll.min(1),Ll.max(30)]],seats:[this.course.seats,[Ll.required,Ll.min(1),Ll.max(300)]],type:this.course.type,description:[this.course.description,[Ll.required,Ll.minLength(30)]]})}getCourseTypeLabel(e){return Ia.typeLabel(Number(e))}onSubmit(){let e=this.courseForm.value;console.log(e),this.addCourse.emit(e),this.courseForm.reset({type:"0"})}}var pg=nr({encapsulation:0,styles:[[""]],data:{}});function mg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Nazwa kursu jest wymagana "]))],null,null)}function gg(e){return ys(0,[(e()(),ts(0,0,null,null,2,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,mg)),hi(2,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,2,0,t.component.courseForm.get("name").errors.required)}),null)}function yg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" \u015acie\u017cka do obrazka jest wymagana "]))],null,null)}function vg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Wprowadzony adres nie jest prawid\u0142ow\u0105 \u015bcie\u017ck\u0105 do obrazka "]))],null,null)}function bg(e){return ys(0,[(e()(),ts(0,0,null,null,4,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,yg)),hi(2,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),es(16777216,null,null,1,null,vg)),hi(4,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.courseForm.get("imgPath").errors.required),e(t,4,0,n.courseForm.get("imgPath").errors.pattern)}),null)}function wg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Semestr jest wymagany "]))],null,null)}function _g(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Semestr musi by\u0107 liczb\u0105 z przedzia\u0142u od 1 do 8 "]))],null,null)}function Sg(e){return ys(0,[(e()(),ts(0,0,null,null,4,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,wg)),hi(2,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),es(16777216,null,null,1,null,_g)),hi(4,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.courseForm.get("semester").errors.required),e(t,4,0,n.courseForm.get("semester").errors.min||n.courseForm.get("semester").errors.max)}),null)}function Cg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Liczba punkt\xf3w ECTS jest wymagana "]))],null,null)}function Eg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Liczba punkt\xf3w ECTS musi by\u0107 z przedzia\u0142u 1 do 30 "]))],null,null)}function Tg(e){return ys(0,[(e()(),ts(0,0,null,null,4,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,Cg)),hi(2,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),es(16777216,null,null,1,null,Eg)),hi(4,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.courseForm.get("ECTS").errors.required),e(t,4,0,n.courseForm.get("ECTS").errors.min||n.courseForm.get("ECTS").errors.max)}),null)}function Ig(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Liczba miejsc jest wymagana "]))],null,null)}function Ag(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Liczba miejsc musi by\u0107 w przedziale 1 do 300 "]))],null,null)}function Ng(e){return ys(0,[(e()(),ts(0,0,null,null,4,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,Ig)),hi(2,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),es(16777216,null,null,1,null,Ag)),hi(4,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.courseForm.get("seats").errors.required),e(t,4,0,n.courseForm.get("seats").errors.min||n.courseForm.get("seats").errors.max)}),null)}function Dg(e){return ys(0,[(e()(),ts(0,0,null,null,2,"option",[["selected","selected"]],[[8,"label",0]],null,null,null,null)),hi(1,147456,null,0,Ql,[hn,gn,[2,Kl]],{value:[0,"value"]},null),hi(2,147456,null,0,Yl,[hn,gn,[8,null]],{value:[0,"value"]},null)],(function(e,t){e(t,1,0,t.context.$implicit),e(t,2,0,t.context.$implicit)}),(function(e,t){e(t,0,0,t.component.getCourseTypeLabel(t.context.$implicit))}))}function kg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Opis jest wymagany "]))],null,null)}function xg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),ps(-1,null,[" Opis musi mie\u0107 przynajmniej 50 znak\xf3w "]))],null,null)}function Rg(e){return ys(0,[(e()(),ts(0,0,null,null,4,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),es(16777216,null,null,1,null,kg)),hi(2,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),es(16777216,null,null,1,null,xg)),hi(4,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.courseForm.get("description").errors.required),e(t,4,0,n.courseForm.get("description").errors.minlength)}),null)}function Pg(e){return ys(0,[(e()(),ts(0,0,null,null,87,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(e,t,n){var r=!0,i=e.component;return"submit"===t&&(r=!1!==Xr(e,2).onSubmit(n)&&r),"reset"===t&&(r=!1!==Xr(e,2).onReset()&&r),"ngSubmit"===t&&(r=!1!==i.onSubmit()&&r),r}),null,null)),hi(1,16384,null,0,vc,[],null,null),hi(2,540672,null,0,wc,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),fi(2048,null,Nl,null,[wc]),hi(4,16384,null,0,Pl,[[4,Nl]],null,null),(e()(),ts(5,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),ts(6,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),ps(-1,null,["Nazwa kursu"])),(e()(),ts(8,0,null,null,5,"input",[["class","form-control"],["formControlName","name"],["name","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,9)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,9).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,9)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,9)._compositionEnd(n.target.value)&&r),r}),null,null)),hi(9,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),fi(1024,null,Cl,(function(e){return[e]}),[Il]),hi(11,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(13,16384,null,0,Rl,[[4,kl]],null,null),(e()(),es(16777216,null,null,1,null,gg)),hi(15,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),ts(16,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),ts(17,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),ps(-1,null,["\u015acie\u017cka do obrazka"])),(e()(),ts(19,0,null,null,5,"input",[["class","form-control"],["formControlName","imgPath"],["name","imgPath"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,20)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,20).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,20)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,20)._compositionEnd(n.target.value)&&r),r}),null,null)),hi(20,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),fi(1024,null,Cl,(function(e){return[e]}),[Il]),hi(22,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(24,16384,null,0,Rl,[[4,kl]],null,null),(e()(),es(16777216,null,null,1,null,bg)),hi(26,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),ts(27,0,null,null,36,"div",[["class","form-group row"]],null,null,null,null,null)),(e()(),ts(28,0,null,null,11,"div",[["class","col-md-4"]],null,null,null,null,null)),(e()(),ts(29,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),ps(-1,null,["Semestr"])),(e()(),ts(31,0,null,null,6,"input",[["class","form-control"],["formControlName","semester"],["max","8"],["min","1"],["name","semester"],["step","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,32)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,32).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,32)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,32)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==Xr(e,33).onChange(n.target.value)&&r),"input"===t&&(r=!1!==Xr(e,33).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,33).onTouched()&&r),r}),null,null)),hi(32,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),hi(33,16384,null,0,Bl,[gn,hn],null,null),fi(1024,null,Cl,(function(e,t){return[e,t]}),[Il,Bl]),hi(35,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(37,16384,null,0,Rl,[[4,kl]],null,null),(e()(),es(16777216,null,null,1,null,Sg)),hi(39,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),ts(40,0,null,null,11,"div",[["class","col-md-4"]],null,null,null,null,null)),(e()(),ts(41,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),ps(-1,null,["ECTS"])),(e()(),ts(43,0,null,null,6,"input",[["class","form-control"],["formControlName","ECTS"],["max","30"],["min","1"],["name","ECTS"],["step","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,44)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,44).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,44)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,44)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==Xr(e,45).onChange(n.target.value)&&r),"input"===t&&(r=!1!==Xr(e,45).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,45).onTouched()&&r),r}),null,null)),hi(44,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),hi(45,16384,null,0,Bl,[gn,hn],null,null),fi(1024,null,Cl,(function(e,t){return[e,t]}),[Il,Bl]),hi(47,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(49,16384,null,0,Rl,[[4,kl]],null,null),(e()(),es(16777216,null,null,1,null,Tg)),hi(51,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),ts(52,0,null,null,11,"div",[["class","col-md-4"]],null,null,null,null,null)),(e()(),ts(53,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),ps(-1,null,["Liczba miejsc"])),(e()(),ts(55,0,null,null,6,"input",[["class","form-control"],["formControlName","seats"],["max","300"],["min","1"],["name","seats"],["step","1"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,56)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,56).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,56)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,56)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==Xr(e,57).onChange(n.target.value)&&r),"input"===t&&(r=!1!==Xr(e,57).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,57).onTouched()&&r),r}),null,null)),hi(56,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),hi(57,16384,null,0,Bl,[gn,hn],null,null),fi(1024,null,Cl,(function(e,t){return[e,t]}),[Il,Bl]),hi(59,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(61,16384,null,0,Rl,[[4,kl]],null,null),(e()(),es(16777216,null,null,1,null,Ng)),hi(63,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),ts(64,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),ts(65,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),ps(-1,null,["Typ kursu"])),(e()(),ts(67,0,null,null,7,"select",[["class","custom-select"],["formControlName","type"],["name","type"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(e,t,n){var r=!0;return"change"===t&&(r=!1!==Xr(e,68).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,68).onTouched()&&r),r}),null,null)),hi(68,16384,null,0,Kl,[gn,hn],null,null),fi(1024,null,Cl,(function(e){return[e]}),[Kl]),hi(70,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(72,16384,null,0,Rl,[[4,kl]],null,null),(e()(),es(16777216,null,null,1,null,Dg)),hi(74,278528,null,0,za,[Vn,Mn,kn],{ngForOf:[0,"ngForOf"]},null),(e()(),ts(75,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),ts(76,0,null,null,1,"label",[],null,null,null,null,null)),(e()(),ps(-1,null,["Opis"])),(e()(),ts(78,0,null,null,5,"textarea",[["class","form-control"],["formControlName","description"],["rows","5"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var r=!0;return"input"===t&&(r=!1!==Xr(e,79)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xr(e,79).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xr(e,79)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xr(e,79)._compositionEnd(n.target.value)&&r),r}),null,null)),hi(79,16384,null,0,Il,[gn,hn,[2,Tl]],null,null),fi(1024,null,Cl,(function(e){return[e]}),[Il]),hi(81,671744,null,0,Ec,[[3,Nl],[8,null],[8,null],[6,Cl],[2,bc]],{name:[0,"name"]},null),fi(2048,null,kl,null,[Ec]),hi(83,16384,null,0,Rl,[[4,kl]],null,null),(e()(),es(16777216,null,null,1,null,Rg)),hi(85,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),(e()(),ts(86,0,null,null,1,"button",[["class","btn btn-outline-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),ps(-1,null,["Zapisz"]))],(function(e,t){var n=t.component;e(t,2,0,n.courseForm),e(t,11,0,"name"),e(t,15,0,n.courseForm.get("name").invalid&&(n.courseForm.get("name").dirty||n.courseForm.get("name").touched)),e(t,22,0,"imgPath"),e(t,26,0,n.courseForm.get("imgPath").invalid&&(n.courseForm.get("imgPath").dirty||n.courseForm.get("imgPath").touched)),e(t,35,0,"semester"),e(t,39,0,n.courseForm.get("semester").invalid&&(n.courseForm.get("semester").dirty||n.courseForm.get("semester").touched)),e(t,47,0,"ECTS"),e(t,51,0,n.courseForm.get("ECTS").invalid&&(n.courseForm.get("ECTS").dirty||n.courseForm.get("ECTS").touched)),e(t,59,0,"seats"),e(t,63,0,n.courseForm.get("seats").invalid&&(n.courseForm.get("seats").dirty||n.courseForm.get("seats").touched)),e(t,70,0,"type"),e(t,74,0,n.keys),e(t,81,0,"description"),e(t,85,0,n.courseForm.get("description").invalid&&(n.courseForm.get("description").dirty||n.courseForm.get("description").touched))}),(function(e,t){var n=t.component;e(t,0,0,Xr(t,4).ngClassUntouched,Xr(t,4).ngClassTouched,Xr(t,4).ngClassPristine,Xr(t,4).ngClassDirty,Xr(t,4).ngClassValid,Xr(t,4).ngClassInvalid,Xr(t,4).ngClassPending),e(t,8,0,Xr(t,13).ngClassUntouched,Xr(t,13).ngClassTouched,Xr(t,13).ngClassPristine,Xr(t,13).ngClassDirty,Xr(t,13).ngClassValid,Xr(t,13).ngClassInvalid,Xr(t,13).ngClassPending),e(t,19,0,Xr(t,24).ngClassUntouched,Xr(t,24).ngClassTouched,Xr(t,24).ngClassPristine,Xr(t,24).ngClassDirty,Xr(t,24).ngClassValid,Xr(t,24).ngClassInvalid,Xr(t,24).ngClassPending),e(t,31,0,Xr(t,37).ngClassUntouched,Xr(t,37).ngClassTouched,Xr(t,37).ngClassPristine,Xr(t,37).ngClassDirty,Xr(t,37).ngClassValid,Xr(t,37).ngClassInvalid,Xr(t,37).ngClassPending),e(t,43,0,Xr(t,49).ngClassUntouched,Xr(t,49).ngClassTouched,Xr(t,49).ngClassPristine,Xr(t,49).ngClassDirty,Xr(t,49).ngClassValid,Xr(t,49).ngClassInvalid,Xr(t,49).ngClassPending),e(t,55,0,Xr(t,61).ngClassUntouched,Xr(t,61).ngClassTouched,Xr(t,61).ngClassPristine,Xr(t,61).ngClassDirty,Xr(t,61).ngClassValid,Xr(t,61).ngClassInvalid,Xr(t,61).ngClassPending),e(t,67,0,Xr(t,72).ngClassUntouched,Xr(t,72).ngClassTouched,Xr(t,72).ngClassPristine,Xr(t,72).ngClassDirty,Xr(t,72).ngClassValid,Xr(t,72).ngClassInvalid,Xr(t,72).ngClassPending),e(t,78,0,Xr(t,83).ngClassUntouched,Xr(t,83).ngClassTouched,Xr(t,83).ngClassPristine,Xr(t,83).ngClassDirty,Xr(t,83).ngClassValid,Xr(t,83).ngClassInvalid,Xr(t,83).ngClassPending),e(t,86,0,!n.courseForm.valid)}))}var Og=nr({encapsulation:0,styles:[[""]],data:{}});function Mg(e){return ys(0,[(e()(),ts(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),ps(-1,null,["Dodaj kurs"])),(e()(),ts(3,0,null,null,1,"app-add-course-form",[],null,[[null,"addCourse"]],(function(e,t,n){var r=!0;return"addCourse"===t&&(r=!1!==e.component.addCourse(n)&&r),r}),Pg,pg)),hi(4,114688,null,0,fg,[Ic],null,{addCourse:"addCourse"})],(function(e,t){e(t,4,0)}),null)}function Lg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"app-add-course",[],null,null,null,Mg,Og)),hi(1,114688,null,0,xc,[dm,lp],null,null)],(function(e,t){e(t,1,0)}),null)}var Vg=jr("app-add-course",xc,Lg,{},{},[]),Fg=nr({encapsulation:0,styles:[[""]],data:{}});function Ug(e){return ys(0,[(e()(),ts(0,0,null,null,1,"app-add-course-form",[],null,[[null,"addCourse"]],(function(e,t,n){var r=!0;return"addCourse"===t&&(r=!1!==e.component.editCourse(n)&&r),r}),Pg,pg)),hi(1,114688,null,0,fg,[Ic],{course:[0,"course"]},{addCourse:"addCourse"})],(function(e,t){e(t,1,0,t.component.courseToBeEdited)}),null)}function qg(e){return ys(0,[(e()(),ts(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),ps(2,null,["Edytuj kurs o id: ",""])),(e()(),es(16777216,null,null,2,null,Ug)),hi(4,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),di(131072,Xa,[xt])],(function(e,t){var n=t.component;e(t,4,0,Zn(t,4,0,Xr(t,5).transform(n.courseLoaded)))}),(function(e,t){e(t,2,0,t.component.courseToBeEdited.id)}))}function jg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"app-edit-course",[],null,null,null,qg,Fg)),hi(1,114688,null,0,Rc,[dm,Jd,lp],null,null)],(function(e,t){e(t,1,0)}),null)}var Bg=jr("app-edit-course",Rc,jg,{},{},[]),zg=nr({encapsulation:0,styles:[[""]],data:{}});function Hg(e){return ys(0,[(e()(),ts(0,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),ts(1,0,null,null,3,"a",[["class","nav-link"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==Xr(e,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),hi(2,671744,null,0,cp,[lp,Jd,xa],{routerLink:[0,"routerLink"]},null),ds(3,1),(e()(),ps(-1,null,["Zaloguj"]))],(function(e,t){var n=e(t,3,0,"/login");e(t,2,0,n)}),(function(e,t){e(t,1,0,Xr(t,2).target,Xr(t,2).href)}))}function Gg(e){return ys(0,[(e()(),ts(0,0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),ts(1,0,null,null,3,"a",[["class","nav-link"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==Xr(e,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),hi(2,671744,null,0,cp,[lp,Jd,xa],{routerLink:[0,"routerLink"]},null),ds(3,1),(e()(),ps(-1,null,["Zarejestruj"]))],(function(e,t){var n=e(t,3,0,"/register");e(t,2,0,n)}),(function(e,t){e(t,1,0,Xr(t,2).target,Xr(t,2).href)}))}function Wg(e){return ys(0,[(e()(),ts(0,0,null,null,2,"li",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,1,"a",[["class","nav-link disabled"]],null,null,null,null,null)),(e()(),ps(2,null,["",""]))],null,(function(e,t){e(t,2,0,t.context.ngIf.email)}))}function Kg(e){return ys(0,[(e()(),ts(0,0,null,null,2,"li",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,1,"a",[["class","nav-link"],["href","#"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.signOut(n)&&r),r}),null,null)),(e()(),ps(-1,null,["Wyloguj"]))],null,null)}function Qg(e){return ys(0,[(e()(),ts(0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,3,"a",[["class","nav-link"],["href","#"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==Xr(e,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),hi(2,671744,null,0,cp,[lp,Jd,xa],{routerLink:[0,"routerLink"]},null),ds(3,1),(e()(),ps(-1,null,["Panel administratora"]))],(function(e,t){var n=e(t,3,0,"/admin");e(t,2,0,n)}),(function(e,t){e(t,1,0,Xr(t,2).target,Xr(t,2).href)}))}function $g(e){return ys(0,[(e()(),ts(0,0,null,null,28,"div",[],null,null,null,null,null)),(e()(),ts(1,0,null,null,24,"nav",[["class","navbar navbar-expand-lg navbar-light bg-light mb-4"]],null,null,null,null,null)),(e()(),ts(2,0,null,null,3,"a",[["class","navbar-brand"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==Xr(e,3).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),hi(3,671744,null,0,cp,[lp,Jd,xa],{routerLink:[0,"routerLink"]},null),ds(4,1),(e()(),ps(-1,null,["Kursy"])),(e()(),ts(6,0,null,null,1,"button",[["aria-controls","navbarSupportedContent"],["aria-expanded","false"],["aria-label","Toggle navigation"],["class","navbar-toggler"],["data-target","#navbarSupportedContent"],["data-toggle","collapse"],["type","button"]],null,null,null,null,null)),(e()(),ts(7,0,null,null,0,"span",[["class","navbar-toggler-icon"]],null,null,null,null,null)),(e()(),ts(8,0,null,null,17,"div",[["class","collapse navbar-collapse"],["id","navbarSupportedContent"]],null,null,null,null,null)),(e()(),ts(9,0,null,null,16,"ul",[["class","navbar-nav ml-auto"]],null,null,null,null,null)),(e()(),es(16777216,null,null,2,null,Hg)),hi(11,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),di(131072,Xa,[xt]),(e()(),es(16777216,null,null,2,null,Gg)),hi(14,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),di(131072,Xa,[xt]),(e()(),es(16777216,null,null,2,null,Wg)),hi(17,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),di(131072,Xa,[xt]),(e()(),es(16777216,null,null,2,null,Kg)),hi(20,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),di(131072,Xa,[xt]),(e()(),es(16777216,null,null,3,null,Qg)),hi(23,16384,null,0,Ga,[Vn,Mn],{ngIf:[0,"ngIf"]},null),di(131072,Xa,[xt]),di(131072,Xa,[xt]),(e()(),ts(26,0,null,null,2,"div",[["class","container"]],null,null,null,null,null)),(e()(),ts(27,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),hi(28,212992,null,0,pp,[fp,Vn,an,[8,null],xt],null,null)],(function(e,t){var n=t.component,r=e(t,4,0,"");e(t,3,0,r),e(t,11,0,!Zn(t,11,0,Xr(t,12).transform(n.authService.authState$))),e(t,14,0,!Zn(t,14,0,Xr(t,15).transform(n.authService.authState$))),e(t,17,0,Zn(t,17,0,Xr(t,18).transform(n.authService.authState$))),e(t,20,0,Zn(t,20,0,Xr(t,21).transform(n.authService.authState$))),e(t,23,0,Zn(t,23,0,Xr(t,24).transform(n.authService.authState$))&&"admin@admin.com"==Zn(t,23,0,Xr(t,25).transform(n.authService.authState$)).email),e(t,28,0)}),(function(e,t){e(t,2,0,Xr(t,3).target,Xr(t,3).href)}))}function Yg(e){return ys(0,[(e()(),ts(0,0,null,null,1,"app-root",[],null,null,null,$g,zg)),hi(1,49152,null,0,Up,[nh,lp],null,null)],null,null)}var Jg=jr("app-root",Up,Yg,{},{},[]),Xg=n("wj3C"),Zg=n.n(Xg);(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function i(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}!function(e,r){if(r){var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function r(){this.a=null}function o(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;r.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var s=n.setTimeout;r.prototype.c=function(e){s(e,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.o(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.h(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.v(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new r;return t.prototype.o=function(e){var t=this.f();e.La(t.resolve,t.reject)},t.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,s=new t((function(e,t){i=e,o=t}));return this.La(r(e,i),r(n,o)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.La=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=o,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=i(e),s=r.next();!s.done;s=r.next())o(s.value).La(t,n)}))},t.all=function(e){var n=i(e),r=n.next();return r.done?o([]):new t((function(e,t){function i(t){return function(n){s[t]=n,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).La(i(s.length-1),t),r=n.next()}while(!r.done)}))},t}));var o=o||{},s=this||self;function a(e){return"string"==typeof e}function u(e){return"boolean"==typeof e}var l=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(){}function d(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function f(e){return null===e}function p(e){return"array"==d(e)}function m(e){var t=d(e);return"array"==t||"object"==t&&"number"==typeof e.length}function g(e){return"function"==d(e)}function y(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var v="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(e,t,n){return e.call.apply(e.bind,arguments)}function _(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function S(e,t,n){return(S=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:_).apply(null,arguments)}function C(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var E=Date.now||function(){return+new Date};function T(e,t){function n(){}n.prototype=t.prototype,e.qb=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.gd=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function I(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function A(e){if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function N(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");A.call(this,n+e[r])}function D(e,t){throw new N("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function k(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function x(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function R(){this.b=this.a=null}T(A,Error),A.prototype.name="CustomError",T(N,A),N.prototype.name="AssertionError",k.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var P=new k((function(){return new M}),(function(e){e.reset()}));function O(){var e=je,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function M(){this.next=this.b=this.a=null}function L(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break e}}catch(a){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(y(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(a){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}R.prototype.add=function(e,t){var n=P.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var V=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(a(e))return a(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},F=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=a(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},U=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=a(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},q=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=a(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function j(e,t){return 0<=V(e,t)}function B(e,t){var n;return(n=0<=(t=V(e,t)))&&Array.prototype.splice.call(e,t,1),n}function z(e,t){!function(e,t){for(var n=a(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&Array.prototype.splice.call(e,r,1)}))}function H(e){return Array.prototype.concat.apply([],arguments)}function G(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function W(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function K(e){for(var t in e)return!1;return!0}function Q(e){var t,n={};for(t in e)n[t]=e[t];return n}var $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<$.length;o++)n=$[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function J(e,t){this.a=e===ee&&t||"",this.b=Z}function X(e){return e instanceof J&&e.constructor===J&&e.b===Z?e.a:(D("expected object of type Const, got '"+e+"'"),"type_error:Const")}J.prototype.qa=!0,J.prototype.pa=function(){return this.a},J.prototype.toString=function(){return"Const{"+this.a+"}"};var Z={},ee={},te=new J(ee,"");function ne(){this.a="",this.b=ae}function re(e){return e instanceof ne&&e.constructor===ne&&e.b===ae?e.a:(D("expected object of type TrustedResourceUrl, got '"+e+"' of type "+d(e)),"type_error:TrustedResourceUrl")}function ie(e,t){var n=X(e);if(!se.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return ue(e=n.replace(oe,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof J?X(e):encodeURIComponent(String(e))})))}ne.prototype.qa=!0,ne.prototype.pa=function(){return this.a.toString()},ne.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var oe=/%{(\w+)}/g,se=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,ae={};function ue(e){var t=new ne;return t.a=e,t}var le=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ce=/&/g,he=/</g,de=/>/g,fe=/"/g,pe=/'/g,me=/\x00/g,ge=/[\x00&<>"']/;function ye(e,t){return-1!=e.indexOf(t)}function ve(e,t){return e<t?-1:e>t?1:0}function be(){this.a="",this.b=Ee}function we(e){return e instanceof be&&e.constructor===be&&e.b===Ee?e.a:(D("expected object of type SafeUrl, got '"+e+"' of type "+d(e)),"type_error:SafeUrl")}be.prototype.qa=!0,be.prototype.pa=function(){return this.a.toString()},be.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var _e=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Se(e){return e instanceof be?e:(e="object"==typeof e&&e.qa?e.pa():String(e),_e.test(e)||(e="about:invalid#zClosurez"),Te(e))}var Ce,Ee={};function Te(e){var t=new be;return t.a=e,t}Te("about:blank");e:{var Ie=s.navigator;if(Ie){var Ae=Ie.userAgent;if(Ae){Ce=Ae;break e}}Ce=""}function Ne(e){return ye(Ce,e)}function De(){this.a="",this.b=xe}function ke(e){return e instanceof De&&e.constructor===De&&e.b===xe?e.a:(D("expected object of type SafeHtml, got '"+e+"' of type "+d(e)),"type_error:SafeHtml")}De.prototype.qa=!0,De.prototype.pa=function(){return this.a.toString()},De.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var xe={};function Re(e){var t=new De;return t.a=e,t}Re("<!DOCTYPE html>");var Pe,Oe,Me=Re("");function Le(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ve(e){return ge.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ce,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(he,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(de,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(fe,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(pe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(me,"&#0;"))),e}function Fe(e){s.setTimeout((function(){throw e}),0)}function Ue(e,t){Oe||function(){if(s.Promise&&s.Promise.resolve){var e=s.Promise.resolve(void 0);Oe=function(){e.then(Be)}}else Oe=function(){var e=Be;!g(s.setImmediate)||s.Window&&s.Window.prototype&&!Ne("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(Pe||(Pe=function(){var e=s.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Ne("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",function(e){var t=ue(X(te));L(e,"HTMLIFrameElement"),e.src=re(t).toString()}(e),document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(ke(Me)),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=S((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!Ne("Trident")&&!Ne("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).yb;n.yb=null,e()}},function(e){r.next={yb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){s.setTimeout(e,0)}}()),Pe(e)):s.setImmediate(e)}}(),qe||(Oe(),qe=!0),je.add(e,t)}Re("<br>");var qe=!1,je=new R;function Be(){for(var e;e=O();){try{e.a.call(e.b)}catch(t){Fe(t)}x(P,e)}qe=!1}function ze(e,t){if(this.a=He,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=h)try{var n=this;e.call(t,(function(e){nt(n,Ge,e)}),(function(e){if(!(e instanceof lt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}nt(n,We,e)}))}catch(r){nt(this,We,r)}}var He=0,Ge=2,We=3;function Ke(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ke.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Qe=new k((function(){return new Ke}),(function(e){e.reset()}));function $e(e,t,n){var r=Qe.get();return r.g=e,r.b=t,r.f=n,r}function Ye(e){if(e instanceof ze)return e;var t=new ze(h);return nt(t,Ge,e),t}function Je(e){return new ze((function(t,n){n(e)}))}function Xe(e,t,n){rt(e,t,n,null)||Ue(C(t,e))}function Ze(e){return new ze((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)Xe(e[o],C(i,o,!0),C(i,o,!1));else t(r)}))}function et(e,t){e.b||e.a!=Ge&&e.a!=We||it(e),e.f?e.f.next=t:e.b=t,e.f=t}function tt(e,t,n,r){var i=$e(null,null,null);return i.a=new ze((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(s){o(s)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof lt?o(t):e(i)}catch(s){o(s)}}:o})),i.a.c=e,et(e,i),i.a}function nt(e,t,n){e.a==He&&(e===n&&(t=We,n=new TypeError("Promise cannot resolve to itself")),e.a=1,rt(n,e.Oc,e.Pc,e)||(e.i=n,e.a=t,e.c=null,it(e),t!=We||n instanceof lt||function(e,t){e.g=!0,Ue((function(){e.g&&ut.call(null,t)}))}(e,n)))}function rt(e,t,n,r){if(e instanceof ze)return et(e,$e(t||h,n||null,r)),!0;if(I(e))return e.then(t,n,r),!0;if(y(e))try{var i=e.then;if(g(i))return function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}var s=!1;try{t.call(e,(function(e){s||(s=!0,n.call(i,e))}),o)}catch(a){o(a)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function it(e){e.h||(e.h=!0,Ue(e.Zb,e))}function ot(e){var t=null;return e.b&&(e.b=(t=e.b).next,t.next=null),e.b||(e.f=null),t}function st(e,t,n,r){if(n==We&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,at(t,n,r);else try{t.c?t.g.call(t.f):at(t,n,r)}catch(i){ut.call(null,i)}x(Qe,t)}function at(e,t,n){t==Ge?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}ze.prototype.then=function(e,t,n){return tt(this,g(e)?e:null,g(t)?t:null,n)},ze.prototype.$goog_Thenable=!0,(e=ze.prototype).ka=function(e,t){return(e=$e(e,e,t)).c=!0,et(this,e),this},e.s=function(e,t){return tt(this,null,e,t)},e.cancel=function(e){this.a==He&&Ue((function(){!function e(t,n){if(t.a==He)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==t&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==He&&1==i?e(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):ot(r),st(r,o,We,n)))}t.c=null}else nt(t,We,n)}(this,new lt(e))}),this)},e.Oc=function(e){this.a=He,nt(this,Ge,e)},e.Pc=function(e){this.a=He,nt(this,We,e)},e.Zb=function(){for(var e;e=ot(this);)st(this,e,this.a,this.i);this.h=!1};var ut=Fe;function lt(e){A.call(this,e)}function ct(){0!=ht&&(dt[this[v]||(this[v]=++b)]=this),this.va=this.va,this.la=this.la}T(lt,A),lt.prototype.name="cancel";var ht=0,dt={};function ft(e){if(!e.va&&(e.va=!0,e.za(),0!=ht)){var t=e[v]||(e[v]=++b);if(0!=ht&&e.la&&0<e.la.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete dt[t]}}function pt(e){return pt[" "](e),e}ct.prototype.va=!1,ct.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},pt[" "]=h;var mt,gt,yt=Ne("Opera"),vt=Ne("Trident")||Ne("MSIE"),bt=Ne("Edge"),wt=bt||vt,_t=Ne("Gecko")&&!(ye(Ce.toLowerCase(),"webkit")&&!Ne("Edge"))&&!(Ne("Trident")||Ne("MSIE"))&&!Ne("Edge"),St=ye(Ce.toLowerCase(),"webkit")&&!Ne("Edge");function Ct(){var e=s.document;return e?e.documentMode:void 0}e:{var Et="",Tt=(gt=Ce,_t?/rv:([^\);]+)(\)|;)/.exec(gt):bt?/Edge\/([\d\.]+)/.exec(gt):vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(gt):St?/WebKit\/(\S+)/.exec(gt):yt?/(?:Version)[ \/]?(\S+)/.exec(gt):void 0);if(Tt&&(Et=Tt?Tt[1]:""),vt){var It=Ct();if(null!=It&&It>parseFloat(Et)){mt=String(It);break e}}mt=Et}var At,Nt={};function Dt(e){return function(e,t){var n=Nt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=le(String(mt)).split("."),r=le(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;t=ve(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ve(0==s[2].length,0==a[2].length)||ve(s[2],a[2]),s=s[3],a=a[3]}while(0==t)}return 0<=t}))}At=s.document&&vt?Ct():void 0;var kt=Object.freeze||function(e){return e},xt=!vt||9<=Number(At),Rt=vt&&!Dt("9"),Pt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{s.addEventListener("test",h,t),s.removeEventListener("test",h,t)}catch(n){}return e}();function Ot(e,t){this.type=e,this.b=this.target=t,this.Mb=!0}function Mt(e,t){if(Ot.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(_t){e:{try{pt(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=a(e.pointerType)?e.pointerType:Lt[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Ot.prototype.preventDefault=function(){this.Mb=!1},T(Mt,Ot);var Lt=kt({2:"touch",3:"pen",4:"mouse"});Mt.prototype.preventDefault=function(){Mt.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Rt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Mt.prototype.f=function(){return this.a};var Vt="closure_listenable_"+(1e6*Math.random()|0),Ft=0;function Ut(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Pa=i,this.key=++Ft,this.ta=this.Ka=!1}function qt(e){e.ta=!0,e.listener=null,e.proxy=null,e.src=null,e.Pa=null}function jt(e){this.src=e,this.a={},this.b=0}function Bt(e,t){var n=t.type;n in e.a&&B(e.a[n],t)&&(qt(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function zt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ta&&o.listener==t&&o.capture==!!n&&o.Pa==r)return i}return-1}jt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var s=zt(e,t,r,i);return-1<s?(t=e[s],n||(t.Ka=!1)):((t=new Ut(t,this.src,o,!!r,i)).Ka=n,e.push(t)),t};var Ht="closure_lm_"+(1e6*Math.random()|0),Gt={};function Wt(e,t,n,r,i){if(r&&r.once)Qt(e,t,n,r,i);else if(p(t))for(var o=0;o<t.length;o++)Wt(e,t[o],n,r,i);else n=rn(n),e&&e[Vt]?sn(e,t,n,y(r)?!!r.capture:!!r,i):Kt(e,t,n,!1,r,i)}function Kt(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=y(i)?!!i.capture:!!i,a=tn(e);if(a||(e[Ht]=a=new jt(e)),!(n=a.add(t,n,r,s,o)).proxy)if(r=function(){var e=en,t=xt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Pt||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Jt(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function Qt(e,t,n,r,i){if(p(t))for(var o=0;o<t.length;o++)Qt(e,t[o],n,r,i);else n=rn(n),e&&e[Vt]?an(e,t,n,y(r)?!!r.capture:!!r,i):Kt(e,t,n,!0,r,i)}function $t(e,t,n,r,i){if(p(t))for(var o=0;o<t.length;o++)$t(e,t[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=rn(n),e&&e[Vt]?(e=e.u,(t=String(t).toString())in e.a&&-1<(n=zt(o=e.a[t],n,r,i))&&(qt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):e&&(e=tn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=zt(t,n,r,i)),(n=-1<e?t[e]:null)&&Yt(n))}function Yt(e){if("number"!=typeof e&&e&&!e.ta){var t=e.src;if(t&&t[Vt])Bt(t.u,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Jt(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=tn(t))?(Bt(n,e),0==n.b&&(n.src=null,t[Ht]=null)):qt(e)}}}function Jt(e){return e in Gt?Gt[e]:Gt[e]="on"+e}function Xt(e,t,n,r){var i=!0;if((e=tn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.ta&&(o=Zt(o,r),i=i&&!1!==o)}return i}function Zt(e,t){var n=e.listener,r=e.Pa||e.src;return e.Ka&&Yt(e),n.call(r,t)}function en(e,t){if(e.ta)return!0;if(!xt){if(!t)e:{t=["window","event"];for(var n=s,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Mt(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=Xt(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=Xt(r[i],e,!1,t),n=n&&o}return n}return Zt(e,new Mt(t,this))}function tn(e){return(e=e[Ht])instanceof jt?e:null}var nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function rn(e){return g(e)?e:(e[nn]||(e[nn]=function(t){return e.handleEvent(t)}),e[nn])}function on(){ct.call(this),this.u=new jt(this),this.Sb=this,this.Xa=null}function sn(e,t,n,r,i){e.u.add(String(t),n,!1,r,i)}function an(e,t,n,r,i){e.u.add(String(t),n,!0,r,i)}function un(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.ta&&s.capture==n){var a=s.listener,u=s.Pa||s.src;s.Ka&&Bt(e.u,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Mb}function ln(e,t,n){if(g(e))n&&(e=S(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=S(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function cn(e){var t=null;return new ze((function(n,r){-1==(t=ln((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).s((function(e){throw s.clearTimeout(t),e}))}function hn(e){if(e.U&&"function"==typeof e.U)return e.U();if(a(e))return e.split("");if(m(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function dn(e){if(e.X&&"function"==typeof e.X)return e.X();if(!e.U||"function"!=typeof e.U){if(m(e)||a(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function fn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof fn)for(n=e.X(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function pn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];mn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)mn(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function mn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}T(on,ct),on.prototype[Vt]=!0,on.prototype.addEventListener=function(e,t,n,r){Wt(this,e,t,n,r)},on.prototype.removeEventListener=function(e,t,n,r){$t(this,e,t,n,r)},on.prototype.dispatchEvent=function(e){var t,n=this.Xa;if(n)for(t=[];n;n=n.Xa)t.push(n);n=this.Sb;var r=e.type||e;if(a(e))e=new Ot(e,n);else if(e instanceof Ot)e.target=e.target||n;else{var i=e;Y(e=new Ot(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.b=t[o];i=un(s,r,!0,e)&&i}if(i=un(s=e.b=n,r,!0,e)&&i,i=un(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=un(s=e.b=t[o],r,!1,e)&&i;return i},on.prototype.za=function(){if(on.qb.za.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)qt(n[r]);delete t.a[e],t.b--}}this.Xa=null},(e=fn.prototype).U=function(){pn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.X=function(){return pn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return mn(this.b,e)?this.b[e]:t},e.set=function(e,t){mn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var gn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yn(e,t){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,e instanceof yn?(this.h=void 0!==t?t:e.h,vn(this,e.f),this.i=e.i,this.b=e.b,bn(this,e.l),this.c=e.c,wn(this,Un(e.a)),this.g=e.g):e&&(n=String(e).match(gn))?(this.h=!!t,vn(this,n[1]||"",!0),this.i=Tn(n[2]||""),this.b=Tn(n[3]||"",!0),bn(this,n[4]),this.c=Tn(n[5]||"",!0),wn(this,n[6]||"",!0),this.g=Tn(n[7]||"")):(this.h=!!t,this.a=new Pn(null,this.h))}function vn(e,t,n){e.f=n?Tn(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function bn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.l=t}else e.l=null}function wn(e,t,n){t instanceof Pn?(e.a=t,function(e,t){t&&!e.f&&(On(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ln(this,t),Fn(this,n,e))}),e)),e.f=t}(e.a,e.h)):(n||(t=In(t,xn)),e.a=new Pn(t,e.h))}function _n(e,t,n){e.a.set(t,n)}function Sn(e,t){return e.a.get(t)}function Cn(e){return e instanceof yn?new yn(e):new yn(e,void 0)}function En(e,t){var n=new yn(null,void 0);return vn(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function Tn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function In(e,t,n){return a(e)?(e=encodeURI(e).replace(t,An),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function An(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(In(t,Nn,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.i)&&e.push(In(t,Nn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(In(n,"/"==n.charAt(0)?kn:Dn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",In(n,Rn)),e.join("")},yn.prototype.resolve=function(e){var t=new yn(this),n=!!e.f;n?vn(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.l;var r=e.c;if(n)bn(t,e.l);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ye(i,"./")||ye(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?wn(t,Un(e.a)):n=!!e.g,n&&(t.g=e.g),t};var Nn=/[#\/\?@]/g,Dn=/[#\?:]/g,kn=/[#\?]/g,xn=/[#\?@]/g,Rn=/#/g;function Pn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function On(e){e.a||(e.a=new fn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Mn(e){var t=dn(e);if(void 0===t)throw Error("Keys are undefined");var n=new Pn(null,void 0);e=hn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];p(o)?Fn(n,i,o):n.add(i,o)}return n}function Ln(e,t){On(e),t=qn(e,t),mn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,mn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&pn(e)))}function Vn(e,t){return On(e),t=qn(e,t),mn(e.a.b,t)}function Fn(e,t,n){Ln(e,t),0<n.length&&(e.c=null,e.a.set(qn(e,t),G(n)),e.b+=n.length)}function Un(e){var t=new Pn;return t.c=e.c,e.a&&(t.a=new fn(e.a),t.b=e.b),t}function qn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(e=Pn.prototype).add=function(e,t){On(this),this.c=null,e=qn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){On(this),this.a.forEach((function(n,r){F(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.X=function(){On(this);for(var e=this.a.U(),t=this.a.X(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.U=function(e){On(this);var t=[];if(a(e))Vn(this,e)&&(t=H(t,this.a.get(qn(this,e))));else{e=this.a.U();for(var n=0;n<e.length;n++)t=H(t,e[n])}return t},e.set=function(e,t){return On(this),this.c=null,Vn(this,e=qn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.U(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.X(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.c=e.join("&")};var jn=!vt||9<=Number(At);function Bn(e){var t=document;return a(e)?t.getElementById(e):e}function zn(e,t){W(t,(function(t,n){t&&"object"==typeof t&&t.qa&&(t=t.pa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Hn.hasOwnProperty(n)?e.setAttribute(Hn[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var Hn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Gn(e){if(e&&"number"==typeof e.length){if(y(e))return"function"==typeof e.item||"string"==typeof e.item;if(g(e))return"function"==typeof e.item}return!1}function Wn(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(p(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),e(t,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),Yn(i,r),r.push(":"),e(t,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Yn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Kn,e,t),t.join("")}function Kn(){}var Qn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},$n=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Yn(e,t){t.push('"',e.replace($n,(function(e){var t=Qn[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Qn[e]=t),t})),'"')}function Jn(){var e=gr();return vt&&!!At&&11==At||/Edge\/\d+/.test(e)}function Xn(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function Zn(e,t){t=t||s.window;var n="about:blank";e&&(n=we(Se(e)).toString()),t.location.href=n}function er(e){return!!((e=(e||gr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function tr(e){e=e||s.window;try{e.close()}catch(t){}}function nr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(s in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=gr().toLowerCase(),r&&(t.target=r,ye(n,"crios/")&&(t.target="_blank")),fr(gr())==hr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof be?n:Se(void 0!==n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+e[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(e[s]?1:0))}var s=i.join(",");if((Ne("iPhone")&&!Ne("iPod")&&!Ne("iPad")||Ne("iPad")||Ne("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(L(s=r.document.createElement("A"),"HTMLAnchorElement"),t instanceof be||t instanceof be||(t="object"==typeof t&&t.qa?t.pa():String(t),_e.test(t)||(t="about:invalid#zClosurez"),t=Te(t)),s.href=we(t),s.setAttribute("target",n),e.noreferrer&&s.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(e),s={}):e.noreferrer?(s=r.open("",n,s),e=we(t).toString(),s&&(wt&&ye(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),s.opener=null,e=Re('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ve(e)+'">'),s.document.write(ke(e)),s.document.close())):(s=r.open(we(t).toString(),n,s))&&e.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ir=/^[^@]+@[^@]+$/;function or(){var e=null;return new ze((function(t){"complete"==s.document.readyState?t():(e=function(){t()},Qt(window,"load",e))})).s((function(t){throw $t(window,"load",e),t}))}function sr(e){return e=e||gr(),!("file:"!==_r()&&"ionic:"!==_r()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ar(){var e=s.window;try{return!(!e||e==e.top)}catch(t){return!1}}function ur(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function lr(){return Zg.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Zg.a.INTERNAL.hasOwnProperty("node")?"Node":ur()?"Worker":"Browser"}function cr(){var e=lr();return"ReactNative"===e||"Node"===e}var hr="Firefox",dr="Chrome";function fr(e){var t=e.toLowerCase();return ye(t,"opera/")||ye(t,"opr/")||ye(t,"opios/")?"Opera":ye(t,"iemobile")?"IEMobile":ye(t,"msie")||ye(t,"trident/")?"IE":ye(t,"edge/")?"Edge":ye(t,"firefox/")?hr:ye(t,"silk/")?"Silk":ye(t,"blackberry")?"Blackberry":ye(t,"webos")?"Webos":!ye(t,"safari/")||ye(t,"chrome/")||ye(t,"crios/")||ye(t,"android")?!ye(t,"chrome/")&&!ye(t,"crios/")||ye(t,"edge/")?ye(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":dr:"Safari"}var pr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function mr(e,t){t=t||[];var n,r=[],i={};for(n in pr)i[pr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=lr())?r=fr(i=gr()):"Worker"===r&&(r=fr(i=gr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function gr(){return s.navigator&&s.navigator.userAgent||""}function yr(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function vr(){try{var e=s.localStorage,t=Ir();if(e)return e.setItem(t,"1"),e.removeItem(t),!Jn()||!!s.indexedDB}catch(n){return ur()&&!!s.indexedDB}return!1}function br(){return(wr()||"chrome-extension:"===_r()||sr())&&!cr()&&vr()&&!ur()}function wr(){return"http:"===_r()||"https:"===_r()}function _r(){return s.location&&s.location.protocol||null}function Sr(e){return!er(e=e||gr())&&fr(e)!=hr}function Cr(e){return void 0===e?null:Wn(e)}function Er(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!=e[t]&&(n[t]=e[t]);return n}function Tr(e){if(null!==e)return JSON.parse(e)}function Ir(e){return e||Math.floor(1e9*Math.random()).toString()}function Ar(e){return"Safari"!=fr(e=e||gr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Nr(){var e=s.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Dr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=gr(),t=lr(),this.b=er(e)||"ReactNative"===t}function kr(){var e=s.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function xr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Rr(){return!(!yr("fireauth.oauthhelper",s)&&!yr("fireauth.iframe",s))}Dr.prototype.get=function(){var e=s.navigator;return!e||"boolean"!=typeof e.onLine||!wr()&&"chrome-extension:"!==_r()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Pr,Or={};function Mr(e){Or[e]||(Or[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Lr={};Object.defineProperty(Lr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Lr,"abcd",{configurable:!0,enumerable:!0,value:2}),Pr=2==Lr.abcd}catch(gt){Pr=!1}function Vr(e,t,n){Pr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Fr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Vr(e,n,t[n])}function Ur(e){var t={};return Fr(t,e),t}function qr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Vr(t,n,qr(e[n]));return t}function jr(e){var t={},n=e[zr],r=e[Hr];if(!(e=e[Gr])||e!=Br&&!n)throw Error("Invalid provider user info!");t[Kr]=r||null,t[Wr]=n||null,Vr(this,$r,e),Vr(this,Qr,qr(t))}var Br="EMAIL_SIGNIN",zr="email",Hr="newEmail",Gr="requestType",Wr="email",Kr="fromEmail",Qr="data",$r="operation";function Yr(e,t){this.code=Xr+e,this.message=t||Zr[e]||""}function Jr(e){var t=e&&e.code;return t?new Yr(t.substring(Xr.length),e.message):null}T(Yr,Error),Yr.prototype.A=function(){return{code:this.code,message:this.message}},Yr.prototype.toJSON=function(){return this.A()};var Xr="auth/",Zr={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ei(e){var t=Sn(e=Cn(e),ti)||null,n=Sn(e,ni)||null,r=Sn(e,oi)||null;if(r=r&&ai[r]||null,!t||!n||!r)throw new Yr("argument-error",ti+", "+ni+"and "+oi+" are required in a valid action code URL.");Fr(this,{apiKey:t,operation:r,code:n,continueUrl:Sn(e,ri)||null,languageCode:Sn(e,ii)||null,tenantId:Sn(e,si)||null})}var ti="apiKey",ni="oobCode",ri="continueUrl",ii="languageCode",oi="mode",si="tenantId",ai={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Br,verifyEmail:"VERIFY_EMAIL"};function ui(e){try{return new ei(e)}catch(t){return null}}function li(e){var t=e[pi];if(void 0===t)throw new Yr("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Yr("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[ci];if(n&&"object"==typeof n){t=n[yi];var r=n[mi];if(n=n[gi],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new Yr("argument-error",mi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Yr("argument-error",gi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new Yr("argument-error",yi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Yr("missing-android-pkg-name")}}else if(void 0!==n)throw new Yr("argument-error",ci+" property must be a non null object when specified.");if(this.f=null,(t=e[fi])&&"object"==typeof t){if("string"==typeof(t=t[vi])&&t.length)this.f=t;else if(void 0!==t)throw new Yr("argument-error",vi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new Yr("argument-error",fi+" property must be a non null object when specified.");if(void 0!==(t=e[di])&&"boolean"!=typeof t)throw new Yr("argument-error",di+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[hi])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new Yr("argument-error",hi+" property must be a non empty string when specified.");this.i=e||null}var ci="android",hi="dynamicLinkDomain",di="handleCodeInApp",fi="iOS",pi="url",mi="installApp",gi="minimumVersion",yi="packageName",vi="bundleId";function bi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var wi=null,_i=null;function Si(e){this.f=e.sub,E(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.c=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Ci(e){return(e=Ei(e))&&e.sub&&e.iss&&e.aud&&e.exp?new Si(e):null}function Ei(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(function(e){var t="";return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=_i[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!wi){wi={},_i={};for(var e=0;65>e;e++)wi[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),_i[wi[e]]=e,62<=e&&(_i["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;t(i<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(e,(function(e){t+=String.fromCharCode(e)})),t}(e))}catch(r){}return null}Si.prototype.R=function(){return this.c},Si.prototype.g=function(){return this.b};var Ti,Ii={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ai(e){for(var t in Ii)if(Ii[t].id===e)return{firebaseEndpoint:(e=Ii[t]).cb,secureTokenEndpoint:e.ib};return null}Ti=Ai("__EID__")?"__EID__":void 0;var Ni="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Di=["client_id","response_type","scope","redirect_uri","state"],ki={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Di},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Di},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Di},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Ni},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function xi(e){for(var t in ki)if(ki[t].Fa==e)return ki[t];return null}function Ri(e){var t={};t["facebook.com"]=Vi,t["google.com"]=Ui,t["github.com"]=Fi,t["twitter.com"]=qi;var n=e&&e[Oi];try{if(n)return t[n]?new t[n](e):new Li(e);if(void 0!==e[Pi])return new Mi(e)}catch(r){}return null}var Pi="idToken",Oi="providerId";function Mi(e){var t=e[Oi];if(!t&&e[Pi]){var n=Ci(e[Pi]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Vr(this,"providerId",t),Vr(this,"isNewUser",n)}function Li(e){Mi.call(this,e),Vr(this,"profile",qr((e=Tr(e.rawUserInfo||"{}"))||{}))}function Vi(e){if(Li.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Fi(e){if(Li.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",this.profile&&this.profile.login||null)}function Ui(e){if(Li.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function qi(e){if(Li.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",e.screenName||null)}function ji(e){var t=Cn(e),n=Sn(t,"link"),r=Sn(Cn(n),"link");return t=Sn(t,"deep_link_id"),Sn(Cn(t),"link")||t||r||n||e}function Bi(){}function zi(e,t){return e.then((function(e){if(e[Ds]){var n=Ci(e[Ds]);if(!n||t!=n.f)throw new Yr("user-mismatch");return e}throw new Yr("user-mismatch")})).s((function(e){throw e&&e.code&&e.code==Xr+"user-not-found"?new Yr("user-mismatch"):e}))}function Hi(e,t){if(!t)throw new Yr("internal-error","failed to construct a credential");this.a=t,Vr(this,"providerId",e),Vr(this,"signInMethod",e)}function Gi(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function Wi(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new Hi(e.providerId,e.pendingToken)}catch(t){}return null}function Ki(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Vr(this,"idToken",t.idToken),t.accessToken&&Vr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Vr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Yr("internal-error","failed to construct a credential");Vr(this,"accessToken",t.oauthToken),Vr(this,"secret",t.oauthTokenSecret)}Vr(this,"providerId",e),Vr(this,"signInMethod",n)}function Qi(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Mn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function $i(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Ki(e.providerId,t,e.signInMethod)}catch(n){}}return null}function Yi(e,t){this.Fc=t||[],Fr(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.eb=(xi(e)||{}).Ea||null,this.bb=null}function Ji(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new Yr("argument-error",'SAML provider IDs must be prefixed with "saml."');Yi.call(this,e,[])}function Xi(e){Yi.call(this,e,Di),this.a=[]}function Zi(){Xi.call(this,"facebook.com")}function eo(e){if(!e)throw new Yr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return y(e)&&(t=e.accessToken),(new Zi).credential({accessToken:t})}function to(){Xi.call(this,"github.com")}function no(e){if(!e)throw new Yr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return y(e)&&(t=e.accessToken),(new to).credential({accessToken:t})}function ro(){Xi.call(this,"google.com"),this.ya("profile")}function io(e,t){var n=e;return y(e)&&(n=e.idToken,t=e.accessToken),(new ro).credential({idToken:n,accessToken:t})}function oo(){Yi.call(this,"twitter.com",Ni)}function so(e,t){var n=e;if(y(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Yr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ki("twitter.com",n,"twitter.com")}function ao(e,t,n){this.a=e,this.c=t,Vr(this,"providerId","password"),Vr(this,"signInMethod",n===lo.EMAIL_LINK_SIGN_IN_METHOD?lo.EMAIL_LINK_SIGN_IN_METHOD:lo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function uo(e){return e&&e.email&&e.password?new ao(e.email,e.password,e.signInMethod):null}function lo(){Fr(this,{providerId:"password",isOAuthProvider:!1})}function co(e,t){if(!(t=ho(t)))throw new Yr("argument-error","Invalid email link!");return new ao(e,t.code,lo.EMAIL_LINK_SIGN_IN_METHOD)}function ho(e){return(e=ui(e=ji(e)))&&e.operation===Br?e:null}function fo(e){if(!(e.Va&&e.Ua||e.Ha&&e.ba))throw new Yr("internal-error");this.a=e,Vr(this,"providerId","phone"),Vr(this,"signInMethod","phone")}function po(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return F(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new fo(t)}return null}function mo(e){return e.a.Ha&&e.a.ba?{temporaryProof:e.a.Ha,phoneNumber:e.a.ba}:{sessionInfo:e.a.Va,code:e.a.Ua}}function go(e){try{this.a=e||Zg.a.auth()}catch(t){throw new Yr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Fr(this,{providerId:"phone",isOAuthProvider:!1})}function yo(e,t){if(!e)throw new Yr("missing-verification-id");if(!t)throw new Yr("missing-verification-code");return new fo({Va:e,Ua:t})}function vo(e){if(e.temporaryProof&&e.phoneNumber)return new fo({Ha:e.temporaryProof,ba:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,s=e&&e.pendingToken;try{switch(t){case"google.com":return io(o,n);case"facebook.com":return eo(n);case"github.com":return no(n);case"twitter.com":return so(n,r);default:return n||r||o||s?s?0==t.indexOf("saml.")?new Hi(t,s):new Ki(t,{pendingToken:s,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Xi(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function bo(e){if(!e.isOAuthProvider)throw new Yr("invalid-oauth-provider")}function wo(e,t,n,r,i,o,s){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new Yr("invalid-auth-event");if(this.g&&this.a)throw new Yr("invalid-auth-event");if(this.g&&!this.f)throw new Yr("invalid-auth-event")}function _o(e){return(e=e||{}).type?new wo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Jr(e.error),e.postBody,e.tenantId):null}function So(){this.b=null,this.a=[]}T(Li,Mi),T(Vi,Li),T(Fi,Li),T(Ui,Li),T(qi,Li),Hi.prototype.na=function(e){return Ks(e,Gi(this))},Hi.prototype.b=function(e,t){var n=Gi(this);return n.idToken=t,Qs(e,n)},Hi.prototype.f=function(e,t){return zi($s(e,Gi(this)),t)},Hi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Ki.prototype.na=function(e){return Ks(e,Qi(this))},Ki.prototype.b=function(e,t){var n=Qi(this);return n.idToken=t,Qs(e,n)},Ki.prototype.f=function(e,t){return zi($s(e,Qi(this)),t)},Ki.prototype.A=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Yi.prototype.Ga=function(e){return this.zb=Q(e),this},T(Ji,Yi),T(Xi,Yi),Xi.prototype.ya=function(e){return j(this.a,e)||this.a.push(e),this},Xi.prototype.Hb=function(){return G(this.a)},Xi.prototype.credential=function(e,t){var n;if(!(n=y(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new Yr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ki(this.providerId,n,this.providerId)},T(Zi,Xi),Vr(Zi,"PROVIDER_ID","facebook.com"),Vr(Zi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(to,Xi),Vr(to,"PROVIDER_ID","github.com"),Vr(to,"GITHUB_SIGN_IN_METHOD","github.com"),T(ro,Xi),Vr(ro,"PROVIDER_ID","google.com"),Vr(ro,"GOOGLE_SIGN_IN_METHOD","google.com"),T(oo,Yi),Vr(oo,"PROVIDER_ID","twitter.com"),Vr(oo,"TWITTER_SIGN_IN_METHOD","twitter.com"),ao.prototype.na=function(e){return this.signInMethod==lo.EMAIL_LINK_SIGN_IN_METHOD?Ea(e,ra,{email:this.a,oobCode:this.c}):Ea(e,wa,{email:this.a,password:this.c})},ao.prototype.b=function(e,t){return this.signInMethod==lo.EMAIL_LINK_SIGN_IN_METHOD?Ea(e,ia,{idToken:t,email:this.a,oobCode:this.c}):Ea(e,pa,{idToken:t,email:this.a,password:this.c})},ao.prototype.f=function(e,t){return zi(this.na(e),t)},ao.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Fr(lo,{PROVIDER_ID:"password"}),Fr(lo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Fr(lo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),fo.prototype.na=function(e){return e.Wa(mo(this))},fo.prototype.b=function(e,t){var n=mo(this);return n.idToken=t,Ea(e,Sa,n)},fo.prototype.f=function(e,t){var n=mo(this);return n.operation="REAUTH",zi(e=Ea(e,Ca,n),t)},fo.prototype.A=function(){var e={providerId:"phone"};return this.a.Va&&(e.verificationId=this.a.Va),this.a.Ua&&(e.verificationCode=this.a.Ua),this.a.Ha&&(e.temporaryProof=this.a.Ha),this.a.ba&&(e.phoneNumber=this.a.ba),e},go.prototype.Wa=function(e,t){var n=this.a.b;return Ye(t.verify()).then((function(r){if(!a(r))throw new Yr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return function(e,t){return Ea(e,da,t)}(n,{phoneNumber:e,recaptchaToken:r}).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new Yr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Fr(go,{PROVIDER_ID:"phone"}),Fr(go,{PHONE_SIGN_IN_METHOD:"phone"}),wo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},wo.prototype.R=function(){return this.h},wo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var Co,Eo=null;function To(e){var t="unauthorized-domain",n=void 0,r=Cn(e);e=r.b,"chrome-extension"==(r=r.f)?n=Le("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Le("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Yr.call(this,t,n)}function Io(e,t,n){Yr.call(this,e,n),(e=t||{}).Ab&&Vr(this,"email",e.Ab),e.ba&&Vr(this,"phoneNumber",e.ba),e.credential&&Vr(this,"credential",e.credential),e.Qb&&Vr(this,"tenantId",e.Qb)}function Ao(e){if(e.code){var t=e.code||"";0==t.indexOf(Xr)&&(t=t.substring(Xr.length));var n={credential:vo(e),Qb:e.tenantId};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.ba=e.phoneNumber;else if(!n.credential)return new Yr(t,e.message||void 0);return new Io(t,n,e.message)}return null}function No(){}function Do(){}function ko(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function xo(){}function Ro(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=S(this.fc,this),this.a.onerror=S(this.Ib,this),this.a.onprogress=S(this.gc,this),this.a.ontimeout=S(this.kc,this)}function Po(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Oo(e,t,n){this.reset(e,t,n,void 0,void 0)}function Mo(e){this.f=e,this.b=this.c=this.a=null}function Lo(e,t){this.name=e,this.value=t}T(To,Yr),T(Io,Yr),Io.prototype.A=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.A();return t&&Y(e,t),e},Io.prototype.toJSON=function(){return this.A()},No.prototype.c=null,T(Do,No),Do.prototype.a=function(){var e=ko(this);return e?new ActiveXObject(e):new XMLHttpRequest},Do.prototype.b=function(){var e={};return ko(this)&&(e[0]=!0,e[1]=!0),e},Co=new Do,T(xo,No),xo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Ro;throw Error("Unsupported browser")},xo.prototype.b=function(){return{}},(e=Ro.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Po(this,4)},e.Ib=function(){this.status=500,this.response=this.responseText="",Po(this,4)},e.kc=function(){this.Ib()},e.gc=function(){this.status=200,Po(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Oo.prototype.a=null,Oo.prototype.reset=function(e,t,n,r,i){r||E(),delete this.a},Lo.prototype.toString=function(){return this.name};var Vo=new Lo("SEVERE",1e3),Fo=new Lo("WARNING",900),Uo=new Lo("CONFIG",700),qo=new Lo("FINE",500);Mo.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(D("Root logger has no level set."),null)}(this).value)for(g(t)&&(t=t()),e=new Oo(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var jo={},Bo=null;function zo(e){var t;if(Bo||(Bo=new Mo(""),jo[""]=Bo,Bo.c=Uo),!(t=jo[e])){t=new Mo(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=zo(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,jo[e]=t}return t}function Ho(e,t){e&&e.log(qo,t,void 0)}function Go(e){this.f=e}function Wo(e){on.call(this),this.o=e,this.readyState=Ko,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=zo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}T(Go,No),Go.prototype.a=function(){return new Wo(this.f)},Go.prototype.b=function(e){return function(){return e}}({}),T(Wo,on);var Ko=0;function Qo(e){e.c.read().then(e.ec.bind(e)).catch(e.Oa.bind(e))}function $o(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,Yo(e)}function Yo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Jo(e){on.call(this),this.headers=new fn,this.B=e||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=Xo,this.v=this.P=!1}(e=Wo.prototype).open=function(e,t){if(this.readyState!=Ko)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,Yo(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.o.fetch(new Request(this.g,t)).then(this.jc.bind(this),this.Oa.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,$o(this,!1)),this.readyState=Ko},e.jc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,Yo(this)),this.a&&(this.readyState=3,Yo(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==s.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,Qo(this)):e.text().then(this.ic.bind(this),this.Oa.bind(this)))))},e.ec=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?$o(this,!0):Yo(this),3==this.readyState&&Qo(this)}},e.ic=function(e){this.a&&(this.response=this.responseText=e,$o(this,!0))},e.hc=function(e){this.a&&(this.response=e,$o(this,!0))},e.Oa=function(e){var t=this.h;t&&t.log(Fo,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&$o(this,!0)},e.setRequestHeader=function(e,t){this.i.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(Fo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(Fo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},T(Jo,on);var Xo="";Jo.prototype.b=zo("goog.net.XhrIo");var Zo=/^https?$/i,es=["POST","PUT"];function ts(e){return"content-type"==e.toLowerCase()}function ns(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,rs(e),os(e)}function rs(e){e.I||(e.I=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function is(e){if(e.c&&void 0!==o)if(e.w[1]&&4==as(e)&&2==us(e))Ho(e.b,ls(e,"Local request error detected and ignored"));else if(e.i&&4==as(e))ln(e.Lb,0,e);else if(e.dispatchEvent("readystatechange"),4==as(e)){Ho(e.b,ls(e,"Request complete")),e.c=!1;try{var t,n=us(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.l).match(gn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!Zo.test(a?a.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var l=2<as(e)?e.a.statusText:""}catch(c){Ho(e.b,"Can not get status: "+c.message),l=""}e.h=l+" ["+us(e)+"]",rs(e)}}finally{os(e)}}}function os(e,t){if(e.a){ss(e);var n=e.a,r=e.w[0]?h:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(e=e.b)&&e.log(Vo,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function ss(e){e.a&&e.v&&(e.a.ontimeout=null),e.o&&(s.clearTimeout(e.o),e.o=null)}function as(e){return e.a?e.a.readyState:0}function us(e){try{return 2<as(e)?e.a.status:-1}catch(t){return-1}}function ls(e,t){return t+" ["+e.O+" "+e.l+" "+us(e)+"]"}function cs(e){var t=_s;this.g=[],this.v=t,this.o=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function hs(e,t,n){e.a=!0,e.c=n,e.f=!t,ms(e)}function ds(e){if(e.a){if(!e.u)throw new gs(e);e.u=!1}}function fs(e,t,n,r){e.g.push([t,n,r]),e.a&&ms(e)}function ps(e){return q(e.g,(function(e){return g(e[1])}))}function ms(e){if(e.h&&e.a&&ps(e)){var t=e.h,n=bs[t];n&&(s.clearTimeout(n.a),delete bs[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var u=o.call(i||e.o,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(I(t)||"function"==typeof s.Promise&&t instanceof s.Promise)&&(r=!0,e.i=!0)}catch(l){t=l,e.f=!0,ps(e)||(n=!0)}}e.c=t,r&&(u=S(e.m,e,!0),r=S(e.m,e,!1),t instanceof cs?(fs(t,u,r),t.w=!0):t.then(u,r)),n&&(t=new vs(t),bs[t.a]=t,e.h=t.a)}function gs(){A.call(this)}function ys(){A.call(this)}function vs(e){this.a=s.setTimeout(S(this.c,this),0),this.b=e}(e=Jo.prototype).Ia=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ho(this.b,ls(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(Ho(this.b,ls(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),os(this))},e.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),os(this,!0)),Jo.qb.za.call(this)},e.Lb=function(){this.va||(this.J||this.i||this.f?is(this):this.yc())},e.yc=function(){is(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Xo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Vo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Ho(this.b,"Can not get response: "+t.message),null}},cs.prototype.cancel=function(e){if(this.a)this.c instanceof cs&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(e=new ys(this),ds(this),hs(this,!1,e))}},cs.prototype.m=function(e,t){this.i=!1,hs(this,e,t)},cs.prototype.then=function(e,t,n){var r,i,o=new ze((function(e,t){r=e,i=t}));return fs(this,r,(function(e){e instanceof ys?o.cancel():i(e)})),o.then(e,t,n)},cs.prototype.$goog_Thenable=!0,T(gs,A),gs.prototype.message="Deferred has already fired",gs.prototype.name="AlreadyCalledError",T(ys,A),ys.prototype.message="Deferred was canceled",ys.prototype.name="CanceledError",vs.prototype.c=function(){throw delete bs[this.a],this.b};var bs={};function ws(e){var t={},n=t.document||document,r=re(e).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ia:void 0},a=new cs(o),u=null,h=null!=t.timeout?t.timeout:5e3;return 0<h&&(u=window.setTimeout((function(){Ss(i,!0);var e=new Ts(Es,"Timeout reached for loading script "+r);ds(a),hs(a,!1,e)}),h),o.Ia=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ss(i,t.hd||!1,u),ds(a),hs(a,!0,null))},i.onerror=function(){Ss(i,!0,u);var e=new Ts(Cs,"Error while loading script "+r);ds(a),hs(a,!1,e)},Y(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),zn(i,o),function(e,t){L(e,"HTMLScriptElement"),e.src=re(t),null===c&&(c=(t=(t=s.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&l.test(t)?t:""),(t=c)&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function _s(){if(this&&this.Nb){var e=this.Nb;e&&"SCRIPT"==e.tagName&&Ss(e,!0,this.Ia)}}function Ss(e,t,n){null!=n&&s.clearTimeout(n),e.onload=h,e.onerror=h,e.onreadystatechange=h,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Cs=0,Es=1;function Ts(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),A.call(this,n),this.code=e}function Is(e){this.f=e}function As(e,t,n){if(this.c=e,this.l=(e=t||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=e.secureTokenTimeout||ks,this.g=Q(e.secureTokenHeaders||xs),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.firebaseTimeout||Rs,this.a=Q(e.firebaseHeaders||Ps),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==lr(),!(n=s.XMLHttpRequest||n&&Zg.a.INTERNAL.node&&Zg.a.INTERNAL.node.XMLHttpRequest)&&!ur())throw new Yr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=ur()?new Go(self):cr()?new Is(n):new xo,this.b=null}T(Ts,A),T(Is,No),Is.prototype.a=function(){return new this.f},Is.prototype.b=function(){return{}};var Ns,Ds="idToken",ks=new Dr(3e4,6e4),xs={"Content-Type":"application/x-www-form-urlencoded"},Rs=new Dr(3e4,6e4),Ps={"Content-Type":"application/json"};function Os(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Ms(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Ls(e,t,n,r,i,o,a){(function(){var e=gr();return!((e=fr(e)!=dr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e||vt&&At&&!(9<At))})()||ur()?e=S(e.o,e):(Ns||(Ns=new ze((function(e,t){!function(e,t){((window.gapi||{}).client||{}).request?e():(s[Fs]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){fs(e,null,t,void 0)}(ws(ie(Vs,{onload:Fs})),(function(){t(Error("CORS_UNSUPPORTED"))})))}(e,t)}))),e=S(e.m,e)),e(t,n,r,i,o,a)}As.prototype.R=function(){return this.b},As.prototype.o=function(e,t,n,r,i,o){if(ur()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new Yr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new Jo(this.f);if(o){u.g=Math.max(0,o);var l=setTimeout((function(){u.dispatchEvent("timeout")}),o)}sn(u,"complete",(function(){l&&clearTimeout(l);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Ho(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),an(u,"ready",(function(){l&&clearTimeout(l),ft(this)})),an(u,"timeout",(function(){l&&clearTimeout(l),ft(this),t&&t(null)})),function(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.O=n,e.I=!1,e.c=!0,e.a=e.B?e.B.a():Co.a(),e.w=function(e){return e.c||(e.c=e.b())}(e.B?e.B:Co),e.a.onreadystatechange=S(e.Lb,e);try{Ho(e.b,ls(e,"Opening Xhr")),e.J=!0,e.a.open(n,String(t),!0),e.J=!1}catch(u){return Ho(e.b,ls(e,"Error opening Xhr: "+u.message)),void ns(e,u)}t=r||"";var o=new fn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(m(e)||a(e))F(e,t,void 0);else for(var n=dn(e),r=hn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=ts,n=e.length,r=a(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:a(e)?e.charAt(t):e[t]}(o.X()),r=s.FormData&&t instanceof s.FormData,!j(es,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.P&&(e.a.withCredentials=e.P);try{ss(e),0<e.g&&(e.v=function(e){return vt&&Dt(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),Ho(e.b,ls(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=S(e.Ia,e)):e.o=ln(e.Ia,e.g,e)),Ho(e.b,ls(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(u){Ho(e.b,ls(e,"Send error: "+u.message)),ns(e,u)}}(u,e,n,r,i)};var Vs=new J(ee,"https://apis.google.com/js/client.js?onload=%{onload}"),Fs="__fcb"+Math.floor(1e6*Math.random()).toString();function Us(e){if(!a(e=e.email)||!ir.test(e))throw new Yr("invalid-email")}function qs(e){"email"in e&&Us(e)}function js(e){if(!e[Ds])throw new Yr("internal-error")}function Bs(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Yr("internal-error")}else{if(!e.sessionInfo)throw new Yr("missing-verification-id");if(!e.code)throw new Yr("missing-verification-code")}}As.prototype.m=function(e,t,n,r,i){var o=this;Ns.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(s),t&&t(e)}})})).s((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},As.prototype.ob=function(){return Ea(this,ma,{})},As.prototype.rb=function(e,t){return Ea(this,fa,{idToken:e,email:t})},As.prototype.sb=function(e,t){return Ea(this,pa,{idToken:e,password:t})};var zs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Hs(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Yr("internal-error")}function Gs(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&Vn(e=new Pn(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function Ws(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Ao(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Ao(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Ao(e)):e.errorMessage&&(t=Ta(e.errorMessage)),t)throw t;if(!e[Ds])throw new Yr("internal-error")}function Ks(e,t){return t.returnIdpCredential=!0,Ea(e,ga,t)}function Qs(e,t){return t.returnIdpCredential=!0,Ea(e,va,t)}function $s(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Ea(e,ya,t)}function Ys(e){if(!e.oobCode)throw new Yr("invalid-action-code")}(e=As.prototype).tb=function(e,t){var n={idToken:e},r=[];return W(zs,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Ea(this,fa,n)},e.kb=function(e,t){return Y(e={requestType:"PASSWORD_RESET",email:e},t),Ea(this,ua,e)},e.lb=function(e,t){return Y(e={requestType:"EMAIL_SIGNIN",email:e},t),Ea(this,sa,e)},e.jb=function(e,t){return Y(e={requestType:"VERIFY_EMAIL",idToken:e},t),Ea(this,aa,e)},e.Wa=function(e){return Ea(this,_a,e)},e.ab=function(e,t){return Ea(this,ha,{oobCode:e,newPassword:t})},e.Ma=function(e){return Ea(this,Xs,{oobCode:e})},e.Ya=function(e){return Ea(this,Js,{oobCode:e})};var Js={endpoint:"setAccountInfo",D:Ys,fa:"email",F:!0},Xs={endpoint:"resetPassword",D:Ys,K:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Yr("internal-error")},F:!0},Zs={endpoint:"signupNewUser",D:function(e){if(Us(e),!e.password)throw new Yr("weak-password")},K:js,T:!0,F:!0},ea={endpoint:"createAuthUri",F:!0},ta={endpoint:"deleteAccount",V:["idToken"]},na={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(e){if(!p(e.deleteProvider))throw new Yr("internal-error")}},ra={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Us,K:js,T:!0,F:!0},ia={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Us,K:js,T:!0},oa={endpoint:"getAccountInfo"},sa={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Yr("internal-error");Us(e)},fa:"email",F:!0},aa={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Yr("internal-error")},fa:"email",F:!0},ua={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Yr("internal-error");Us(e)},fa:"email",F:!0},la={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},ca={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(e){if(!e.recaptchaSiteKey)throw new Yr("internal-error")}},ha={endpoint:"resetPassword",D:Ys,fa:"email",F:!0},da={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},fa={endpoint:"setAccountInfo",V:["idToken"],D:qs,T:!0},pa={endpoint:"setAccountInfo",V:["idToken"],D:function(e){if(qs(e),!e.password)throw new Yr("weak-password")},K:js,T:!0},ma={endpoint:"signupNewUser",K:js,T:!0,F:!0},ga={endpoint:"verifyAssertion",D:Hs,Ra:Gs,K:Ws,T:!0,F:!0},ya={endpoint:"verifyAssertion",D:Hs,Ra:Gs,K:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Yr("user-not-found");if(e.errorMessage)throw Ta(e.errorMessage);if(!e[Ds])throw new Yr("internal-error")},T:!0,F:!0},va={endpoint:"verifyAssertion",D:function(e){if(Hs(e),!e.idToken)throw new Yr("internal-error")},Ra:Gs,K:Ws,T:!0},ba={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new Yr("invalid-custom-token")},K:js,T:!0,F:!0},wa={endpoint:"verifyPassword",D:function(e){if(Us(e),!e.password)throw new Yr("wrong-password")},K:js,T:!0,F:!0},_a={endpoint:"verifyPhoneNumber",D:Bs,K:js,F:!0},Sa={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new Yr("internal-error");Bs(e)},K:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Ao(e);js(e)}},Ca={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Bs,K:js,F:!0};function Ea(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.V))return Je(new Yr("internal-error"));var r,i=t.Kb||"POST";return Ye(n).then(t.D).then((function(){return t.T&&(n.returnSecureToken=!0),t.F&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),function(e,t,n,r,i,o){var s=Cn(e.h+t);_n(s,"key",e.c),o&&_n(s,"cb",E().toString());var a="GET"==n;if(a)for(var u in r)r.hasOwnProperty(u)&&_n(s,u,r[u]);return new ze((function(t,o){Ls(e,s.toString(),(function(e){e?e.error?o(Ia(e,i||{})):t(e):o(new Yr("network-request-failed"))}),n,a?void 0:Wn(Er(r)),e.a,e.i.get())}))}(e,t.endpoint,i,n,t.Yb,t.wb||!1)})).then((function(e){return r=e,t.Ra?t.Ra(n,r):r})).then(t.K).then((function(){if(!t.fa)return r;if(!(t.fa in r))throw new Yr("internal-error");return r[t.fa]}))}function Ta(e){return Ia({error:{errors:[{message:e}],code:400,message:e}})}function Ia(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Yr(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",Y(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new Yr(r[i],t);return!t&&e&&(t=Cr(e)),new Yr("internal-error",t)}function Aa(e){this.b=e,this.a=null,this.gb=function(e){return(xa||(xa=new ze((function(e,t){function n(){Nr(),yr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Nr(),t(Error("Network Error"))},timeout:Da.get()})}if(yr("gapi.iframes.Iframe"))e();else if(yr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){yr("gapi.load")?n():t(Error("Network Error"))},Ye(ws(r=ie(Na,{onload:r}))).s((function(){t(Error("Network Error"))}))}})).s((function(e){throw xa=null,e})))).then((function(){return new ze((function(t,n){yr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),ka.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Na=new J(ee,"https://apis.google.com/js/api.js?onload=%{onload}"),Da=new Dr(3e4,6e4),ka=new Dr(5e3,15e3),xa=null;function Ra(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=En(this.i,"/__/auth/iframe"),_n(this.a,"apiKey",this.g),_n(this.a,"appName",this.h),this.b=null,this.c=[]}function Pa(e,t,n,r,i){this.o=e,this.m=t,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Oa(e){try{return Zg.a.app(e).auth().Ca()}catch(t){return[]}}function Ma(e,t,n,r,i){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function La(e){var t=Xn();return function(e){return Ea(e,la,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Cn(t),r=n.f;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Cn(o).b==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:rr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){e=!0;break e}}e=!1}if(!e)throw new To(Xn())}))}function Va(e){return e.l?e.l:(e.l=or().then((function(){if(!e.o){var t=e.c,n=e.h,r=Oa(e.b),i=new Ra(e.u,e.f,e.b);i.f=t,i.b=n,i.c=G(r||[]),e.o=i.toString()}e.i=new Aa(e.o),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");!function(e,t){e.gb.then((function(){e.a.register("authEvent",t,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.i,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=_o(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Ye(n)}return n.status="ERROR",Ye(n)}))}(e)})),e.l)}function Fa(e){return e.m||(e.v=e.c?mr(e.c,Oa(e.b)):null,e.m=new As(e.f,Ai(e.h),e.v)),e.m}function Ua(e,t,n,r,i,o,s,a,u,l,c){return(e=new Pa(e,t,n,r,i)).l=o,e.g=s,e.i=a,e.b=Q(u||null),e.f=l,e.nb(c).toString()}function qa(e){if(this.a=e||Zg.a.INTERNAL.reactNative&&Zg.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Yr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function ja(e){this.b=e,this.a={},this.f=S(this.c,this)}Ra.prototype.toString=function(){return this.f?_n(this.a,"v",this.f):Ln(this.a.a,"v"),this.b?_n(this.a,"eid",this.b):Ln(this.a.a,"eid"),this.c.length?_n(this.a,"fw",this.c.join(",")):Ln(this.a.a,"fw"),this.a.toString()},Pa.prototype.nb=function(e){return this.h=e,this},Pa.prototype.toString=function(){var e=En(this.o,"/__/auth/handler");if(_n(e,"apiKey",this.m),_n(e,"appName",this.c),_n(e,"authType",this.u),this.a.isOAuthProvider){var t=this.a;try{var n=Zg.a.app(this.c).auth().ha()}catch(a){n=null}for(var r in t.bb=n,_n(e,"providerId",this.a.providerId),n=Er((t=this.a).zb))n[r]=n[r].toString();r=t.Fc,n=Q(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}t.eb&&t.bb&&!n[t.eb]&&(n[t.eb]=t.bb),K(n)||_n(e,"customParameters",Cr(n))}if("function"==typeof this.a.Hb&&(t=this.a.Hb()).length&&_n(e,"scopes",t.join(",")),this.l?_n(e,"redirectUrl",this.l):Ln(e.a,"redirectUrl"),this.g?_n(e,"eventId",this.g):Ln(e.a,"eventId"),this.i?_n(e,"v",this.i):Ln(e.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Sn(e,s)&&_n(e,s,this.b[s]);return this.h?_n(e,"tid",this.h):Ln(e.a,"tid"),this.f?_n(e,"eid",this.f):Ln(e.a,"eid"),(s=Oa(this.c)).length&&_n(e,"fw",s.join(",")),e.toString()},(e=Ma.prototype).Fb=function(e,t,n){var r=new Yr("popup-closed-by-user"),i=new Yr("web-storage-unsupported"),o=this,s=!1;return this.ia().then((function(){(function(e){var t={type:"webStorageSupport"};return Va(e).then((function(){return function(e,t){return e.gb.then((function(){return new ze((function(n){e.a.send(t.type,t,n,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.i,t)})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&tr(e),t(i),s=!0)}))})).s((function(){})).then((function(){if(!s)return function(e){return new ze((function(t){return function n(){cn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!s)return cn(n).then((function(){t(r)}))}))},e.Ob=function(){var e=gr();return!Sr(e)&&!Ar(e)},e.Jb=function(){return!1},e.Db=function(e,t,n,r,i,o,s,a){if(!e)return Je(new Yr("popup-blocked"));if(s&&!Sr())return this.ia().s((function(t){tr(e),i(t)})),r(),Ye();this.a||(this.a=La(Fa(this)));var u=this;return this.a.then((function(){var t=u.ia().s((function(t){throw tr(e),i(t),t}));return r(),t})).then((function(){bo(n),s||Zn(Ua(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,a),e)})).s((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Eb=function(e,t,n,r){this.a||(this.a=La(Fa(this)));var i=this;return this.a.then((function(){bo(t),Zn(Ua(i.u,i.f,i.b,e,t,Xn(),n,i.c,void 0,i.h,r))})).s((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ia=function(){var e=this;return Va(this).then((function(){return e.i.gb})).s((function(){throw e.a=null,new Yr("network-request-failed")}))},e.Rb=function(){return!0},e.Aa=function(e){this.g.push(e)},e.Na=function(e){z(this.g,(function(t){return t==e}))},(e=qa.prototype).get=function(e){return Ye(this.a.getItem(e)).then((function(e){return e&&Tr(e)}))},e.set=function(e,t){return Ye(this.a.setItem(e,Cr(t)))},e.S=function(e){return Ye(this.a.removeItem(e))},e.$=function(){},e.ea=function(){};var Ba,za=[];function Ha(e,t,n){K(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Ga(e){this.a=e}function Wa(e){this.c=e,this.b=!1,this.a=[]}function Ka(e,t,n,r){var i,o,s,a,u=n||{},l=null;if(e.b)return Je(Error("connection_unavailable"));var c=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ze((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),c),e.a.push(l={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(a),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Qa(e,l),t})).s((function(t){throw Qa(e,l),t}))}function Qa(e,t){if(t){var n=t.messageChannel;n&&(n.port1.removeEventListener("message",t.onMessage),n.port1.close()),z(e.a,(function(e){return e==t}))}}function $a(){if(!Ja())throw new Yr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=s.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var e=this;ur()&&self?(this.l=function(){var e=ur()?self:null;if(F(za,(function(n){n.b==e&&(t=n)})),!t){var t=new ja(e);za.push(t)}return t}(),Ha(this.l,"keyChanged",(function(t,n){return nu(e).then((function(t){return 0<t.length&&F(e.a,(function(e){e(t)})),{keyProcessed:j(t,n.key)}}))})),Ha(this.l,"ping",(function(){return Ye(["keyChanged"])}))):function(){var e=s.navigator;return e&&e.serviceWorker?Ye().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).s((function(){return null})):Ye(null)}().then((function(t){(e.h=t)&&(e.g=new Wa(new Ga(t)),Ka(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&j(t[0].value,"keyChanged")&&(e.o=!0)})).s((function(){})))}))}function Ya(e){return e.m||(e.m=function e(t){return new ze((function(n,r){var i=t.u.open("firebaseLocalStorageDb",1);i.onerror=function(e){try{e.preventDefault()}catch(t){}r(Error(e.target.error))},i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){r(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(e){return new ze((function(t,n){var r=e.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(t).then((function(){return e(t)})).then((function(e){n(e)})).s((function(e){r(e)}))}}))}(e)),e.m}function Ja(){try{return!!s.indexedDB}catch(gt){return!1}}function Xa(e){return e.objectStore("firebaseLocalStorage")}function Za(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function eu(e){return new ze((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function tu(e,t){return e.g&&e.h&&function(){var e=s.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Ka(e.g,"keyChanged",{key:t},e.o).then((function(){})).s((function(){})):Ye()}function nu(e){return Ya(e).then((function(e){var t=Xa(Za(e,!1));return t.getAll?eu(t.getAll()):new ze((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r}))}function ru(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function iu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Ye().then((function(){if(Ja()){var e=Ir(),r="__sak"+e;return Ba||(Ba=new $a),(n=Ba).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.$((function(e){F(t.a,(function(t){t(e)}))})),e}))}function ou(){this.a={},this.type="inMemory"}function su(){if(!function(){var e="Node"==lr();if(!(e=au()||e&&Zg.a.INTERNAL.node&&Zg.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new Yr("internal-error","The LocalStorage compatibility library was not found.");throw new Yr("web-storage-unsupported")}this.a=au()||Zg.a.INTERNAL.node.localStorage,this.type="localStorage"}function au(){try{var e=s.localStorage,t=Ir();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function uu(){this.type="nullStorage"}function lu(){if(!function(){var e="Node"==lr();if(!(e=cu()||e&&Zg.a.INTERNAL.node&&Zg.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new Yr("internal-error","The SessionStorage compatibility library was not found.");throw new Yr("web-storage-unsupported")}this.a=cu()||Zg.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function cu(){try{var e=s.sessionStorage,t=Ir();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function hu(){var e={};e.Browser=pu,e.Node=mu,e.ReactNative=gu,e.Worker=yu,this.a=e[lr()]}ja.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];F(r,(function(t){i.push(Ye().then((function(){return t(e.origin,e.data.data)})))})),Ze(i).then((function(r){var i=[];F(r,(function(e){i.push({fulfilled:e.Gb,value:e.value,reason:e.reason?e.reason.message:void 0})})),F(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Ga.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Wa.prototype.close=function(){for(;0<this.a.length;)Qa(this,this.a[0]);this.b=!0},(e=$a.prototype).set=function(e,t){var n,r=!1,i=this;return Ya(this).then((function(t){return eu((t=Xa(Za(n=t,!0))).get(e))})).then((function(o){var s=Xa(Za(n,!0));return o?(o.value=t,eu(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=e,o.value=t,eu(s.add(o)))})).then((function(){return i.c[e]=t,tu(i,e)})).ka((function(){r&&i.b--}))},e.get=function(e){return Ya(this).then((function(t){return eu(Xa(Za(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.S=function(e){var t=!1,n=this;return Ya(this).then((function(r){return t=!0,n.b++,eu(Xa(Za(r,!0)).delete(e))})).then((function(){return delete n.c[e],tu(n,e)})).ka((function(){t&&n.b--}))},e.$=function(e){0==this.a.length&&function(e){ru(e),function t(){e.f=setTimeout((function(){e.i=nu(e).then((function(t){0<t.length&&F(e.a,(function(e){e(t)}))})).then((function(){t()})).s((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()}(this),this.a.push(e)},e.ea=function(e){z(this.a,(function(t){return t==e})),0==this.a.length&&ru(this)},(e=iu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.S=function(e){return this.b.then((function(t){return t.S(e)}))},e.$=function(e){this.a.push(e)},e.ea=function(e){z(this.a,(function(t){return t==e}))},(e=ou.prototype).get=function(e){return Ye(this.a[e])},e.set=function(e,t){return this.a[e]=t,Ye()},e.S=function(e){return delete this.a[e],Ye()},e.$=function(){},e.ea=function(){},(e=su.prototype).get=function(e){var t=this;return Ye().then((function(){return Tr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Ye().then((function(){var r=Cr(t);null===r?n.S(e):n.a.setItem(e,r)}))},e.S=function(e){var t=this;return Ye().then((function(){t.a.removeItem(e)}))},e.$=function(e){s.window&&Wt(s.window,"storage",e)},e.ea=function(e){s.window&&$t(s.window,"storage",e)},(e=uu.prototype).get=function(){return Ye(null)},e.set=function(){return Ye()},e.S=function(){return Ye()},e.$=function(){},e.ea=function(){},(e=lu.prototype).get=function(e){var t=this;return Ye().then((function(){return Tr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Ye().then((function(){var r=Cr(t);null===r?n.S(e):n.a.setItem(e,r)}))},e.S=function(e){var t=this;return Ye().then((function(){t.a.removeItem(e)}))},e.$=function(){},e.ea=function(){};var du,fu,pu={C:su,Ta:lu},mu={C:su,Ta:lu},gu={C:qa,Ta:uu},yu={C:su,Ta:uu},vu={ad:"local",NONE:"none",cd:"session"};function bu(){var e=!(Ar(gr())||!ar()),t=Sr(),n=vr();this.m=e,this.h=t,this.l=n,this.a={},du||(du=new hu),e=du;try{this.g=!Jn()&&Rr()||!s.indexedDB?new e.a.C:new iu(ur()?new ou:new e.a.C)}catch(r){this.g=new ou,this.h=!0}try{this.i=new e.a.Ta}catch(r){this.i=new ou}this.u=new ou,this.f=S(this.Pb,this),this.b={}}function wu(){return fu||(fu=new bu),fu}function _u(e,t){switch(t){case"session":return e.i;case"none":return e.u;default:return e.g}}function Su(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Cu(e,t,n){return n=Su(t,n),"local"==t.C&&(e.b[n]=null),_u(e,t.C).S(n)}function Eu(e){e.c&&(clearInterval(e.c),e.c=null)}function Tu(e){this.a=e,this.b=wu()}(e=bu.prototype).get=function(e,t){return _u(this,e.C).get(Su(e,t))},e.set=function(e,t,n){var r=Su(e,n),i=this,o=_u(this,e.C);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.C&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=Su(e,t),this.l&&(this.b[e]=s.localStorage.getItem(e)),K(this.a)&&(_u(this,"local").$(this.f),this.h||(Jn()||!Rr())&&s.indexedDB||!this.l||function(e){Eu(e),e.c=setInterval((function(){for(var t in e.a){var n=s.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Mt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Pb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=Su(e,t),this.a[e]&&(z(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),K(this.a)&&(_u(this,"local").ea(this.f),Eu(this))},e.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?_u(this,"local").ea(this.f):Eu(this),this.m)if(n=s.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?s.localStorage.setItem(t,r):s.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===s.localStorage.getItem(t)||(o.b[t]=s.localStorage.getItem(t),o.$a(t))},vt&&At&&10==At&&s.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else F(e,S(this.$a,this))},e.$a=function(e){this.a[e]&&F(this.a[e],(function(e){e()}))};var Iu,Au={name:"authEvent",C:"local"};function Nu(){this.a=wu()}function Du(e,t){this.b=ku,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0!==Iu||(Iu=s.Int32Array?new Int32Array(Vu):Vu),this.reset()}T(Du,(function(){this.b=-1}));for(var ku=64,xu=ku-1,Ru=[],Pu=0;Pu<xu;Pu++)Ru[Pu]=0;var Ou=H(128,Ru);function Mu(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){var o=(0|n[t-16])+(((i=0|n[t-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[t-7])+(((r=0|n[t-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+s|0}r=0|e.a[0],i=0|e.a[1];var a=0|e.a[2],u=0|e.a[3],l=0|e.a[4],c=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((s=(s=l&c^~l&h)+(0|Iu[t])|0)+(0|n[t])|0)|0,o=h,h=c,c=l,l=u+s|0,u=a,a=i,i=r,r=s+d|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+a|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+l|0,e.a[5]=e.a[5]+c|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Lu(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(a(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Mu(e),i=0);else{if(!m(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Mu(e),i=0)}}e.c=i,e.g+=n}Du.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):G(this.h)};var Vu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Fu(){Du.call(this,8,Uu)}T(Fu,Du);var Uu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function qu(e,t,n,r,i){this.u=e,this.i=t,this.l=n,this.m=r||null,this.o=i||null,this.h=t+":"+n,this.v=new Nu,this.g=new Tu(this.h),this.f=null,this.b=[],this.a=this.c=null}function ju(e){return new Yr("invalid-cordova-configuration",e)}function Bu(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function zu(e){return e.f||(e.f=e.ia().then((function(){return new ze((function(t){e.Aa((function n(r){return t(r),e.Na(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),Hu(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=ji(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Tr(Sn(o=Cn(i),"firebaseError")||null))?Jr(o):null)?new wo(r.c,r.b,null,null,o,null,r.R()):new wo(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}Bu(e,i)}))}var n=new wo("unknown",null,null,null,new Yr("no-auth-event")),r=!1,i=cn(500).then((function(){return Hu(e).then((function(){r||Bu(e,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(yr("BuildInfo.packageName",s).toLowerCase()+"://")&&t({url:e}),"function"==typeof o)try{o(e)}catch(n){console.error(n)}},Eo||(Eo=new So),function(e){var t=Eo;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=yr("universalLinks.subscribe",s))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Hu(e){var t=null;return function(e){return e.b.get(Au,e.a).then((function(e){return _o(e)}))}(e.g).then((function(n){return t=n,Cu((n=e.g).b,Au,n.a)})).then((function(){return t}))}function Gu(e){this.a=e,this.b=wu()}(e=qu.prototype).ia=function(){return this.Da?this.Da:this.Da=(sr(void 0)?or().then((function(){return new ze((function(e,t){var n=s.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Je(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof yr("universalLinks.subscribe",s))throw ju("cordova-universal-links-plugin-fix is not installed");if(void 0===yr("BuildInfo.packageName",s))throw ju("cordova-plugin-buildinfo is not installed");if("function"!=typeof yr("cordova.plugins.browsertab.openUrl",s))throw ju("cordova-plugin-browsertab is not installed");if("function"!=typeof yr("cordova.InAppBrowser.open",s))throw ju("cordova-plugin-inappbrowser is not installed")}),(function(){throw new Yr("cordova-not-ready")}))},e.Fb=function(e,t){return t(new Yr("operation-not-supported-in-this-environment")),Ye()},e.Db=function(){return Je(new Yr("operation-not-supported-in-this-environment"))},e.Rb=function(){return!1},e.Ob=function(){return!0},e.Jb=function(){return!0},e.Eb=function(e,t,n,r){if(this.c)return Je(new Yr("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,l=null,c=null;return this.c=Ye().then((function(){return bo(t),zu(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new wo(t,r,null,o,new Yr("no-auth-event"),null,i),u=yr("BuildInfo.packageName",s);if("string"!=typeof u)throw new Yr("invalid-cordova-configuration");var l=yr("BuildInfo.displayName",s),c={};if(gr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=u;else{if(!gr().toLowerCase().match(/android/))return Je(new Yr("operation-not-supported-in-this-environment"));c.apn=u}l&&(c.appDisplayName=l),o=function(e){var t=new Fu;Lu(t,e),e=[];var n=8*t.g;Lu(t,Ou,56>t.c?56-t.c:t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Mu(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return U(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}(o),c.sessionId=o;var h=Ua(e.u,e.i,e.l,t,n,null,r,e.m,c,e.o,i);return e.ia().then((function(){var t=e.h;return e.v.a.set(Au,a.A(),t)})).then((function(){var t=yr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof t)throw new Yr("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=yr("cordova.plugins.browsertab.openUrl",s)))throw new Yr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=yr("cordova.InAppBrowser.open",s)))throw new Yr("invalid-cordova-configuration");t=gr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new ze((function(e,t){u=function(){var t=yr("cordova.plugins.browsertab.close",s);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(u),c=function(){kr()&&l()},o.addEventListener("resume",l=function(){a||(a=cn(2e3).then((function(){t(new Yr("redirect-cancelled-by-user"))})))},!1),gr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).s((function(e){return Hu(i).then((function(){throw e}))}))})).ka((function(){l&&o.removeEventListener("resume",l,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),u&&i.Na(u),i.c=null}))},e.Aa=function(e){this.b.push(e),zu(this).s((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new wo("unknown",null,null,null,new Yr("no-auth-event")),e(t))}))},e.Na=function(e){z(this.b,(function(t){return t==e}))};var Wu={name:"pendingRedirect",C:"session"};function Ku(e){return Cu(e.b,Wu,e.a)}function Qu(e,t,n){this.i={},this.v=0,this.B=e,this.u=t,this.m=n,this.h=[],this.f=!1,this.l=S(this.o,this),this.b=new ul,this.w=new fl,this.g=new Gu(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=$u(this.B,this.u,this.m,Ti)}function $u(e,t,n,r){var i=Zg.a.SDK_VERSION||null;return sr()?new qu(e,t,n,i,r):new Ma(e,t,n,i,r)}function Yu(e){e.f||(e.f=!0,e.a.Aa(e.l));var t=e.a;return e.a.ia().s((function(n){throw e.a==t&&e.reset(),n}))}function Ju(e){e.a.Ob()&&Yu(e).s((function(t){var n=new wo("unknown",null,null,null,new Yr("operation-not-supported-in-this-environment"));rl(t)&&e.o(n)})),e.a.Jb()||ll(e.b)}function Xu(e,t){j(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Wu,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Ku(e.g).then((function(){Yu(e).s((function(t){var n=new wo("unknown",null,null,null,new Yr("operation-not-supported-in-this-environment"));rl(t)&&e.o(n)}))})):Ju(e)})).s((function(){Ju(e)}))}function Zu(e,t){z(e.h,(function(e){return e==t}))}Qu.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=$u(this.B,this.u,this.m),this.i={}},Qu.prototype.o=function(e){if(!e)throw new Yr("invalid-auth-event");if(6e5<=E()-this.v&&(this.i={},this.v=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.v=E())),t=!0;break}}return ll(this.b),t};var el=new Dr(2e3,1e4),tl=new Dr(3e4,6e4);function nl(e,t,n,r,i,o,s){return e.a.Db(t,n,r,(function(){e.f||(e.f=!0,e.a.Aa(e.l))}),(function(){e.reset()}),i,o,s)}function rl(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function il(e,t,n,r,i){var o;return function(e){return e.b.set(Wu,"pending",e.a)}(e.g).then((function(){return e.a.Eb(t,n,r,i).s((function(t){if(rl(t))throw new Yr("operation-not-supported-in-this-environment");return o=t,Ku(e.g).then((function(){throw o}))})).then((function(){return e.a.Rb()?new ze((function(){})):Ku(e.g).then((function(){return e.oa()})).then((function(){})).s((function(){}))}))}))}function ol(e,t,n,r,i){return e.a.Fb(r,(function(e){t.ja(n,null,e,i)}),el.get())}Qu.prototype.oa=function(){return this.b.oa()};var sl={};function al(e,t,n){var r=t+":"+n;return sl[r]||(sl[r]=new Qu(e,t,n)),sl[r]}function ul(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function ll(e){e.g||(e.g=!0,dl(e,!1,null,null))}function cl(e){e.g&&!e.i&&dl(e,!1,null,null)}function hl(e,t){if(e.b=function(){return Ye(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function dl(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Je(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):hl(e,n):hl(e,{user:null}),e.f=[],e.c=[]}function fl(){}function pl(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(e){this.vb=e},enumerable:!1})}function ml(e,t){this.a=t,Vr(this,"verificationId",e)}function gl(e,t,n,r){return new go(e).Wa(t,n).then((function(e){return new ml(e,r)}))}function yl(e){var t=Ei(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Yr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Fr(this,{token:e,expirationTime:xr(1e3*t.exp),authTime:xr(1e3*t.auth_time),issuedAtTime:xr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function vl(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function bl(e){this.f=e,this.b=this.a=null,this.c=0}function wl(e,t){var n=t[Ds],r=t.refreshToken;t=_l(t.expiresIn),e.b=n,e.c=t,e.a=r}function _l(e){return E()+1e3*parseInt(e,10)}function Sl(e,t){this.a=e||null,this.b=t||null,Fr(this,{lastSignInTime:xr(t||null),creationTime:xr(e||null)})}function Cl(e,t,n,r,i,o){Fr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function El(e,t){for(var n in Ot.call(this,e),t)this[n]=t[n]}function Tl(e,t,n){this.I=[],this.l=e.apiKey,this.m=e.appName,this.o=e.authDomain||null,e=Zg.a.SDK_VERSION?mr(Zg.a.SDK_VERSION):null,this.a=new As(this.l,Ai(Ti),e),this.b=new bl(this.a),Rl(this,t[Ds]),wl(this.b,t),Vr(this,"refreshToken",this.b.a),Ml(this,n||{}),on.call(this),this.J=!1,this.o&&br()&&(this.i=al(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(e){return new vl((function(){return e.G(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.b.c-E()-3e5;return 0<t?t:0}))}(this),this.W=S(this.Ja,this);var r=this;this.ga=null,this.xa=function(e){r.ua(e.g)},this.Z=null,this.P=[],this.wa=function(e){Al(r,e.c)},this.Y=null}function Il(e,t){e.Z&&$t(e.Z,"languageCodeChanged",e.xa),(e.Z=t)&&Wt(t,"languageCodeChanged",e.xa)}function Al(e,t){e.P=t,Ms(e.a,Zg.a.SDK_VERSION?mr(Zg.a.SDK_VERSION,e.P):null)}function Nl(e,t){e.Y&&$t(e.Y,"frameworkChanged",e.wa),(e.Y=t)&&Wt(t,"frameworkChanged",e.wa)}function Dl(e){try{return Zg.a.app(e.m).auth()}catch(t){throw new Yr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function kl(e){e.B||e.w.b||(e.w.start(),$t(e,"tokenChanged",e.W),Wt(e,"tokenChanged",e.W))}function xl(e){$t(e,"tokenChanged",e.W),e.w.stop()}function Rl(e,t){e.ma=t,Vr(e,"_lat",t)}function Pl(e){for(var t=[],n=0;n<e.O.length;n++)t.push(e.O[n](e));return Ze(t).then((function(){return e}))}function Ol(e){e.i&&!e.J&&(e.J=!0,Xu(e.i,e))}function Ml(e,t){Fr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Sl(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Ll(){}function Vl(e){return Ye().then((function(){if(e.B)throw new Yr("app-deleted")}))}function Fl(e){return U(e.providerData,(function(e){return e.providerId}))}function Ul(e,t){t&&(ql(e,t.providerId),e.providerData.push(t))}function ql(e,t){z(e.providerData,(function(e){return e.providerId==t}))}function jl(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Vr(e,t,n)}function Bl(e,t){e!=t&&(Fr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),Vr(e,"metadata",t.metadata?function(e){return new Sl(e.a,e.b)}(t.metadata):new Sl),F(t.providerData,(function(t){Ul(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.b,t.b),Vr(e,"refreshToken",e.b.a))}function zl(e){return e.G().then((function(t){var n=e.isAnonymous;return function(e,t){return Ea(e.a,oa,{idToken:t}).then(S(e.zc,e))}(e,t).then((function(){return n||jl(e,"isAnonymous",!1),t}))}))}function Hl(e,t){t[Ds]&&e.ma!=t[Ds]&&(wl(e.b,t),e.dispatchEvent(new El("tokenChanged")),Rl(e,t[Ds]),jl(e,"refreshToken",e.b.a))}function Gl(e,t){return zl(e).then((function(){if(j(Fl(e),t))return Pl(e).then((function(){throw new Yr("provider-already-linked")}))}))}function Wl(e,t,n){return Ur({user:e,credential:vo(t),additionalUserInfo:t=Ri(t),operationType:n})}function Kl(e,t){return Hl(e,t),e.reload().then((function(){return e}))}function Ql(e,t,n,r,i){if(!br())return Je(new Yr("operation-not-supported-in-this-environment"));if(e.h&&!i)return Je(e.h);var o=xi(n.providerId),s=Ir(e.uid+":::"),a=null;(!Sr()||ar())&&e.o&&n.isOAuthProvider&&(a=Ua(e.o,e.l,e.m,t,n,null,s,Zg.a.SDK_VERSION||null,null,null,e.tenantId));var u=nr(a,o&&o.sa,o&&o.ra);return r=r().then((function(){if(Yl(e),!i)return e.G().then((function(){}))})).then((function(){return nl(e.i,u,t,n,s,!!a,e.tenantId)})).then((function(){return new ze((function(n,r){e.ja(t,null,new Yr("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=s,e.c=ol(e.i,e,t,u,s)}))})).then((function(e){return u&&tr(u),e?Ur(e):null})).s((function(e){throw u&&tr(u),e})),Jl(e,r,i)}function $l(e,t,n,r,i){if(!br())return Je(new Yr("operation-not-supported-in-this-environment"));if(e.h&&!i)return Je(e.h);var o=null,s=Ir(e.uid+":::");return r=r().then((function(){if(Yl(e),!i)return e.G().then((function(){}))})).then((function(){return e.ca=s,Pl(e)})).then((function(t){return e.da&&(t=(t=e.da).b.set(ec,e.A(),t.a)),t})).then((function(){return il(e.i,t,n,s,e.tenantId)})).s((function(t){if(o=t,e.da)return tc(e.da);throw o})).then((function(){if(o)throw o})),Jl(e,r,i)}function Yl(e){if(!e.i||!e.J){if(e.i&&!e.J)throw new Yr("internal-error");throw new Yr("auth-domain-config-required")}}function Jl(e,t,n){var r=function(e,t,n){return e.h&&!n?(t.cancel(),Je(e.h)):t.s((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new El("userInvalidated")),e.h=t),t}))}(e,t,n);return e.I.push(r),r.ka((function(){B(e.I,r)})),r}function Xl(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[Ds]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-E())/1e3;var r=new Tl(t,n,e);return e.providerData&&F(e.providerData,(function(e){e&&Ul(r,Ur(e))})),e.redirectEventId&&(r.ca=e.redirectEventId),r}function Zl(e){this.a=e,this.b=wu()}ul.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ul.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(dl(this,!0,null,e.a),Ye()):t.Ba(n,r)?function(e,t,n){n=n.Ba(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.R(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then((function(t){dl(e,a,t,null)})).s((function(t){dl(e,a,null,t)}))}(this,e,t):Je(new Yr("invalid-auth-event")):(dl(this,!1,null,null),Ye())}else Je(new Yr("invalid-auth-event"))},ul.prototype.oa=function(){var e=this;return new ze((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new Yr("timeout");e.a&&e.a.cancel(),e.a=cn(tl.get()).then((function(){e.b||(e.g=!0,dl(e,!0,null,t))}))}(e))}))},fl.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ja(e.c,null,e.a,e.b),Ye()):t.Ba(n,r)?function(e,t){var n=e.b,r=e.c;t.Ba(r,n)(e.g,e.f,e.R(),e.i).then((function(e){t.ja(r,e,null,n)})).s((function(e){t.ja(r,null,e,n)}))}(e,t):Je(new Yr("invalid-auth-event"))}else Je(new Yr("invalid-auth-event"))},ml.prototype.confirm=function(e){return e=yo(this.verificationId,e),this.a(e)},vl.prototype.start=function(){this.a=this.c,function e(t,n){t.stop(),t.b=cn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(t,n)).then((function(){return function(){var e=s.document,t=null;return kr()||!e?Ye():new ze((function(n){t=function(){kr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).s((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return t.h()})).then((function(){e(t,!0)})).s((function(n){t.i(n)&&e(t,!1)}))}(this,!0)},vl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},bl.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},bl.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Je(new Yr("user-token-expired")):e||!this.b||E()>this.c-3e4?this.a?function(e,t){return function(e,t){return new ze((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Ls(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(Ia(e)):e.access_token&&e.refresh_token?n(e):r(new Yr("internal-error")):r(new Yr("network-request-failed"))}),"POST",Mn(t).toString(),e.g,e.u.get()):r(new Yr("internal-error"))}))}(e.f,t).then((function(t){return e.b=t.access_token,e.c=_l(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}})).s((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ye(null):Ye({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Sl.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(El,Ot),T(Tl,on),Tl.prototype.ua=function(e){this.ga=e,Os(this.a,e)},Tl.prototype.ha=function(){return this.ga},Tl.prototype.Ca=function(){return G(this.P)},Tl.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},Vr(Tl.prototype,"providerId","firebase"),(e=Tl.prototype).reload=function(){var e=this;return Jl(this,Vl(this).then((function(){return zl(e).then((function(){return Pl(e)})).then(Ll)})))},e.dc=function(e){return this.G(e).then((function(e){return new yl(e)}))},e.G=function(e){var t=this;return Jl(this,Vl(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new Yr("internal-error");return e.accessToken!=t.ma&&(Rl(t,e.accessToken),t.dispatchEvent(new El("tokenChanged"))),jl(t,"refreshToken",e.refreshToken),e.accessToken})))},e.zc=function(e){if(!(e=e.users)||!e.length)throw new Yr("internal-error");Ml(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?U(e,(function(e){return new Cl(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Ul(this,t[n]);jl(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},e.Ac=function(e){return Mr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(e)},e.hb=function(e){var t=this,n=null;return Jl(this,e.f(this.a,this.uid).then((function(e){return Hl(t,e),n=Wl(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},e.rc=function(e){return Mr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(e)},e.fb=function(e){var t=this,n=null;return Jl(this,Gl(this,e.providerId).then((function(){return t.G()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Wl(t,e,"link"),Kl(t,e)})).then((function(){return n})))},e.sc=function(e,t){var n=this;return Jl(this,Gl(this,"phone").then((function(){return gl(Dl(n),e,t,S(n.fb,n))})))},e.Bc=function(e,t){var n=this;return Jl(this,Ye().then((function(){return gl(Dl(n),e,t,S(n.hb,n))})),!0)},e.rb=function(e){var t=this;return Jl(this,this.G().then((function(n){return t.a.rb(n,e)})).then((function(e){return Hl(t,e),t.reload()})))},e.Sc=function(e){var t=this;return Jl(this,this.G().then((function(n){return e.b(t.a,n)})).then((function(e){return Hl(t,e),t.reload()})))},e.sb=function(e){var t=this;return Jl(this,this.G().then((function(n){return t.a.sb(n,e)})).then((function(e){return Hl(t,e),t.reload()})))},e.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Vl(this);var t=this;return Jl(this,this.G().then((function(n){return t.a.tb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Hl(t,e),jl(t,"displayName",e.displayName||null),jl(t,"photoURL",e.photoUrl||null),F(t.providerData,(function(e){"password"===e.providerId&&(Vr(e,"displayName",t.displayName),Vr(e,"photoURL",t.photoURL))})),Pl(t)})).then(Ll))},e.Qc=function(e){var t=this;return Jl(this,zl(this).then((function(n){return j(Fl(t),e)?function(e,t,n){return Ea(e,na,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return F(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),F(Fl(t),(function(e){n[e]||ql(t,e)})),n[go.PROVIDER_ID]||Vr(t,"phoneNumber",null),Pl(t)})):Pl(t).then((function(){throw new Yr("no-such-provider")}))})))},e.delete=function(){var e=this;return Jl(this,this.G().then((function(t){return Ea(e.a,ta,{idToken:t})})).then((function(){e.dispatchEvent(new El("userDeleted"))}))).then((function(){for(var t=0;t<e.I.length;t++)e.I[t].cancel("app-deleted");Il(e,null),Nl(e,null),e.I=[],e.B=!0,xl(e),Vr(e,"refreshToken",null),e.i&&Zu(e.i,e)}))},e.xb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ca||null)==t||"reauthViaRedirect"==e&&(this.ca||null)==t)},e.ja=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.Ba=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?S(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?S(this.Cb,this):"linkViaRedirect"==e&&(this.ca||null)==t?S(this.Bb,this):"reauthViaRedirect"==e&&(this.ca||null)==t?S(this.Cb,this):null},e.tc=function(e){var t=this;return Ql(this,"linkViaPopup",e,(function(){return Gl(t,e.providerId).then((function(){return Pl(t)}))}),!1)},e.Cc=function(e){return Ql(this,"reauthViaPopup",e,(function(){return Ye()}),!0)},e.uc=function(e){var t=this;return $l(this,"linkViaRedirect",e,(function(){return Gl(t,e.providerId)}),!1)},e.Dc=function(e){return $l(this,"reauthViaRedirect",e,(function(){return Ye()}),!0)},e.Bb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jl(this,this.G().then((function(n){return Qs(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Wl(i,e,"link"),Kl(i,e)})).then((function(){return o})))},e.Cb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jl(this,Ye().then((function(){return zi($s(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Wl(i,e,"reauthenticate"),Hl(i,e),i.h=null,i.reload()})).then((function(){return o})),!0)},e.jb=function(e){var t=this,n=null;return Jl(this,this.G().then((function(t){return n=t,void 0===e||K(e)?{}:bi(new li(e))})).then((function(e){return t.a.jb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.toJSON=function(){return this.A()},e.A=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&Y(e,this.metadata.A()),F(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),e};var ec={name:"redirectUser",C:"session"};function tc(e){return Cu(e.b,ec,e.a)}function nc(e){this.a=e,this.b=wu(),this.c=null,this.f=function(e){var t=oc("local"),n=oc("session"),r=oc("none");return function(e,t,n){var r=Su(t,n),i=_u(e,t.C);return e.get(t,n).then((function(o){var a=null;try{a=Tr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(ic,e.a).then((function(e){return e?oc(e):t}))}))}))})).then((function(t){return e.c=t,rc(e,t.C)})).s((function(){e.c||(e.c=t)}))}(this),this.b.addListener(oc("local"),this.a,S(this.g,this))}function rc(e,t){var n,r=[];for(n in vu)vu[n]!==t&&r.push(Cu(e.b,oc(vu[n]),e.a));return r.push(Cu(e.b,ic,e.a)),function(e){return new ze((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},s=function(e){n(e)},a=0;a<e.length;a++)Xe(e[a],C(o,a),s);else t(i)}))}(r)}nc.prototype.g=function(){var e=this,t=oc("local");lc(this,(function(){return Ye().then((function(){return e.c&&"local"!=e.c.C?e.b.get(t,e.a):null})).then((function(n){if(n)return rc(e,"local").then((function(){e.c=t}))}))}))};var ic={name:"persistence",C:"session"};function oc(e){return{name:"authUser",C:e}}function sc(e,t){return lc(e,(function(){return e.b.set(e.c,t.A(),e.a)}))}function ac(e){return lc(e,(function(){return Cu(e.b,e.c,e.a)}))}function uc(e,t){return lc(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),Xl(e||{})}))}))}function lc(e,t){return e.f=e.f.then(t,t),e.f}function cc(e){if(this.l=!1,Vr(this,"settings",new pl),Vr(this,"app",e),!vc(this).options||!vc(this).options.apiKey)throw new Yr("invalid-api-key");e=Zg.a.SDK_VERSION?mr(Zg.a.SDK_VERSION):null,this.b=new As(vc(this).options&&vc(this).options.apiKey,Ai(Ti),e),this.O=[],this.m=[],this.J=[],this.Ub=Zg.a.INTERNAL.createSubscribe(S(this.oc,this)),this.W=void 0,this.Vb=Zg.a.INTERNAL.createSubscribe(S(this.pc,this)),gc(this,null),this.h=new nc(vc(this).options.apiKey+":"+vc(this).name),this.w=new Zl(vc(this).options.apiKey+":"+vc(this).name),this.Y=Sc(this,function(e){var t=vc(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(ec,e.a).then((function(e){return e&&t&&(e.authDomain=t),Xl(e||{})}))}(e.w,vc(e).options.authDomain).then((function(t){return(e.B=t)&&(t.da=e.w),tc(e.w)}));return Sc(e,t)}(e).then((function(){return uc(e.h,t)})).then((function(t){return t?(t.da=e.w,e.B&&(e.B.ca||null)==(t.ca||null)?t:t.reload().then((function(){return sc(e.h,t).then((function(){return t}))})).s((function(n){return"auth/network-request-failed"==n.code?t:ac(e.h)}))):null})).then((function(t){gc(e,t||null)}));return Sc(e,n)}(this)),this.i=Sc(this,function(e){return e.Y.then((function(){return pc(e)})).s((function(){})).then((function(){if(!e.l)return e.ma()})).s((function(){})).then((function(){if(!e.l){e.ga=!0;var t=e.h;t.b.addListener(oc("local"),t.a,e.ma)}}))}(this)),this.ga=!1,this.ma=S(this.Nc,this),this.ub=S(this.aa,this),this.wa=S(this.bc,this),this.xa=S(this.mc,this),this.Ja=S(this.nc,this),this.a=null,function(e){var t=vc(e).options.authDomain,n=vc(e).options.apiKey;t&&br()&&(e.Tb=e.Y.then((function(){if(!e.l){if(e.a=al(t,n,vc(e).name),Xu(e.a,e),bc(e)&&Ol(bc(e)),e.B){Ol(e.B);var r=e.B;r.ua(e.ha()),Il(r,e),Al(r=e.B,e.I),Nl(r,e),e.B=null}return e.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=S(this.delete,this),this.INTERNAL.logFramework=S(this.vc,this),this.o=0,on.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.ha()},set:function(e){this.ua(e)},enumerable:!1}),e.Z=null,Object.defineProperty(e,"ti",{get:function(){return this.R()},set:function(e){this.nb(e)},enumerable:!1}),e.P=null}(this),this.I=[]}function hc(e){Ot.call(this,"languageCodeChanged"),this.g=e}function dc(e){Ot.call(this,"frameworkChanged"),this.c=e}function fc(e){return e.Tb||Je(new Yr("auth-domain-config-required"))}function pc(e){if(!br())return Je(new Yr("operation-not-supported-in-this-environment"));var t=fc(e).then((function(){return e.a.oa()})).then((function(e){return e?Ur(e):null}));return Sc(e,t)}function mc(e,t){var n={};return n.apiKey=vc(e).options.apiKey,n.authDomain=vc(e).options.authDomain,n.appName=vc(e).name,e.Y.then((function(){return function(e,t,n,r){var i=new Tl(e,t);return n&&(i.da=n),r&&Al(i,r),i.reload().then((function(){return i}))}(n,t,e.w,e.Ca())})).then((function(t){return bc(e)&&t.uid==bc(e).uid?(Bl(bc(e),t),e.aa(t)):(gc(e,t),Ol(t),e.aa(t))})).then((function(){_c(e)}))}function gc(e,t){bc(e)&&(function(e,t){z(e.O,(function(e){return e==t}))}(bc(e),e.ub),$t(bc(e),"tokenChanged",e.wa),$t(bc(e),"userDeleted",e.xa),$t(bc(e),"userInvalidated",e.Ja),xl(bc(e))),t&&(t.O.push(e.ub),Wt(t,"tokenChanged",e.wa),Wt(t,"userDeleted",e.xa),Wt(t,"userInvalidated",e.Ja),0<e.o&&kl(t)),Vr(e,"currentUser",t),t&&(t.ua(e.ha()),Il(t,e),Al(t,e.I),Nl(t,e))}function yc(e,t){var n=null,r=null;return Sc(e,t.then((function(t){return n=vo(t),r=Ri(t),mc(e,t)})).then((function(){return Ur({user:bc(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function vc(e){return e.app}function bc(e){return e.currentUser}function wc(e){return bc(e)&&bc(e)._lat||null}function _c(e){if(e.ga){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](wc(e));if(e.W!==e.getUid()&&e.J.length)for(e.W=e.getUid(),t=0;t<e.J.length;t++)e.J[t]&&e.J[t](wc(e))}}function Sc(e,t){return e.O.push(t),t.ka((function(){B(e.O,t)})),t}function Cc(){}function Ec(){this.a={},this.b=1e12}nc.prototype.mb=function(e){var t=null,n=this;return function(e){var t=new Yr("invalid-persistence-type"),n=new Yr("unsupported-persistence-type");e:{for(r in vu)if(vu[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(lr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!vr()&&"none"!==e)throw n}}(e),lc(this,(function(){return e!=n.c.C?n.b.get(n.c,n.a).then((function(r){return t=r,rc(n,e)})).then((function(){if(n.c=oc(e),t)return n.b.set(n.c,t,n.a)})):Ye()}))},T(cc,on),T(hc,Ot),T(dc,Ot),(e=cc.prototype).mb=function(e){return Sc(this,e=this.h.mb(e))},e.ua=function(e){this.Z===e||this.l||(this.Z=e,Os(this.b,this.Z),this.dispatchEvent(new hc(this.ha())))},e.ha=function(){return this.Z},e.Tc=function(){var e=s.navigator;this.ua(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.vc=function(e){this.I.push(e),Ms(this.b,Zg.a.SDK_VERSION?mr(Zg.a.SDK_VERSION,this.I):null),this.dispatchEvent(new dc(this.I))},e.Ca=function(){return G(this.I)},e.nb=function(e){this.P===e||this.l||(this.P=e,this.b.b=this.P)},e.R=function(){return this.P},e.toJSON=function(){return{apiKey:vc(this).options.apiKey,authDomain:vc(this).options.authDomain,appName:vc(this).name,currentUser:bc(this)&&bc(this).A()}},e.xb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.ja=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.Ba=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?S(this.ac,this):null},e.ac=function(e,t,n,r){var i=this;e={requestUri:e,postBody:r,sessionId:t,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,s=null,a=Ks(i.b,e).then((function(e){return o=vo(e),s=Ri(e),e}));return Sc(this,e=i.Y.then((function(){return a})).then((function(e){return mc(i,e)})).then((function(){return Ur({user:bc(i),credential:o,additionalUserInfo:s,operationType:"signIn"})})))},e.Lc=function(e){if(!br())return Je(new Yr("operation-not-supported-in-this-environment"));var t=this,n=xi(e.providerId),r=Ir(),i=null;(!Sr()||ar())&&vc(this).options.authDomain&&e.isOAuthProvider&&(i=Ua(vc(this).options.authDomain,vc(this).options.apiKey,vc(this).name,"signInViaPopup",e,null,r,Zg.a.SDK_VERSION||null,null,null,this.R()));var o=nr(i,n&&n.sa,n&&n.ra);return Sc(this,n=fc(this).then((function(n){return nl(n,o,"signInViaPopup",e,r,!!i,t.R())})).then((function(){return new ze((function(e,n){t.ja("signInViaPopup",null,new Yr("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=r,t.c=ol(t.a,t,"signInViaPopup",o,r)}))})).then((function(e){return o&&tr(o),e?Ur(e):null})).s((function(e){throw o&&tr(o),e})))},e.Mc=function(e){if(!br())return Je(new Yr("operation-not-supported-in-this-environment"));var t=this;return Sc(this,fc(this).then((function(){return function(e){return lc(e,(function(){return e.b.set(ic,e.c.C,e.a)}))}(t.h)})).then((function(){return il(t.a,"signInViaRedirect",e,void 0,t.R())})))},e.oa=function(){var e=this;return pc(this).then((function(t){return e.a&&cl(e.a.b),t})).s((function(t){throw e.a&&cl(e.a.b),t}))},e.Rc=function(e){if(!e)return Je(new Yr("null-user"));if(this.P!=e.tenantId)return Je(new Yr("tenant-id-mismatch"));var t=this,n={};n.apiKey=vc(this).options.apiKey,n.authDomain=vc(this).options.authDomain,n.appName=vc(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.o,appName:e.m};var i=e.b,o={};return o[Ds]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-E())/1e3,t=new Tl(t,o),n&&(t.da=n),r&&Al(t,r),Bl(t,e),t}(e,n,t.w,t.Ca());return Sc(this,this.i.then((function(){if(vc(t).options.apiKey!=e.l)return r.reload()})).then((function(){return bc(t)&&e.uid==bc(t).uid?(Bl(bc(t),e),t.aa(e)):(gc(t,r),Ol(r),t.aa(r))})).then((function(){_c(t)})))},e.pb=function(){var e=this;return Sc(this,this.i.then((function(){return e.a&&cl(e.a.b),bc(e)?(gc(e,null),ac(e.h).then((function(){_c(e)}))):Ye()})))},e.Nc=function(){var e=this;return uc(this.h,vc(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=bc(e)&&t){n=bc(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Bl(bc(e),t),bc(e).G();(bc(e)||t)&&(gc(e,t),t&&(Ol(t),t.da=e.w),e.a&&Xu(e.a,e),_c(e))}}))},e.aa=function(e){return sc(this.h,e)},e.bc=function(){_c(this),this.aa(bc(this))},e.mc=function(){this.pb()},e.nc=function(){this.pb()},e.oc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(bc(t))}))},e.pc=function(e){var t=this;!function(e,t){e.J.push(t),Sc(e,e.i.then((function(){!e.l&&j(e.J,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(wc(e)))})))}(this,(function(){e.next(bc(t))}))},e.xc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){g(e)?e(bc(r)):g(e.next)&&e.next(bc(r))})),this.Ub(e,t,n)},e.wc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),g(e)?e(bc(r)):g(e.next)&&e.next(bc(r))})),this.Vb(e,t,n)},e.cc=function(e){var t=this;return Sc(this,this.i.then((function(){return bc(t)?bc(t).G(e).then((function(e){return{accessToken:e}})):null})))},e.Hc=function(e){var t=this;return this.i.then((function(){return yc(t,Ea(t.b,ba,{token:e}))})).then((function(e){var n=e.user;return jl(n,"isAnonymous",!1),t.aa(n),e}))},e.Ic=function(e,t){var n=this;return this.i.then((function(){return yc(n,Ea(n.b,wa,{email:e,password:t}))}))},e.Xb=function(e,t){var n=this;return this.i.then((function(){return yc(n,Ea(n.b,Zs,{email:e,password:t}))}))},e.Sa=function(e){var t=this;return this.i.then((function(){return yc(t,e.na(t.b))}))},e.Gc=function(e){return Mr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(e)},e.ob=function(){var e=this;return this.i.then((function(){var t=bc(e);if(t&&t.isAnonymous){var n=Ur({providerId:null,isNewUser:!1});return Ur({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return yc(e,e.b.ob()).then((function(t){var n=t.user;return jl(n,"isAnonymous",!0),e.aa(n),t}))}))},e.getUid=function(){return bc(this)&&bc(this).uid||null},e.Wb=function(e){this.addAuthTokenListener(e),this.o++,0<this.o&&bc(this)&&kl(bc(this))},e.Ec=function(e){var t=this;F(this.m,(function(n){n==e&&t.o--})),0>this.o&&(this.o=0),0==this.o&&bc(this)&&xl(bc(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.m.push(e),Sc(this,this.i.then((function(){t.l||j(t.m,e)&&e(wc(t))})))},e.removeAuthTokenListener=function(e){z(this.m,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.O.length;e++)this.O[e].cancel("app-deleted");return this.O=[],this.h&&(e=this.h).b.removeListener(oc("local"),e.a,this.ma),this.a&&(Zu(this.a,this),cl(this.a.b)),Promise.resolve()},e.$b=function(e){return Sc(this,function(e,t){return Ea(e,ea,{identifier:t,continueUri:wr()?Xn():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.b,e))},e.qc=function(e){return!!ho(e)},e.lb=function(e,t){var n=this;return Sc(this,Ye().then((function(){var e=new li(t);if(!e.c)throw new Yr("argument-error",di+" must be true when sending sign in link to email");return bi(e)})).then((function(t){return n.b.lb(e,t)})).then((function(){})))},e.Uc=function(e){return this.Ma(e).then((function(e){return e.data.email}))},e.ab=function(e,t){return Sc(this,this.b.ab(e,t).then((function(){})))},e.Ma=function(e){return Sc(this,this.b.Ma(e).then((function(e){return new jr(e)})))},e.Ya=function(e){return Sc(this,this.b.Ya(e).then((function(){})))},e.kb=function(e,t){var n=this;return Sc(this,Ye().then((function(){return void 0===t||K(t)?{}:bi(new li(t))})).then((function(t){return n.b.kb(e,t)})).then((function(){})))},e.Kc=function(e,t){return Sc(this,gl(this,e,t,S(this.Sa,this)))},e.Jc=function(e,t){var n=this;return Sc(this,Ye().then((function(){var r=t||Xn(),i=co(e,r);if(!(r=ho(r)))throw new Yr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new Yr("tenant-id-mismatch");return n.Sa(i)})))},Cc.prototype.render=function(){},Cc.prototype.reset=function(){},Cc.prototype.getResponse=function(){},Cc.prototype.execute=function(){};var Tc=null;function Ic(e,t){return(t=Ac(t))&&e.a[t]||null}function Ac(e){return(e=void 0===e?1e12:e)?e.toString():null}function Nc(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Bn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():Wt(this.f,"click",this.i)}function Dc(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function kc(){}Ec.prototype.render=function(e,t){return this.a[this.b.toString()]=new Nc(e,t),this.b++},Ec.prototype.reset=function(e){var t=Ic(this,e);e=Ac(e),t&&e&&(t.delete(),delete this.a[e])},Ec.prototype.getResponse=function(e){return(e=Ic(this,e))?e.getResponse():null},Ec.prototype.execute=function(e){(e=Ic(this,e))&&e.execute()},Nc.prototype.getResponse=function(){return Dc(this),this.b},Nc.prototype.execute=function(){Dc(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},Nc.prototype.delete=function(){Dc(this),this.g=!0,clearTimeout(this.a),this.a=null,$t(this.f,"click",this.i)},kc.prototype.g=function(){return Tc||(Tc=new Ec),Ye(Tc)},kc.prototype.c=function(){};var xc=null;function Rc(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Pc=new J(ee,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Oc=new Dr(3e4,6e4);Rc.prototype.g=function(e){var t=this;return new ze((function(n,r){var i=setTimeout((function(){r(new Yr("network-request-failed"))}),Oc.get());!s.grecaptcha||e!==t.f&&!t.b?(s[t.a]=function(){if(s.grecaptcha){t.f=e;var o=s.grecaptcha.render;s.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new Yr("internal-error"));delete s[t.a]},Ye(ws(ie(Pc,{onload:t.a,hl:e||""}))).s((function(){clearTimeout(i),r(new Yr("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Rc.prototype.c=function(){this.b--};var Mc=null;function Lc(e,t,n,r,i,o,a){if(Vr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=t,this.g=null,a?(xc||(xc=new kc),a=xc):(Mc||(Mc=new Rc),a=Mc),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Uc])throw new Yr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[qc],!s.document)throw new Yr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Bn(t)||!this.i&&Bn(t).hasChildNodes())throw new Yr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new As(e,o||null,i||null),this.v=r||function(){return null};var u=this;this.l=[];var l=this.a[Vc];this.a[Vc]=function(e){if(jc(u,e),"function"==typeof l)l(e);else if("string"==typeof l){var t=yr(l,s);"function"==typeof t&&t(e)}};var c=this.a[Fc];this.a[Fc]=function(){if(jc(u,null),"function"==typeof c)c();else if("string"==typeof c){var e=yr(c,s);"function"==typeof e&&e()}}}var Vc="callback",Fc="expired-callback",Uc="sitekey",qc="size";function jc(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function Bc(e,t){return e.h.push(t),t.ka((function(){B(e.h,t)})),t}function zc(e){if(e.B)throw new Yr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Hc(e,t,n){var r=!1;try{this.b=n||Zg.a.app()}catch(s){throw new Yr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Yr("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ca()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=Zg.a.SDK_VERSION?mr(Zg.a.SDK_VERSION,o):null,Lc.call(this,n,e,t,(function(){try{var e=i.b.auth().ha()}catch(t){e=null}return e}),o,Ai(Ti),r)}function Gc(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<t.length;s++)if(t[s].optional)o=!0;else{if(o)throw new Yr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].N(n[i])&&!o){if(t=t[i],0>i||i>=Wc.length)throw new Yr("internal-error","Argument validator received an unsupported number of arguments.");n=Wc[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.M+".";break e}r=null}}if(r)throw new Yr("argument-error",e+" failed: "+r)}(e=Lc.prototype).Da=function(){var e=this;return this.f?this.f:this.f=Bc(this,Ye().then((function(){if(wr()&&!ur())return or();throw new Yr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.v())})).then((function(t){return e.g=t,Ea(e.o,ca,{})})).then((function(t){e.a[Uc]=t.recaptchaSiteKey})).s((function(t){throw e.f=null,t})))},e.render=function(){zc(this);var e=this;return Bc(this,this.Da().then((function(){if(null===e.c){var t=e.u;if(!e.i){var n=Bn(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!jn&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ve(s.name),'"'),s.type){o.push(' type="',Ve(s.type),'"');var u={};Y(u,s),delete u.type,s=u}o.push(">"),o=o.join("")}return o=i.createElement(o),s&&(a(s)?o.className=s:p(s)?o.className=s.join(" "):zn(o,s)),2<r.length&&function(e,t,n){function r(n){n&&t.appendChild(a(n)?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!m(o)||y(o)&&0<o.nodeType?r(o):F(Gn(o)?G(o):o,r)}}(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){zc(this);var e=this;return Bc(this,this.render().then((function(t){return new ze((function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(function(e,t){z(e.l,(function(e){return e==t}))}(e,i),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){zc(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){zc(this),this.B=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=Bn(this.u);for(var t;t=e.firstChild;)e.removeChild(t)}},T(Hc,Lc);var Wc="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Kc(e,t){return{name:e||"",M:"a valid string",optional:!!t,N:a}}function Qc(e,t){return{name:e||"",M:"a boolean",optional:!!t,N:u}}function $c(e,t){return{name:e||"",M:"a valid object",optional:!!t,N:y}}function Yc(e,t){return{name:e||"",M:"a function",optional:!!t,N:g}}function Jc(e,t){return{name:e||"",M:"null",optional:!!t,N:f}}function Xc(e){return{name:e?e+"Credential":"credential",M:e?"a valid "+e+" credential":"a valid credential",optional:!1,N:function(t){return!!t&&!(!t.na||e&&t.providerId!==e)}}}function Zc(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(e){return!!(e&&a(e.type)&&g(e.verify))}}}function eh(e,t,n,r){return{name:n||"",M:e.M+" or "+t.M,optional:!!r,N:function(n){return e.N(n)||t.N(n)}}}function th(e,t){for(var n in t){var r=t[n].name;e[r]=ih(r,e[n],t[n].j)}}function nh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:C((function(e){return this[e]}),n),set:C((function(e,t,n,r){Gc(e,[n],[r],!0),this[t]=r}),r,n,t[n].Za),enumerable:!0})}}function rh(e,t,n,r){e[t]=ih(t,n,r)}function ih(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Gc(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}th(cc.prototype,{Ya:{name:"applyActionCode",j:[Kc("code")]},Ma:{name:"checkActionCode",j:[Kc("code")]},ab:{name:"confirmPasswordReset",j:[Kc("code"),Kc("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[Kc("email"),Kc("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[Kc("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[Kc("emailLink")]},wc:{name:"onAuthStateChanged",j:[eh($c(),Yc(),"nextOrObserver"),Yc("opt_error",!0),Yc("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[eh($c(),Yc(),"nextOrObserver"),Yc("opt_error",!0),Yc("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Kc("email"),eh($c("opt_actionCodeSettings",!0),Jc(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Kc("email"),$c("actionCodeSettings")]},mb:{name:"setPersistence",j:[Kc("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[Xc()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[Xc()]},Hc:{name:"signInWithCustomToken",j:[Kc("token")]},Ic:{name:"signInWithEmailAndPassword",j:[Kc("email"),Kc("password")]},Jc:{name:"signInWithEmailLink",j:[Kc("email"),Kc("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[Kc("phoneNumber"),Zc()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[eh({name:"user",M:"an instance of Firebase User",optional:!1,N:function(e){return!!(e&&e instanceof Tl)}},Jc(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Kc(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[Kc("code")]}}),nh(cc.prototype,{lc:{name:"languageCode",Za:eh(Kc(),Jc(),"languageCode")},ti:{name:"tenantId",Za:eh(Kc(),Jc(),"tenantId")}}),(cc.Persistence=vu).LOCAL="local",cc.Persistence.SESSION="session",cc.Persistence.NONE="none",th(Tl.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Qc("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[Qc("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[Xc()]},fb:{name:"linkWithCredential",j:[Xc()]},sc:{name:"linkWithPhoneNumber",j:[Kc("phoneNumber"),Zc()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Xc()]},hb:{name:"reauthenticateWithCredential",j:[Xc()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[Kc("phoneNumber"),Zc()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[eh($c("opt_actionCodeSettings",!0),Jc(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Kc(null,!0)]},Qc:{name:"unlink",j:[Kc("provider")]},rb:{name:"updateEmail",j:[Kc("email")]},sb:{name:"updatePassword",j:[Kc("password")]},Sc:{name:"updatePhoneNumber",j:[Xc("phone")]},tb:{name:"updateProfile",j:[$c("profile")]}}),th(Ec.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),th(Cc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),th(ze.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),nh(pl.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:Qc("appVerificationDisabledForTesting")}}),th(ml.prototype,{confirm:{name:"confirm",j:[Kc("verificationCode")]}}),rh(Bi,"fromJSON",(function(e){e=a(e)?JSON.parse(e):e;for(var t,n=[$i,uo,po,Wi],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[eh(Kc(),$c(),"json")]),rh(lo,"credential",(function(e,t){return new ao(e,t)}),[Kc("email"),Kc("password")]),th(ao.prototype,{A:{name:"toJSON",j:[Kc(null,!0)]}}),th(Zi.prototype,{ya:{name:"addScope",j:[Kc("scope")]},Ga:{name:"setCustomParameters",j:[$c("customOAuthParameters")]}}),rh(Zi,"credential",eo,[eh(Kc(),$c(),"token")]),rh(lo,"credentialWithLink",co,[Kc("email"),Kc("emailLink")]),th(to.prototype,{ya:{name:"addScope",j:[Kc("scope")]},Ga:{name:"setCustomParameters",j:[$c("customOAuthParameters")]}}),rh(to,"credential",no,[eh(Kc(),$c(),"token")]),th(ro.prototype,{ya:{name:"addScope",j:[Kc("scope")]},Ga:{name:"setCustomParameters",j:[$c("customOAuthParameters")]}}),rh(ro,"credential",io,[eh(Kc(),eh($c(),Jc()),"idToken"),eh(Kc(),Jc(),"accessToken",!0)]),th(oo.prototype,{Ga:{name:"setCustomParameters",j:[$c("customOAuthParameters")]}}),rh(oo,"credential",so,[eh(Kc(),$c(),"token"),Kc("secret",!0)]),th(Xi.prototype,{ya:{name:"addScope",j:[Kc("scope")]},credential:{name:"credential",j:[eh(Kc(),eh($c(),Jc()),"optionsOrIdToken"),eh(Kc(),Jc(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[$c("customOAuthParameters")]}}),th(Ki.prototype,{A:{name:"toJSON",j:[Kc(null,!0)]}}),th(Hi.prototype,{A:{name:"toJSON",j:[Kc(null,!0)]}}),rh(go,"credential",yo,[Kc("verificationId"),Kc("verificationCode")]),th(go.prototype,{Wa:{name:"verifyPhoneNumber",j:[Kc("phoneNumber"),Zc()]}}),th(fo.prototype,{A:{name:"toJSON",j:[Kc(null,!0)]}}),th(Yr.prototype,{toJSON:{name:"toJSON",j:[Kc(null,!0)]}}),th(Io.prototype,{toJSON:{name:"toJSON",j:[Kc(null,!0)]}}),th(To.prototype,{toJSON:{name:"toJSON",j:[Kc(null,!0)]}}),th(Hc.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),rh(ei,"parseLink",ui,[Kc("link")]),function(){if(void 0===Zg.a||!Zg.a.INTERNAL||!Zg.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Br,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:cc,AuthCredential:Bi,Error:Yr};rh(e,"EmailAuthProvider",lo,[]),rh(e,"FacebookAuthProvider",Zi,[]),rh(e,"GithubAuthProvider",to,[]),rh(e,"GoogleAuthProvider",ro,[]),rh(e,"TwitterAuthProvider",oo,[]),rh(e,"OAuthProvider",Xi,[Kc("providerId")]),rh(e,"SAMLAuthProvider",Ji,[Kc("providerId")]),rh(e,"PhoneAuthProvider",go,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(e){return!!(e&&e instanceof cc)}}]),rh(e,"RecaptchaVerifier",Hc,[eh(Kc(),{name:"",M:"an HTML element",optional:!1,N:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),$c("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(e){return!!(e&&e instanceof Zg.a.app.App)}}]),rh(e,"ActionCodeURL",ei,[]),Zg.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new cc(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),Zg.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:S((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:S(e.cc,e),addAuthTokenListener:S(e.Wb,e),removeAuthTokenListener:S(e.Ec,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Zg.a.registerVersion("@firebase/auth","0.13.3"),Zg.a.INTERNAL.extendNamespace({User:Tl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});let ey=class{};var ty;n("6Joi");let ny=ty=class{static enablePersistence(e){return{ngModule:ty,providers:[{provide:om,useValue:!0},{provide:sm,useValue:e}]}}};class ry{}var iy=Sa(Fp,[Up],(function(e){return function(e){const t={},n=[];let r=!1;for(let i=0;i<e.length;i++){const o=e[i];o.token===Pt&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,t[Xn(o.token)]=o}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}([Or(512,an,un,[[8,[zp,Sm,Bm,Jm,ag,dg,Vg,Bg,Jg]],[3,an],Be]),Or(5120,Qi,Jo,[[3,Qi]]),Or(4608,qa,ja,[Qi,[2,Ua]]),Or(5120,Ni,Xo,[fo]),Or(5120,ji,Bi,[]),Or(5120,kn,$o,[]),Or(5120,xn,Yo,[]),Or(4608,ll,cl,[eu]),Or(6144,It,null,[ll]),Or(4608,nl,il,[]),Or(5120,Eu,(function(e,t,n,r,i,o,s,a){return[new el(e,t,n),new ul(r),new ol(i,o,s,a)]}),[eu,fo,Gi,eu,eu,nl,Ki,[2,rl]]),Or(4608,Tu,Tu,[Eu,fo]),Or(135680,Nu,Nu,[eu]),Or(4608,Mu,Mu,[Tu,Nu,ji]),Or(6144,pn,null,[Mu]),Or(6144,Au,null,[Nu]),Or(4608,wo,wo,[fo]),Or(5120,Jd,xp,[lp]),Or(4608,vp,vp,[]),Or(6144,gp,null,[vp]),Or(135680,bp,bp,[lp,Mo,to,Mt,gp]),Or(4608,yp,yp,[]),Or(5120,wp,Ip,[lp,ru,_p]),Or(5120,Mp,Op,[Rp]),Or(5120,Wi,(function(e,t){return[e,t]}),[Mp,Mp]),Or(4608,Ic,Ic,[]),Or(4608,zl,zl,[]),Or(5120,Xc,Zc,[Yc,fo,[2,Jc]]),Or(4608,th,th,[Yc,[2,Jc],Gi,fo]),Or(4608,hm,hm,[Yc,[2,Jc],[2,om],[2,am],Gi,fo,[2,sm]]),Or(1073742336,Za,Za,[]),Or(1024,et,vl,[]),Or(1024,No,(function(){return[Ep(),Ep()]}),[]),Or(512,Rp,Rp,[Mt]),Or(1024,Ui,(function(e,t,n){return[(r=e,_u("probe",Cu),_u("coreTokens",Object.assign({},Su,(r||[]).reduce((e,t)=>(e[t.name]=t.token,e),{}))),()=>Cu),Pp(t),Pp(n)];var r}),[[2,No],Rp,Rp]),Or(512,qi,qi,[[2,Ui]]),Or(131584,Po,Po,[fo,Ki,Mt,et,an,qi]),Or(1073742336,Zo,Zo,[Po]),Or(1073742336,bl,bl,[[3,bl]]),Or(1024,Sp,Np,[[3,lp]]),Or(512,Dd,kd,[]),Or(512,fp,fp,[]),Or(256,_p,{},[]),Or(1024,xa,Ap,[Da,[2,Ra],_p]),Or(512,Pa,Pa,[xa,Da]),Or(512,to,to,[]),Or(512,Mo,qo,[to,[2,Fo]]),Or(1024,np,(function(){return[[],[{path:"course/:id",component:Na,canActivate:[Lp]},{path:"courses",component:Ta},{path:"login",component:Nc},{path:"register",component:Dc},{path:"admin",component:kc,canActivate:[Vp]},{path:"addCourse",component:xc,canActivate:[Vp]},{path:"editCourse/:id",component:Rc,canActivate:[Vp]},{path:"",redirectTo:"/courses",pathMatch:"full"},{path:"**",redirectTo:""}]]}),[]),Or(1024,lp,kp,[Po,Dd,fp,Pa,Mt,Mo,to,np,_p,[2,ip],[2,ep]]),Or(1073742336,Tp,Tp,[[2,Sp],[2,lp]]),Or(1073742336,ry,ry,[]),Or(1073742336,Tc,Tc,[]),Or(1073742336,Ac,Ac,[]),Or(1073742336,eh,eh,[]),Or(1073742336,ey,ey,[]),Or(1073742336,ny,ny,[]),Or(1073742336,Fp,Fp,[]),Or(256,Pt,!0,[]),Or(256,Yc,{apiKey:"AIzaSyByr_sHiSUgTnKKIdkTpLxAjRDZFlRhYS4",authDomain:"wdai-courses.firebaseapp.com",databaseURL:"https://wdai-courses.firebaseio.com",projectId:"wdai-courses",storageBucket:"wdai-courses.appspot.com",messagingSenderId:"463946576158",appId:"1:463946576158:web:8d288c8c6d0be2b4b9590f"},[]),Or(256,Jc,void 0,[])])}));(function(){if(nt)throw new Error("Cannot enable prod mode after platform setup.");tt=!1})(),yl().bootstrapModuleFactory(iy).catch(e=>console.error(e))},zVF4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},a=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],s=i+1<e.length,a=s?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=(15&a)<<2|l>>6,h=63&l;u||(h=64,s||(c=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[c],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{o=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},l=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=c(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var f="FirebaseError",p=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=f,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],s=o?g(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new p(i,a),l=0,c=Object.keys(r);l<c.length;l++){var h=c[l];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},e}();function g(e,t){return e.replace(y,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;function v(e){return JSON.parse(e)}var b=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=v(l(o[0])||""),n=v(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}},w=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=l^a&(u^l),o=1518500249):(i=a^u^l,o=1859775393):r<60?(i=a&u|l&(a|u),o=2400959708):(i=a^u^l,o=3395469782);var h=(s<<5|s>>>27)+i+c+o+n[r]&4294967295;c=l,l=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}(),_=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function S(){}function C(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=m,t.FirebaseError=p,t.Sha1=w,t.assert=o,t.assertionError=s,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=u,t.base64Decode=l,t.base64Encode=function(e){var t=a(e);return u.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new _(e,t);return n.subscribe.bind(n)},t.decode=b,t.deepCopy=function(e){return c(void 0,e)},t.deepExtend=c,t.errorPrefix=C,t.getUA=d,t.isAdmin=function(e){var t=b(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=b(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=b(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=b(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=v,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;o(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(e,t,r)+"must be a valid firebase namespace.")}},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);